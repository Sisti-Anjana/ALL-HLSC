{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LibsysAdmin\\\\OneDrive - Libsys IT Services Private Limited\\\\Desktop\\\\ALLLL HLSC\\\\client\\\\src\\\\components\\\\dashboard\\\\IssueDetailsTable.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useSearchParams } from 'react-router-dom';\nimport { issueService } from '../../services/issueService';\nimport { portfolioService } from '../../services/portfolioService';\nimport { adminService } from '../../services/adminService';\nimport { useAuth } from '../../context/AuthContext';\nimport toast from 'react-hot-toast';\nimport IssueExportButtons from '../common/IssueExportButtons';\nimport { useDebounce } from '../../hooks/useDebounce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IssueDetailsTable = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const queryClient = useQueryClient();\n  const [searchParams] = useSearchParams();\n\n  // Get portfolio and hour from URL query parameters\n  const portfolioParam = searchParams.get('portfolio');\n  const hourParam = searchParams.get('hour');\n  const currentHour = new Date().getHours().toString();\n\n  // Search and filter states\n  const [searchQuery, setSearchQuery] = useState('');\n  const debouncedSearchQuery = useDebounce(searchQuery, 300); // Debounce search by 300ms\n  const [dateFilter, setDateFilter] = useState('');\n  // If portfolio param exists, use hour param or current hour; otherwise 'all'\n  const [hourFilter, setHourFilter] = useState(portfolioParam ? hourParam || currentHour : 'all');\n  const [issueFilter, setIssueFilter] = useState('active');\n  // If portfolio param exists, default to that portfolio; otherwise 'all'\n  const [selectedPortfolio, setSelectedPortfolio] = useState(portfolioParam || 'all');\n  const todayStr = new Date().toISOString().split('T')[0];\n  const [startDate, setStartDate] = useState(todayStr);\n  const [endDate, setEndDate] = useState(todayStr);\n  const [quickRange, setQuickRange] = useState('today');\n\n  // Initialize dates on mount\n  useEffect(() => {\n    const today = new Date().toISOString().split('T')[0];\n    setStartDate(today);\n    setEndDate(today);\n    handleQuickRange('today');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Export states\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n\n  // New issue form states\n  const [newIssue, setNewIssue] = useState({\n    portfolio_id: '',\n    issue_hour: new Date().getHours(),\n    description: '',\n    monitored_by: user !== null && user !== void 0 && user.email ? [user.email] : []\n  });\n  const [issuePresent, setIssuePresent] = useState('');\n  const [caseNumber, setCaseNumber] = useState('');\n  const [missedAlertsBy, setMissedAlertsBy] = useState('');\n  const [selectedMonitoredBy, setSelectedMonitoredBy] = useState((user === null || user === void 0 ? void 0 : user.email) || '');\n  const [activeLock, setActiveLock] = useState(null);\n\n  // Fetch portfolios\n  const {\n    data: portfolios = []\n  } = useQuery({\n    queryKey: ['portfolios'],\n    queryFn: portfolioService.getAll\n  });\n\n  // Fetch users for dropdowns\n  const {\n    data: users = []\n  } = useQuery({\n    queryKey: ['admin-users'],\n    queryFn: adminService.getUsers\n  });\n\n  // Fetch locks to detect the current user's active lock\n  const {\n    data: locks = []\n  } = useQuery({\n    queryKey: ['portfolio-locks'],\n    queryFn: adminService.getLocks,\n    refetchInterval: 30000\n  });\n\n  // Derive active lock for the logged-in user (current hour)\n  useEffect(() => {\n    if (!(user !== null && user !== void 0 && user.email) || locks.length === 0) {\n      setActiveLock(null);\n      return;\n    }\n    const currentHour = new Date().getHours();\n    const lock = locks.find(l => {\n      var _l$monitored_by;\n      return ((_l$monitored_by = l.monitored_by) === null || _l$monitored_by === void 0 ? void 0 : _l$monitored_by.toLowerCase()) === user.email.toLowerCase() && l.issue_hour === currentHour;\n    });\n    setActiveLock(lock || null);\n  }, [locks, user === null || user === void 0 ? void 0 : user.email]);\n\n  // Set default monitored by to current user's email\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.email) {\n      setSelectedMonitoredBy(user.email);\n      setNewIssue(prev => ({\n        ...prev,\n        monitored_by: [user.email]\n      }));\n    }\n  }, [user]);\n\n  // When there is an active lock, prefill and lock portfolio/hour/monitored_by\n  useEffect(() => {\n    if (activeLock) {\n      setNewIssue(prev => ({\n        ...prev,\n        portfolio_id: activeLock.portfolio_id,\n        issue_hour: activeLock.issue_hour,\n        monitored_by: user !== null && user !== void 0 && user.email ? [user.email] : prev.monitored_by\n      }));\n      setSelectedMonitoredBy((user === null || user === void 0 ? void 0 : user.email) || '');\n    }\n  }, [activeLock, user === null || user === void 0 ? void 0 : user.email]);\n\n  // Initialize dates on mount\n  useEffect(() => {\n    const today = new Date().toISOString().split('T')[0];\n    setStartDate(today);\n    setEndDate(today);\n    handleQuickRange('today');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Build filters for API\n  const buildFilters = () => {\n    const filters = {};\n    if (searchQuery) filters.search = searchQuery;\n    if (selectedPortfolio && selectedPortfolio !== 'all') {\n      filters.portfolio_id = selectedPortfolio;\n    }\n    if (hourFilter && hourFilter !== 'all') {\n      filters.issue_hour = parseInt(hourFilter);\n    }\n    // \"Active issues\" = issues where Issue Present = Yes (description !== 'No issue')\n    // \"All issues\" = all issues (both Yes and No)\n    if (issueFilter === 'active') {\n      filters.description = '!No issue'; // Filter out \"No issue\" entries\n    }\n    // Note: Date filtering will be handled client-side or added to backend later\n    return filters;\n  };\n\n  // Fetch issues\n  const {\n    data: allIssues = [],\n    isLoading\n  } = useQuery({\n    queryKey: ['issues', buildFilters(), selectedPortfolio, hourFilter, issueFilter, searchQuery],\n    queryFn: () => issueService.getAll(buildFilters())\n  });\n\n  // Filter issues by date range on client-side\n  const issues = allIssues.filter(issue => {\n    if (!startDate || !endDate) return true;\n    const issueDate = new Date(issue.created_at).toISOString().split('T')[0];\n    return issueDate >= startDate && issueDate <= endDate;\n  }).sort((a, b) => {\n    // Sort by newest first\n    return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n  });\n\n  // Create issue mutation\n  const createMutation = useMutation({\n    mutationFn: issueService.create,\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['issues']\n      });\n      queryClient.invalidateQueries({\n        queryKey: ['portfolio-activity']\n      });\n      toast.success('Issue logged successfully');\n      // Reset form\n      setNewIssue({\n        portfolio_id: '',\n        issue_hour: new Date().getHours(),\n        description: '',\n        monitored_by: user !== null && user !== void 0 && user.email ? [user.email] : []\n      });\n      setIssuePresent('');\n      setCaseNumber('');\n      setMissedAlertsBy('');\n      setSelectedMonitoredBy((user === null || user === void 0 ? void 0 : user.email) || '');\n    },\n    onError: error => {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to log issue');\n    }\n  });\n\n  // Update issue mutation\n  const updateMutation = useMutation({\n    mutationFn: ({\n      id,\n      data\n    }) => issueService.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['issues']\n      });\n      queryClient.invalidateQueries({\n        queryKey: ['portfolio-activity']\n      });\n      toast.success('Issue updated successfully');\n    },\n    onError: error => {\n      var _error$response2, _error$response2$data;\n      toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to update issue');\n    }\n  });\n\n  // Delete issue mutation\n  const deleteMutation = useMutation({\n    mutationFn: issueService.delete,\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['issues']\n      });\n      queryClient.invalidateQueries({\n        queryKey: ['portfolio-activity']\n      });\n      toast.success('Issue deleted successfully');\n    },\n    onError: error => {\n      var _error$response3, _error$response3$data;\n      toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Failed to delete issue');\n    }\n  });\n  const handleLogTicket = () => {\n    // Validation\n    if (!newIssue.portfolio_id) {\n      toast.error('Please select a Portfolio');\n      return;\n    }\n\n    // Check if portfolio is locked by another user\n    if (newIssue.portfolio_id && newIssue.issue_hour !== undefined) {\n      const currentHour = newIssue.issue_hour;\n      const lockForThisPortfolio = locks.find(l => l.portfolio_id === newIssue.portfolio_id && l.issue_hour === currentHour);\n      if (lockForThisPortfolio) {\n        var _lockForThisPortfolio, _user$email;\n        const isLockedByMe = ((_lockForThisPortfolio = lockForThisPortfolio.monitored_by) === null || _lockForThisPortfolio === void 0 ? void 0 : _lockForThisPortfolio.toLowerCase()) === (user === null || user === void 0 ? void 0 : (_user$email = user.email) === null || _user$email === void 0 ? void 0 : _user$email.toLowerCase());\n        if (!isLockedByMe) {\n          var _lockForThisPortfolio2;\n          toast.error(`This portfolio is locked by ${((_lockForThisPortfolio2 = lockForThisPortfolio.monitored_by) === null || _lockForThisPortfolio2 === void 0 ? void 0 : _lockForThisPortfolio2.split('@')[0]) || 'another user'}. Only they can log issues.`);\n          return;\n        }\n      }\n    }\n    if (!issuePresent || issuePresent !== 'yes' && issuePresent !== 'no') {\n      toast.error('Please select \"Yes\" or \"No\" for Issue Present');\n      return;\n    }\n    if (!selectedMonitoredBy) {\n      toast.error('Monitored By is REQUIRED. Please select who monitored this hour.');\n      return;\n    }\n    if (issuePresent === 'yes' && (!newIssue.description || newIssue.description.trim() === '')) {\n      toast.error('Please provide issue details when issue is present');\n      return;\n    }\n\n    // Build issue data - map to database schema\n    // monitored_by is VARCHAR(255) (string), missed_by is TEXT[] (array)\n    const issueData = {\n      portfolio_id: newIssue.portfolio_id,\n      site_name: '',\n      issue_hour: newIssue.issue_hour || new Date().getHours(),\n      description: issuePresent === 'no' ? 'No issue' : (newIssue.description || '').trim(),\n      severity: (issuePresent === 'yes' ? 'high' : 'low').toLowerCase(),\n      // Database uses lowercase\n      status: 'open',\n      monitored_by: selectedMonitoredBy || '',\n      // Database expects single string, not array\n      missed_by: issuePresent === 'yes' && missedAlertsBy ? [missedAlertsBy] : null,\n      // Array for missed_by, null if empty\n      notes: caseNumber ? `Case #: ${caseNumber}` : null\n    };\n\n    // Remove null/undefined fields\n    Object.keys(issueData).forEach(key => {\n      if (issueData[key] === null || issueData[key] === undefined) {\n        delete issueData[key];\n      }\n    });\n    console.log('Creating issue with data:', issueData);\n    createMutation.mutate(issueData);\n  };\n  const handleClearFilters = () => {\n    setSearchQuery('');\n    setDateFilter('');\n    setHourFilter('all');\n    setIssueFilter('active');\n    setSelectedPortfolio('all');\n    const today = new Date().toISOString().split('T')[0];\n    setStartDate(today);\n    setEndDate(today);\n    setQuickRange('today');\n  };\n  const handleQuickRange = range => {\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n    const weekStart = new Date(today);\n    weekStart.setDate(today.getDate() - today.getDay()); // Start of week (Sunday)\n    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);\n    switch (range) {\n      case 'today':\n        setStartDate(today.toISOString().split('T')[0]);\n        setEndDate(today.toISOString().split('T')[0]);\n        setQuickRange('today');\n        break;\n      case 'yesterday':\n        setStartDate(yesterday.toISOString().split('T')[0]);\n        setEndDate(yesterday.toISOString().split('T')[0]);\n        setQuickRange('yesterday');\n        break;\n      case 'week':\n        setStartDate(weekStart.toISOString().split('T')[0]);\n        setEndDate(today.toISOString().split('T')[0]);\n        setQuickRange('week');\n        break;\n      case 'month':\n        setStartDate(monthStart.toISOString().split('T')[0]);\n        setEndDate(today.toISOString().split('T')[0]);\n        setQuickRange('month');\n        break;\n      case 'all':\n        // Set to a very early date (e.g., 2020-01-01) to show all issues till today\n        setStartDate('2020-01-01');\n        setEndDate(today.toISOString().split('T')[0]);\n        setQuickRange('all');\n        break;\n    }\n  };\n  const handleExport = async type => {\n    try {\n      const filters = {};\n      if (fromDate) {\n        // Add date filtering when backend supports it\n      }\n      if (toDate) {\n        // Add date filtering when backend supports it\n      }\n      if (type === 'active') {\n        filters.status = 'open';\n      }\n      const data = await issueService.export(filters);\n      // Handle export download\n      toast.success('Export initiated');\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      toast.error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || 'Failed to export issues');\n    }\n  };\n  const formatDateTime = dateString => {\n    const date = new Date(dateString);\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const year = date.getFullYear();\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n    return `${month}/${day}/${year}, ${hours}:${minutes}`;\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const year = date.getFullYear();\n    return `${month}/${day}/${year}`;\n  };\n  const getCurrentDateTime = () => {\n    const now = new Date();\n    return formatDateTime(now.toISOString());\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-md p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 flex-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex-1 min-w-[200px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: searchQuery,\n              onChange: e => setSearchQuery(e.target.value),\n              placeholder: \"Search issues...\",\n              className: \"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-medium text-gray-700 whitespace-nowrap hidden sm:inline\",\n              children: \"Quick Range:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setQuickRange('today');\n                handleQuickRange('today');\n              },\n              className: `px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${quickRange === 'today' ? 'bg-green-500 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'}`,\n              children: \"Today\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setQuickRange('yesterday');\n                handleQuickRange('yesterday');\n              },\n              className: `px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${quickRange === 'yesterday' ? 'bg-green-500 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'}`,\n              children: \"Yesterday\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setQuickRange('week');\n                handleQuickRange('week');\n              },\n              className: `px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${quickRange === 'week' ? 'bg-green-500 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'}`,\n              children: \"This Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setQuickRange('month');\n                handleQuickRange('month');\n              },\n              className: `px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${quickRange === 'month' ? 'bg-green-500 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'}`,\n              children: \"This Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setQuickRange('all');\n                handleQuickRange('all');\n              },\n              className: `px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${quickRange === 'all' ? 'bg-green-500 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'}`,\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-xs font-medium text-gray-700 mb-1\",\n              children: \"Select Portfolio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedPortfolio,\n              onChange: e => setSelectedPortfolio(e.target.value),\n              className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"all\",\n                children: \"All Portfolios\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 17\n              }, this), portfolios.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: p.id,\n                children: p.name\n              }, p.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-xs font-medium text-gray-700 mb-1\",\n              children: \"Issue Filter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: issueFilter,\n              onChange: e => setIssueFilter(e.target.value),\n              className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"active\",\n                children: \"Active Issues (Default)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"all\",\n                children: \"All Issues\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-xs font-medium text-gray-700 mb-1\",\n              children: \"Hour Filter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: hourFilter,\n              onChange: e => setHourFilter(e.target.value),\n              className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"all\",\n                children: \"All Hours\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 17\n              }, this), Array.from({\n                length: 24\n              }, (_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: i.toString(),\n                children: [i, \":00\"]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 flex-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-xs font-medium text-gray-700 whitespace-nowrap\",\n              children: \"Start Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: startDate,\n              onChange: e => setStartDate(e.target.value),\n              className: \"px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-xs font-medium text-gray-700 whitespace-nowrap\",\n              children: \"End Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: endDate,\n              onChange: e => setEndDate(e.target.value),\n              className: \"px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-3 border-t border-gray-200\",\n        children: /*#__PURE__*/_jsxDEV(IssueExportButtons, {\n          filters: buildFilters(),\n          startDate: startDate,\n          endDate: endDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-md overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-6 py-4 border-b border-gray-200 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: [\"Issue Results (\", issues.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Showing newest first\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"DATE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"PORTFOLIO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"HOUR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"ISSUE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"DETAILS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"MONITORED BY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\",\n                children: \"ACTIONS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: isLoading ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 7,\n                className: \"px-4 py-8 text-center text-gray-500\",\n                children: \"Loading issues...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 17\n            }, this) : issues.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 7,\n                className: \"px-4 py-8 text-center text-gray-500\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: \"No issues found\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 576,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-400\",\n                    children: issueFilter === 'active' ? \"No issues with 'Issue Present = Yes' found. Select 'All Issues' to see all issues, or try selecting a different portfolio or adjusting the date range.\" : \"No issues found. Try selecting a different portfolio or adjusting the date range.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 577,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 575,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this) : issues.map(issue => {\n              var _issue$portfolio, _issue$portfolio2;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-blue-50 hover:shadow-sm transition-all duration-200 cursor-pointer border-l-4 border-l-transparent hover:border-l-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm text-gray-900\",\n                  children: formatDate(issue.created_at)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm text-gray-900\",\n                  children: ((_issue$portfolio = issue.portfolio) === null || _issue$portfolio === void 0 ? void 0 : _issue$portfolio.name) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 594,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm text-gray-900\",\n                  children: [issue.issue_hour, \":00\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3\",\n                  children: issue.description && issue.description.toLowerCase() === 'no issue' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",\n                    children: \"No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 25\n                  }, this) : issue.description && issue.description.trim() !== '' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\",\n                    children: \"Yes\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 609,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm text-gray-900\",\n                  children: issue.description || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 614,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm text-gray-900\",\n                  children: Array.isArray(issue.monitored_by) && issue.monitored_by.length > 0 ? issue.monitored_by[0].split('@')[0] : issue.monitored_by || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 617,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      setIssueToDelete(issue.id);\n                      setDeleteConfirmOpen(true);\n                    },\n                    className: \"text-red-600 hover:text-red-800 hover:underline hover:font-semibold text-sm transition-all duration-200\",\n                    \"aria-label\": `Delete issue from ${((_issue$portfolio2 = issue.portfolio) === null || _issue$portfolio2 === void 0 ? void 0 : _issue$portfolio2.name) || 'portfolio'}`,\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 623,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 21\n                }, this)]\n              }, issue.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n};\n_s(IssueDetailsTable, \"4KD6Jxw3PipPWarWkfa/1G3M1Q0=\", false, function () {\n  return [useAuth, useQueryClient, useSearchParams, useDebounce, useQuery, useQuery, useQuery, useQuery, useMutation, useMutation, useMutation];\n});\n_c = IssueDetailsTable;\nexport default IssueDetailsTable;\nvar _c;\n$RefreshReg$(_c, \"IssueDetailsTable\");","map":{"version":3,"names":["React","useState","useEffect","useQuery","useMutation","useQueryClient","useSearchParams","issueService","portfolioService","adminService","useAuth","toast","IssueExportButtons","useDebounce","jsxDEV","_jsxDEV","IssueDetailsTable","_s","user","queryClient","searchParams","portfolioParam","get","hourParam","currentHour","Date","getHours","toString","searchQuery","setSearchQuery","debouncedSearchQuery","dateFilter","setDateFilter","hourFilter","setHourFilter","issueFilter","setIssueFilter","selectedPortfolio","setSelectedPortfolio","todayStr","toISOString","split","startDate","setStartDate","endDate","setEndDate","quickRange","setQuickRange","today","handleQuickRange","fromDate","setFromDate","toDate","setToDate","newIssue","setNewIssue","portfolio_id","issue_hour","description","monitored_by","email","issuePresent","setIssuePresent","caseNumber","setCaseNumber","missedAlertsBy","setMissedAlertsBy","selectedMonitoredBy","setSelectedMonitoredBy","activeLock","setActiveLock","data","portfolios","queryKey","queryFn","getAll","users","getUsers","locks","getLocks","refetchInterval","length","lock","find","l","_l$monitored_by","toLowerCase","prev","buildFilters","filters","search","parseInt","allIssues","isLoading","issues","filter","issue","issueDate","created_at","sort","a","b","getTime","createMutation","mutationFn","create","onSuccess","invalidateQueries","success","onError","error","_error$response","_error$response$data","response","updateMutation","id","update","_error$response2","_error$response2$data","deleteMutation","delete","_error$response3","_error$response3$data","handleLogTicket","undefined","lockForThisPortfolio","_lockForThisPortfolio","_user$email","isLockedByMe","_lockForThisPortfolio2","trim","issueData","site_name","severity","status","missed_by","notes","Object","keys","forEach","key","console","log","mutate","handleClearFilters","range","yesterday","setDate","getDate","weekStart","getDay","monthStart","getFullYear","getMonth","handleExport","type","export","_error$response4","_error$response4$data","formatDateTime","dateString","date","month","String","padStart","day","year","hours","minutes","getMinutes","formatDate","getCurrentDateTime","now","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","onClick","map","p","name","Array","from","_","i","colSpan","_issue$portfolio","_issue$portfolio2","portfolio","isArray","setIssueToDelete","setDeleteConfirmOpen","_c","$RefreshReg$"],"sources":["C:/Users/LibsysAdmin/OneDrive - Libsys IT Services Private Limited/Desktop/ALLLL HLSC/client/src/components/dashboard/IssueDetailsTable.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useSearchParams } from 'react-router-dom'\nimport { issueService, IssueFilters } from '../../services/issueService'\nimport { portfolioService } from '../../services/portfolioService'\nimport { adminService, PortfolioLock } from '../../services/adminService'\nimport { Issue, CreateIssueData } from '../../types/issue.types'\nimport { Portfolio } from '../../types/portfolio.types'\nimport { User } from '../../types/user.types'\nimport { useAuth } from '../../context/AuthContext'\nimport toast from 'react-hot-toast'\nimport Button from '../common/Button'\nimport IssueExportButtons from '../common/IssueExportButtons'\nimport { useDebounce } from '../../hooks/useDebounce'\n\nconst IssueDetailsTable: React.FC = () => {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const [searchParams] = useSearchParams()\n  \n  // Get portfolio and hour from URL query parameters\n  const portfolioParam = searchParams.get('portfolio')\n  const hourParam = searchParams.get('hour')\n  const currentHour = new Date().getHours().toString()\n  \n  // Search and filter states\n  const [searchQuery, setSearchQuery] = useState('')\n  const debouncedSearchQuery = useDebounce(searchQuery, 300) // Debounce search by 300ms\n  const [dateFilter, setDateFilter] = useState('')\n  // If portfolio param exists, use hour param or current hour; otherwise 'all'\n  const [hourFilter, setHourFilter] = useState<string>(\n    portfolioParam ? (hourParam || currentHour) : 'all'\n  )\n  const [issueFilter, setIssueFilter] = useState<string>('active')\n  // If portfolio param exists, default to that portfolio; otherwise 'all'\n  const [selectedPortfolio, setSelectedPortfolio] = useState<string>(\n    portfolioParam || 'all'\n  )\n  const todayStr = new Date().toISOString().split('T')[0]\n  const [startDate, setStartDate] = useState(todayStr)\n  const [endDate, setEndDate] = useState(todayStr)\n  const [quickRange, setQuickRange] = useState<string>('today')\n  \n  // Initialize dates on mount\n  useEffect(() => {\n    const today = new Date().toISOString().split('T')[0]\n    setStartDate(today)\n    setEndDate(today)\n    handleQuickRange('today')\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  \n  // Export states\n  const [fromDate, setFromDate] = useState('')\n  const [toDate, setToDate] = useState('')\n  \n  // New issue form states\n  const [newIssue, setNewIssue] = useState<Partial<CreateIssueData>>({\n    portfolio_id: '',\n    issue_hour: new Date().getHours(),\n    description: '',\n    monitored_by: user?.email ? [user.email] : [],\n  })\n  const [issuePresent, setIssuePresent] = useState<string>('')\n  const [caseNumber, setCaseNumber] = useState('')\n  const [missedAlertsBy, setMissedAlertsBy] = useState<string>('')\n  const [selectedMonitoredBy, setSelectedMonitoredBy] = useState<string>(user?.email || '')\n  const [activeLock, setActiveLock] = useState<PortfolioLock | null>(null)\n\n  // Fetch portfolios\n  const { data: portfolios = [] } = useQuery<Portfolio[]>({\n    queryKey: ['portfolios'],\n    queryFn: portfolioService.getAll,\n  })\n\n  // Fetch users for dropdowns\n  const { data: users = [] } = useQuery<User[]>({\n    queryKey: ['admin-users'],\n    queryFn: adminService.getUsers,\n  })\n\n  // Fetch locks to detect the current user's active lock\n  const { data: locks = [] } = useQuery<PortfolioLock[]>({\n    queryKey: ['portfolio-locks'],\n    queryFn: adminService.getLocks,\n    refetchInterval: 30000,\n  })\n\n  // Derive active lock for the logged-in user (current hour)\n  useEffect(() => {\n    if (!user?.email || locks.length === 0) {\n      setActiveLock(null)\n      return\n    }\n    const currentHour = new Date().getHours()\n    const lock = locks.find(\n      (l) =>\n        l.monitored_by?.toLowerCase() === user.email.toLowerCase() &&\n        l.issue_hour === currentHour\n    )\n    setActiveLock(lock || null)\n  }, [locks, user?.email])\n\n  // Set default monitored by to current user's email\n  useEffect(() => {\n    if (user?.email) {\n      setSelectedMonitoredBy(user.email)\n      setNewIssue(prev => ({\n        ...prev,\n        monitored_by: [user.email],\n      }))\n    }\n  }, [user])\n\n  // When there is an active lock, prefill and lock portfolio/hour/monitored_by\n  useEffect(() => {\n    if (activeLock) {\n      setNewIssue((prev) => ({\n        ...prev,\n        portfolio_id: activeLock.portfolio_id,\n        issue_hour: activeLock.issue_hour,\n        monitored_by: user?.email ? [user.email] : prev.monitored_by,\n      }))\n      setSelectedMonitoredBy(user?.email || '')\n    }\n  }, [activeLock, user?.email])\n\n  // Initialize dates on mount\n  useEffect(() => {\n    const today = new Date().toISOString().split('T')[0]\n    setStartDate(today)\n    setEndDate(today)\n    handleQuickRange('today')\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // Build filters for API\n  const buildFilters = (): IssueFilters => {\n    const filters: IssueFilters = {}\n    if (searchQuery) filters.search = searchQuery\n    if (selectedPortfolio && selectedPortfolio !== 'all') {\n      filters.portfolio_id = selectedPortfolio\n    }\n    if (hourFilter && hourFilter !== 'all') {\n      filters.issue_hour = parseInt(hourFilter)\n    }\n    // \"Active issues\" = issues where Issue Present = Yes (description !== 'No issue')\n    // \"All issues\" = all issues (both Yes and No)\n    if (issueFilter === 'active') {\n      filters.description = '!No issue' // Filter out \"No issue\" entries\n    }\n    // Note: Date filtering will be handled client-side or added to backend later\n    return filters\n  }\n\n  // Fetch issues\n  const { data: allIssues = [], isLoading } = useQuery<Issue[]>({\n    queryKey: ['issues', buildFilters(), selectedPortfolio, hourFilter, issueFilter, searchQuery],\n    queryFn: () => issueService.getAll(buildFilters()),\n  })\n\n  // Filter issues by date range on client-side\n  const issues = allIssues.filter((issue) => {\n    if (!startDate || !endDate) return true\n    const issueDate = new Date(issue.created_at).toISOString().split('T')[0]\n    return issueDate >= startDate && issueDate <= endDate\n  }).sort((a, b) => {\n    // Sort by newest first\n    return new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\n  })\n\n  // Create issue mutation\n  const createMutation = useMutation({\n    mutationFn: issueService.create,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['issues'] })\n      queryClient.invalidateQueries({ queryKey: ['portfolio-activity'] })\n      toast.success('Issue logged successfully')\n      // Reset form\n      setNewIssue({\n        portfolio_id: '',\n        issue_hour: new Date().getHours(),\n        description: '',\n        monitored_by: user?.email ? [user.email] : [],\n      })\n      setIssuePresent('')\n      setCaseNumber('')\n      setMissedAlertsBy('')\n      setSelectedMonitoredBy(user?.email || '')\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.error || 'Failed to log issue')\n    },\n  })\n\n  // Update issue mutation\n  const updateMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: any }) => issueService.update(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['issues'] })\n      queryClient.invalidateQueries({ queryKey: ['portfolio-activity'] })\n      toast.success('Issue updated successfully')\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.error || 'Failed to update issue')\n    },\n  })\n\n  // Delete issue mutation\n  const deleteMutation = useMutation({\n    mutationFn: issueService.delete,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['issues'] })\n      queryClient.invalidateQueries({ queryKey: ['portfolio-activity'] })\n      toast.success('Issue deleted successfully')\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.error || 'Failed to delete issue')\n    },\n  })\n\n  const handleLogTicket = () => {\n    // Validation\n    if (!newIssue.portfolio_id) {\n      toast.error('Please select a Portfolio')\n      return\n    }\n\n    // Check if portfolio is locked by another user\n    if (newIssue.portfolio_id && newIssue.issue_hour !== undefined) {\n      const currentHour = newIssue.issue_hour\n      const lockForThisPortfolio = locks.find(\n        (l) =>\n          l.portfolio_id === newIssue.portfolio_id &&\n          l.issue_hour === currentHour\n      )\n      \n      if (lockForThisPortfolio) {\n        const isLockedByMe = lockForThisPortfolio.monitored_by?.toLowerCase() === user?.email?.toLowerCase()\n        if (!isLockedByMe) {\n          toast.error(`This portfolio is locked by ${lockForThisPortfolio.monitored_by?.split('@')[0] || 'another user'}. Only they can log issues.`)\n          return\n        }\n      }\n    }\n\n    if (!issuePresent || (issuePresent !== 'yes' && issuePresent !== 'no')) {\n      toast.error('Please select \"Yes\" or \"No\" for Issue Present')\n      return\n    }\n\n    if (!selectedMonitoredBy) {\n      toast.error('Monitored By is REQUIRED. Please select who monitored this hour.')\n      return\n    }\n\n    if (issuePresent === 'yes' && (!newIssue.description || newIssue.description.trim() === '')) {\n      toast.error('Please provide issue details when issue is present')\n      return\n    }\n\n    // Build issue data - map to database schema\n    // monitored_by is VARCHAR(255) (string), missed_by is TEXT[] (array)\n    const issueData: any = {\n      portfolio_id: newIssue.portfolio_id!,\n      site_name: '',\n      issue_hour: newIssue.issue_hour || new Date().getHours(),\n      description: issuePresent === 'no' ? 'No issue' : (newIssue.description || '').trim(),\n      severity: (issuePresent === 'yes' ? 'high' : 'low').toLowerCase(), // Database uses lowercase\n      status: 'open',\n      monitored_by: selectedMonitoredBy || '', // Database expects single string, not array\n      missed_by: (issuePresent === 'yes' && missedAlertsBy) ? [missedAlertsBy] : null, // Array for missed_by, null if empty\n      notes: caseNumber ? `Case #: ${caseNumber}` : null,\n    }\n\n    // Remove null/undefined fields\n    Object.keys(issueData).forEach(key => {\n      if (issueData[key] === null || issueData[key] === undefined) {\n        delete issueData[key]\n      }\n    })\n\n    console.log('Creating issue with data:', issueData)\n    createMutation.mutate(issueData)\n  }\n\n  const handleClearFilters = () => {\n    setSearchQuery('')\n    setDateFilter('')\n    setHourFilter('all')\n    setIssueFilter('active')\n    setSelectedPortfolio('all')\n    const today = new Date().toISOString().split('T')[0]\n    setStartDate(today)\n    setEndDate(today)\n    setQuickRange('today')\n  }\n\n  const handleQuickRange = (range: 'today' | 'yesterday' | 'week' | 'month' | 'all') => {\n    const today = new Date()\n    const yesterday = new Date(today)\n    yesterday.setDate(yesterday.getDate() - 1)\n    const weekStart = new Date(today)\n    weekStart.setDate(today.getDate() - today.getDay()) // Start of week (Sunday)\n    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1)\n\n    switch (range) {\n      case 'today':\n        setStartDate(today.toISOString().split('T')[0])\n        setEndDate(today.toISOString().split('T')[0])\n        setQuickRange('today')\n        break\n      case 'yesterday':\n        setStartDate(yesterday.toISOString().split('T')[0])\n        setEndDate(yesterday.toISOString().split('T')[0])\n        setQuickRange('yesterday')\n        break\n      case 'week':\n        setStartDate(weekStart.toISOString().split('T')[0])\n        setEndDate(today.toISOString().split('T')[0])\n        setQuickRange('week')\n        break\n      case 'month':\n        setStartDate(monthStart.toISOString().split('T')[0])\n        setEndDate(today.toISOString().split('T')[0])\n        setQuickRange('month')\n        break\n      case 'all':\n        // Set to a very early date (e.g., 2020-01-01) to show all issues till today\n        setStartDate('2020-01-01')\n        setEndDate(today.toISOString().split('T')[0])\n        setQuickRange('all')\n        break\n    }\n  }\n\n  const handleExport = async (type: 'all' | 'active') => {\n    try {\n      const filters: IssueFilters = {}\n      if (fromDate) {\n        // Add date filtering when backend supports it\n      }\n      if (toDate) {\n        // Add date filtering when backend supports it\n      }\n      if (type === 'active') {\n        filters.status = 'open'\n      }\n      \n      const data = await issueService.export(filters)\n      // Handle export download\n      toast.success('Export initiated')\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Failed to export issues')\n    }\n  }\n\n  const formatDateTime = (dateString: string) => {\n    const date = new Date(dateString)\n    const month = String(date.getMonth() + 1).padStart(2, '0')\n    const day = String(date.getDate()).padStart(2, '0')\n    const year = date.getFullYear()\n    const hours = String(date.getHours()).padStart(2, '0')\n    const minutes = String(date.getMinutes()).padStart(2, '0')\n    return `${month}/${day}/${year}, ${hours}:${minutes}`\n  }\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    const month = String(date.getMonth() + 1).padStart(2, '0')\n    const day = String(date.getDate()).padStart(2, '0')\n    const year = date.getFullYear()\n    return `${month}/${day}/${year}`\n  }\n\n  const getCurrentDateTime = () => {\n    const now = new Date()\n    return formatDateTime(now.toISOString())\n  }\n\n  return (\n    <div className=\"space-y-6 w-full\">\n      {/* Search and Filters Section */}\n      <div className=\"bg-white rounded-lg shadow-md p-4\">\n        <div className=\"space-y-3\">\n          {/* Search Bar and Quick Range in Single Line */}\n          <div className=\"flex items-center gap-3 flex-wrap\">\n            {/* Search Bar - Smaller */}\n            <div className=\"relative flex-1 min-w-[200px]\">\n              <svg className=\"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search issues...\"\n                className=\"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            {/* Quick Range Buttons - Inline */}\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"text-xs font-medium text-gray-700 whitespace-nowrap hidden sm:inline\">Quick Range:</span>\n              <button\n                onClick={() => {\n                  setQuickRange('today')\n                  handleQuickRange('today')\n                }}\n                className={`px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${\n                  quickRange === 'today'\n                    ? 'bg-green-500 text-white shadow-md'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'\n                }`}\n              >\n                Today\n              </button>\n              <button\n                onClick={() => {\n                  setQuickRange('yesterday')\n                  handleQuickRange('yesterday')\n                }}\n                className={`px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${\n                  quickRange === 'yesterday'\n                    ? 'bg-green-500 text-white shadow-md'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'\n                }`}\n              >\n                Yesterday\n              </button>\n              <button\n                onClick={() => {\n                  setQuickRange('week')\n                  handleQuickRange('week')\n                }}\n                className={`px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${\n                  quickRange === 'week'\n                    ? 'bg-green-500 text-white shadow-md'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'\n                }`}\n              >\n                This Week\n              </button>\n              <button\n                onClick={() => {\n                  setQuickRange('month')\n                  handleQuickRange('month')\n                }}\n                className={`px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${\n                  quickRange === 'month'\n                    ? 'bg-green-500 text-white shadow-md'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'\n                }`}\n              >\n                This Month\n              </button>\n              <button\n                onClick={() => {\n                  setQuickRange('all')\n                  handleQuickRange('all')\n                }}\n                className={`px-2.5 py-1.5 rounded text-xs font-medium transition-all duration-200 whitespace-nowrap ${\n                  quickRange === 'all'\n                    ? 'bg-green-500 text-white shadow-md'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-md'\n                }`}\n              >\n                All\n              </button>\n            </div>\n          </div>\n          {/* Filters Row - Compact */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n            <div>\n              <label className=\"block text-xs font-medium text-gray-700 mb-1\">Select Portfolio</label>\n              <select\n                value={selectedPortfolio}\n                onChange={(e) => setSelectedPortfolio(e.target.value)}\n                className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"all\">All Portfolios</option>\n                {portfolios.map((p) => (\n                  <option key={p.id} value={p.id}>\n                    {p.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-xs font-medium text-gray-700 mb-1\">Issue Filter</label>\n              <select\n                value={issueFilter}\n                onChange={(e) => setIssueFilter(e.target.value)}\n                className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"active\">Active Issues (Default)</option>\n                <option value=\"all\">All Issues</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-xs font-medium text-gray-700 mb-1\">Hour Filter</label>\n              <select\n                value={hourFilter}\n                onChange={(e) => setHourFilter(e.target.value)}\n                className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"all\">All Hours</option>\n                {Array.from({ length: 24 }, (_, i) => (\n                  <option key={i} value={i.toString()}>\n                    {i}:00\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n          {/* Date Range - Compact */}\n          <div className=\"flex items-center gap-3 flex-wrap\">\n            <div className=\"flex items-center gap-2\">\n              <label className=\"text-xs font-medium text-gray-700 whitespace-nowrap\">Start Date:</label>\n              <input\n                type=\"date\"\n                value={startDate}\n                onChange={(e) => setStartDate(e.target.value)}\n                className=\"px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <label className=\"text-xs font-medium text-gray-700 whitespace-nowrap\">End Date:</label>\n              <input\n                type=\"date\"\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n                className=\"px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Export Section - Same Frame */}\n        <div className=\"pt-3 border-t border-gray-200\">\n          <IssueExportButtons filters={buildFilters()} startDate={startDate} endDate={endDate} />\n        </div>\n      </div>\n\n      {/* Issues Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">\n            Issue Results ({issues.length})\n          </h3>\n          <p className=\"text-sm text-gray-600\">Showing newest first</p>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">DATE</th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">PORTFOLIO</th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">HOUR</th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">ISSUE</th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">DETAILS</th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">MONITORED BY</th>\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase\">ACTIONS</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {isLoading ? (\n                <tr>\n                  <td colSpan={7} className=\"px-4 py-8 text-center text-gray-500\">\n                    Loading issues...\n                  </td>\n                </tr>\n              ) : issues.length === 0 ? (\n                <tr>\n                  <td colSpan={7} className=\"px-4 py-8 text-center text-gray-500\">\n                    <div className=\"space-y-2\">\n                      <p className=\"font-medium\">No issues found</p>\n                      <p className=\"text-sm text-gray-400\">\n                        {issueFilter === 'active' \n                          ? \"No issues with 'Issue Present = Yes' found. Select 'All Issues' to see all issues, or try selecting a different portfolio or adjusting the date range.\"\n                          : \"No issues found. Try selecting a different portfolio or adjusting the date range.\"}\n                      </p>\n                    </div>\n                  </td>\n                </tr>\n              ) : (\n                issues.map((issue) => (\n                  <tr \n                    key={issue.id} \n                    className=\"hover:bg-blue-50 hover:shadow-sm transition-all duration-200 cursor-pointer border-l-4 border-l-transparent hover:border-l-blue-500\"\n                  >\n                    <td className=\"px-4 py-3 text-sm text-gray-900\">\n                      {formatDate(issue.created_at)}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900\">\n                      {issue.portfolio?.name || 'N/A'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900\">{issue.issue_hour}:00</td>\n                    <td className=\"px-4 py-3\">\n                      {/* Show badge based on issue description or status */}\n                      {issue.description && issue.description.toLowerCase() === 'no issue' ? (\n                        <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                          No\n                        </span>\n                      ) : issue.description && issue.description.trim() !== '' ? (\n                        <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\">\n                          Yes\n                        </span>\n                      ) : (\n                        <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                          -\n                        </span>\n                      )}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900\">\n                      {issue.description || 'N/A'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900\">\n                      {Array.isArray(issue.monitored_by) && issue.monitored_by.length > 0\n                        ? issue.monitored_by[0].split('@')[0]\n                        : (issue.monitored_by || 'N/A')}\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <button\n                        onClick={() => {\n                          setIssueToDelete(issue.id)\n                          setDeleteConfirmOpen(true)\n                        }}\n                        className=\"text-red-600 hover:text-red-800 hover:underline hover:font-semibold text-sm transition-all duration-200\"\n                        aria-label={`Delete issue from ${issue.portfolio?.name || 'portfolio'}`}\n                      >\n                        Delete\n                      </button>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default IssueDetailsTable\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}