{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LibsysAdmin\\\\OneDrive - Libsys IT Services Private Limited\\\\Desktop\\\\ALLLL HLSC\\\\client\\\\src\\\\components\\\\analytics\\\\CoverageMatrix.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { issueService } from '../../services/issueService';\nimport { portfolioService } from '../../services/portfolioService';\nimport { adminService } from '../../services/adminService';\nimport { useAuth } from '../../context/AuthContext';\nimport Card from '../common/Card';\nimport Button from '../common/Button';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst CoverageMatrix = () => {\n  _s();\n  const {\n    user: currentUser\n  } = useAuth();\n  const [userSearch, setUserSearch] = useState('');\n  const [hourFilter, setHourFilter] = useState('all');\n  const [issueFilter, setIssueFilter] = useState('all');\n  const [fromDate, setFromDate] = useState(() => {\n    // Default to today\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  });\n  const [toDate, setToDate] = useState(() => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  });\n  const [showCharts, setShowCharts] = useState(true);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [hoveredCell, setHoveredCell] = useState(null);\n\n  // Fetch portfolios\n  const {\n    data: portfolios = []\n  } = useQuery({\n    queryKey: ['portfolios'],\n    queryFn: portfolioService.getAll\n  });\n\n  // Fetch users to map user IDs to emails\n  const {\n    data: users = [],\n    isLoading: usersLoading\n  } = useQuery({\n    queryKey: ['admin-users'],\n    queryFn: adminService.getUsers,\n    staleTime: 0,\n    // Always fetch fresh data\n    refetchInterval: 1000 // Refresh every 1 second\n  });\n\n  // Log users when they load\n  useEffect(() => {\n    if (users.length > 0) {\n      console.log('ðŸ‘¥ Coverage Matrix - Users loaded:', users.map(u => {\n        var _u$email;\n        return {\n          id: u.id,\n          email: u.email,\n          full_name: u.full_name,\n          emailLower: (_u$email = u.email) === null || _u$email === void 0 ? void 0 : _u$email.toLowerCase()\n        };\n      }));\n    } else {\n      console.warn('âš ï¸ Coverage Matrix - Users array is empty!', {\n        usersLoading,\n        usersCount: users.length\n      });\n    }\n  }, [users, usersLoading]);\n\n  // Create mapping from user ID to user info (email, full_name)\n  const userIdToUser = useMemo(() => {\n    const map = {};\n    users.forEach(user => {\n      map[user.id] = {\n        email: user.email,\n        full_name: user.full_name || user.email.split('@')[0]\n      };\n    });\n    return map;\n  }, [users]);\n\n  // Fetch issues\n  const {\n    data: allIssues = []\n  } = useQuery({\n    queryKey: ['issues'],\n    queryFn: () => issueService.getAll({})\n  });\n\n  // Filter issues by date range\n  const filteredIssues = useMemo(() => {\n    let filtered = allIssues;\n    if (fromDate && toDate) {\n      // Use date string comparison to avoid timezone issues\n      filtered = filtered.filter(issue => {\n        if (!issue.created_at) return false;\n        const issueDateStr = new Date(issue.created_at).toISOString().split('T')[0];\n        return issueDateStr >= fromDate && issueDateStr <= toDate;\n      });\n    }\n\n    // Issue filter\n    if (issueFilter === 'active') {\n      filtered = filtered.filter(issue => issue.description && issue.description.toLowerCase() !== 'no issue');\n    }\n\n    // Hour filter\n    if (hourFilter !== 'all') {\n      const hour = parseInt(hourFilter);\n      filtered = filtered.filter(issue => issue.issue_hour === hour);\n    }\n    return filtered;\n  }, [allIssues, fromDate, toDate, issueFilter, hourFilter]);\n\n  // Build matrix data - based on \"All Sites Checked = Yes\" completions\n  // Count portfolios based on each time a portfolio is completed (not just issues entered)\n  const matrixData = useMemo(() => {\n    // Don't process if users haven't loaded yet\n    if (usersLoading || users.length === 0) {\n      console.log('â³ Coverage Matrix - Waiting for users to load...', {\n        usersLoading,\n        usersCount: users.length\n      });\n      return [];\n    }\n    const userMap = {};\n\n    // Normalize date range for comparison\n    const normalizedFromDate = fromDate ? fromDate.split('T')[0] : null;\n    const normalizedToDate = toDate ? toDate.split('T')[0] : null;\n\n    // Debug: Log all completed portfolios first\n    const completedPortfolios = portfolios.filter(p => p.all_sites_checked === 'Yes' && p.all_sites_checked_date && p.all_sites_checked_by);\n\n    // First, process portfolios with \"All Sites Checked = Yes\" to count completions\n    // Count each distinct issue entry session (by hour) as a separate completion\n    // This allows the same portfolio to be counted multiple times if completed multiple times\n    console.log('Coverage Matrix Debug - Processing portfolios:', {\n      totalPortfolios: portfolios.length,\n      completedPortfolios: completedPortfolios.length,\n      dateRange: {\n        fromDate: normalizedFromDate,\n        toDate: normalizedToDate\n      },\n      totalIssues: filteredIssues.length,\n      completedPortfolioDetails: completedPortfolios.map(p => ({\n        id: p.id,\n        name: p.name,\n        checkedBy: p.all_sites_checked_by,\n        checkedDate: p.all_sites_checked_date,\n        checkedHour: p.all_sites_checked_hour\n      }))\n    });\n    console.log('ðŸ” Coverage Matrix - All completed portfolios:', completedPortfolios.map(p => ({\n      id: p.id,\n      name: p.name,\n      checkedBy: p.all_sites_checked_by,\n      checkedDate: p.all_sites_checked_date,\n      checkedHour: p.all_sites_checked_hour\n    })));\n    console.log('ðŸ” Coverage Matrix - Available users:', users.map(u => ({\n      id: u.id,\n      email: u.email,\n      full_name: u.full_name\n    })));\n    console.log('ðŸ” Coverage Matrix - Date range:', {\n      fromDate,\n      toDate,\n      normalizedFromDate,\n      normalizedToDate\n    });\n    portfolios.forEach(portfolio => {\n      var _portfolio$all_sites_2;\n      // Only count portfolios that have been completed (all_sites_checked = 'Yes')\n      if (portfolio.all_sites_checked !== 'Yes' || !portfolio.all_sites_checked_date || !portfolio.all_sites_checked_by) {\n        return;\n      }\n\n      // Check if completion date is within the selected date range\n      const checkedDateStr = portfolio.all_sites_checked_date;\n      const normalizedCheckedDate = checkedDateStr.split('T')[0]; // Remove time if present\n\n      // Strict date filtering - portfolio completion must be within the selected date range\n      if (normalizedFromDate && normalizedCheckedDate < normalizedFromDate) {\n        console.log('â­ï¸ Coverage Matrix - Skipping portfolio (before date range):', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedDate: normalizedCheckedDate,\n          fromDate: normalizedFromDate\n        });\n        return; // Skip - before date range\n      }\n      if (normalizedToDate && normalizedCheckedDate > normalizedToDate) {\n        console.log('â­ï¸ Coverage Matrix - Skipping portfolio (after date range):', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedDate: normalizedCheckedDate,\n          toDate: normalizedToDate\n        });\n        return; // Skip - after date range\n      }\n\n      // Get the user who completed it (all_sites_checked_by is a user ID/UUID from JWT token)\n      // Try ID match first - this should work if the user exists\n      let checkedByUser = users.find(u => {\n        const matches = u.id === portfolio.all_sites_checked_by;\n        if (matches) {\n          console.log('âœ… Coverage Matrix - Found user by ID match:', {\n            portfolioId: portfolio.id,\n            portfolioName: portfolio.name,\n            checkedByValue: portfolio.all_sites_checked_by,\n            matchedUserId: u.id,\n            matchedUserEmail: u.email,\n            matchedUserName: u.full_name\n          });\n        }\n        return matches;\n      });\n\n      // If ID match fails, try email match (fallback for data inconsistencies)\n      if (!checkedByUser) {\n        console.warn('âš ï¸ Coverage Matrix - User ID not found, trying email match:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedByValue: portfolio.all_sites_checked_by,\n          checkedByType: typeof portfolio.all_sites_checked_by,\n          availableUserIds: users.map(u => ({\n            id: u.id,\n            email: u.email,\n            full_name: u.full_name\n          }))\n        });\n        checkedByUser = users.find(u => u.email.toLowerCase() === String(portfolio.all_sites_checked_by).toLowerCase());\n        if (checkedByUser) {\n          console.log('âœ… Coverage Matrix - Found user by email match:', {\n            portfolioId: portfolio.id,\n            portfolioName: portfolio.name,\n            checkedByValue: portfolio.all_sites_checked_by,\n            matchedUserEmail: checkedByUser.email,\n            matchedUserName: checkedByUser.full_name\n          });\n        }\n      }\n      if (!checkedByUser) {\n        var _portfolio$all_sites_;\n        // User not found - this could be a deleted user or data inconsistency\n        // Use the stored value as a fallback identifier\n        const fallbackIdentifier = portfolio.all_sites_checked_by;\n\n        // Try to extract email from the identifier if it looks like an email\n        const looksLikeEmail = String(fallbackIdentifier).includes('@');\n        const fallbackEmail = looksLikeEmail ? String(fallbackIdentifier) : `unknown-${fallbackIdentifier.substring(0, 8)}@deleted.user`;\n        const fallbackDisplayName = looksLikeEmail ? String(fallbackIdentifier).split('@')[0] : `Deleted User (${fallbackIdentifier.substring(0, 8)})`;\n        console.warn('âš ï¸ Coverage Matrix - User not found, using fallback identifier:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedByValue: portfolio.all_sites_checked_by,\n          fallbackEmail,\n          fallbackDisplayName\n        });\n\n        // Use fallback values\n        const userEmail = fallbackEmail;\n        const displayName = fallbackDisplayName;\n\n        // Initialize user in map if not exists (using fallback email as key)\n        if (!userMap[userEmail]) {\n          userMap[userEmail] = {\n            userName: userEmail,\n            displayName,\n            email: userEmail,\n            totalPortfolios: 0,\n            hours: {}\n          };\n        }\n\n        // Get completion hour from portfolio record\n        const completionHour = (_portfolio$all_sites_ = portfolio.all_sites_checked_hour) !== null && _portfolio$all_sites_ !== void 0 ? _portfolio$all_sites_ : 0;\n\n        // Get all issues for this portfolio (by any user, since we don't know the exact user)\n        const portfolioIssues = filteredIssues.filter(issue => {\n          if (issue.portfolio_id !== portfolio.id) return false;\n\n          // Check if issue date is within range\n          if (issue.created_at) {\n            const issueDateStr = new Date(issue.created_at).toISOString().split('T')[0];\n            if (normalizedFromDate && issueDateStr < normalizedFromDate) return false;\n            if (normalizedToDate && issueDateStr > normalizedToDate) return false;\n          }\n          return true;\n        });\n\n        // If there are issues, group by hour and count each hour separately\n        if (portfolioIssues.length > 0) {\n          const issuesByHour = {};\n          portfolioIssues.forEach(issue => {\n            var _issue$issue_hour;\n            const hour = (_issue$issue_hour = issue.issue_hour) !== null && _issue$issue_hour !== void 0 ? _issue$issue_hour : 0;\n            if (!issuesByHour[hour]) {\n              issuesByHour[hour] = [];\n            }\n            issuesByHour[hour].push(issue);\n          });\n          Object.keys(issuesByHour).forEach(hourStr => {\n            const hour = parseInt(hourStr);\n            if (hourFilter !== 'all' && hour !== parseInt(hourFilter)) {\n              return;\n            }\n            if (!userMap[userEmail].hours[hour]) {\n              userMap[userEmail].hours[hour] = {\n                portfolios: new Set(),\n                issues: [],\n                activeIssues: []\n              };\n            }\n            const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${hour}`;\n            userMap[userEmail].hours[hour].portfolios.add(portfolioKey);\n          });\n        } else {\n          // No issues found, use completion hour\n          if (hourFilter !== 'all' && completionHour !== parseInt(hourFilter)) {\n            return;\n          }\n          if (!userMap[userEmail].hours[completionHour]) {\n            userMap[userEmail].hours[completionHour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: []\n            };\n          }\n          const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${completionHour}`;\n          userMap[userEmail].hours[completionHour].portfolios.add(portfolioKey);\n        }\n\n        // Continue to next portfolio (skip the rest of the processing for this portfolio)\n        return;\n      }\n      const userEmail = checkedByUser.email;\n      const displayName = checkedByUser.full_name || userEmail.split('@')[0] || 'Unknown';\n      console.log('Coverage Matrix Debug - Processing completed portfolio:', {\n        portfolioId: portfolio.id,\n        portfolioName: portfolio.name,\n        checkedBy: userEmail,\n        checkedDate: normalizedCheckedDate,\n        completionHour: portfolio.all_sites_checked_hour\n      });\n\n      // Get all issues for this portfolio by this user within the date range\n      const portfolioIssues = filteredIssues.filter(issue => {\n        if (issue.portfolio_id !== portfolio.id) return false;\n\n        // Check if issue is by this user\n        const issueMonitoredBy = Array.isArray(issue.monitored_by) ? issue.monitored_by[0] : issue.monitored_by;\n        if (!issueMonitoredBy || issueMonitoredBy.toLowerCase() !== userEmail.toLowerCase()) {\n          return false;\n        }\n\n        // Check if issue date is within range\n        if (issue.created_at) {\n          const issueDateStr = new Date(issue.created_at).toISOString().split('T')[0];\n          if (normalizedFromDate && issueDateStr < normalizedFromDate) return false;\n          if (normalizedToDate && issueDateStr > normalizedToDate) return false;\n        }\n        return true;\n      });\n\n      // Get completion hour from portfolio record\n      const completionHour = (_portfolio$all_sites_2 = portfolio.all_sites_checked_hour) !== null && _portfolio$all_sites_2 !== void 0 ? _portfolio$all_sites_2 : 0;\n      console.log('Coverage Matrix Debug - Portfolio issues found:', {\n        portfolioId: portfolio.id,\n        portfolioName: portfolio.name,\n        userEmail,\n        issuesFound: portfolioIssues.length,\n        completionHour,\n        issueHours: portfolioIssues.map(i => i.issue_hour),\n        allIssuesForPortfolio: portfolioIssues.map(i => ({\n          id: i.id,\n          hour: i.issue_hour,\n          monitoredBy: i.monitored_by,\n          created_at: i.created_at\n        }))\n      });\n\n      // Initialize user in map if not exists\n      if (!userMap[userEmail]) {\n        userMap[userEmail] = {\n          userName: userEmail,\n          displayName,\n          email: userEmail,\n          totalPortfolios: 0,\n          hours: {}\n        };\n      }\n\n      // If there are issues, group by hour and count each hour separately\n      // ALWAYS use issue hour when issues exist, not completion hour\n      if (portfolioIssues.length > 0) {\n        // Group issues by hour - each hour represents a distinct work session/completion\n        const issuesByHour = {};\n        portfolioIssues.forEach(issue => {\n          var _issue$issue_hour2;\n          const hour = (_issue$issue_hour2 = issue.issue_hour) !== null && _issue$issue_hour2 !== void 0 ? _issue$issue_hour2 : 0;\n          if (!issuesByHour[hour]) {\n            issuesByHour[hour] = [];\n          }\n          issuesByHour[hour].push(issue);\n        });\n        console.log('âœ… Coverage Matrix - Counting portfolio by issue hours:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          userEmail,\n          displayName,\n          issuesByHourKeys: Object.keys(issuesByHour),\n          completionHour,\n          // This might be different from issue hours\n          totalIssues: portfolioIssues.length\n        });\n\n        // Count each hour with issues as a separate portfolio completion\n        Object.keys(issuesByHour).forEach(hourStr => {\n          const hour = parseInt(hourStr);\n\n          // Check hour filter\n          if (hourFilter !== 'all' && hour !== parseInt(hourFilter)) {\n            console.log('â­ï¸ Coverage Matrix - Skipping hour (filtered out):', {\n              hour,\n              hourFilter\n            });\n            return;\n          }\n\n          // Initialize hour if not exists\n          if (!userMap[userEmail].hours[hour]) {\n            userMap[userEmail].hours[hour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: []\n            };\n          }\n\n          // Add portfolio completion - use unique key: portfolioId_date_hour\n          // This allows the same portfolio to be counted multiple times if completed at different hours\n          // IMPORTANT: Use issue hour, not completion hour, because that's when the work was actually done\n          const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${hour}`;\n          const wasAdded = userMap[userEmail].hours[hour].portfolios.has(portfolioKey);\n          userMap[userEmail].hours[hour].portfolios.add(portfolioKey);\n          console.log('âœ… Coverage Matrix - Added portfolio to hour:', {\n            portfolioId: portfolio.id,\n            portfolioName: portfolio.name,\n            userEmail,\n            displayName,\n            hour,\n            portfolioKey,\n            wasAlreadyAdded: wasAdded,\n            totalPortfoliosInThisHour: userMap[userEmail].hours[hour].portfolios.size\n          });\n        });\n      } else {\n        // No issues found, but portfolio is completed - count using completion hour\n        // This is a fallback for portfolios completed without issues logged\n        console.log('âš ï¸ Coverage Matrix - No issues found, using completion hour:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          userEmail,\n          displayName,\n          completionHour,\n          checkedDate: normalizedCheckedDate\n        });\n\n        // Check hour filter\n        if (hourFilter !== 'all' && completionHour !== parseInt(hourFilter)) {\n          console.log('â­ï¸ Coverage Matrix - Skipping completion hour (filtered out):', {\n            completionHour,\n            hourFilter\n          });\n          return;\n        }\n\n        // Initialize hour if not exists\n        if (!userMap[userEmail].hours[completionHour]) {\n          userMap[userEmail].hours[completionHour] = {\n            portfolios: new Set(),\n            issues: [],\n            activeIssues: []\n          };\n        }\n\n        // Add portfolio completion - use unique key: portfolioId_date_hour\n        const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${completionHour}`;\n        const wasAdded = userMap[userEmail].hours[completionHour].portfolios.has(portfolioKey);\n        userMap[userEmail].hours[completionHour].portfolios.add(portfolioKey);\n        console.log('âœ… Coverage Matrix - Added portfolio (no issues, using completion hour):', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          userEmail,\n          displayName,\n          completionHour,\n          portfolioKey,\n          wasAlreadyAdded: wasAdded,\n          totalPortfoliosInThisHour: userMap[userEmail].hours[completionHour].portfolios.size\n        });\n      }\n    });\n\n    // Now process issues to count issues (not portfolios) per user per hour\n    filteredIssues.forEach(issue => {\n      var _issue$issue_hour3;\n      // Get monitored_by field (can be string or array)\n      let monitoredByEmails = [];\n      if (issue.monitored_by) {\n        if (Array.isArray(issue.monitored_by)) {\n          monitoredByEmails = issue.monitored_by.filter(email => typeof email === 'string').filter(email => email.trim() !== '');\n        } else {\n          // Handle case where monitored_by might be a single string (though type says array)\n          const emailValue = String(issue.monitored_by).trim();\n          if (emailValue !== '') {\n            monitoredByEmails = [emailValue];\n          }\n        }\n      }\n\n      // Skip if no monitored_by field\n      if (monitoredByEmails.length === 0) {\n        return;\n      }\n\n      // Check hour filter\n      if (hourFilter !== 'all' && issue.issue_hour !== undefined) {\n        const hour = parseInt(hourFilter);\n        if (issue.issue_hour !== hour) {\n          return;\n        }\n      }\n      const hour = (_issue$issue_hour3 = issue.issue_hour) !== null && _issue$issue_hour3 !== void 0 ? _issue$issue_hour3 : 0;\n\n      // Process each user in monitored_by\n      monitoredByEmails.forEach(monitoredByEmail => {\n        // Normalize email: trim whitespace and convert to lowercase\n        const normalizedMonitoredEmail = String(monitoredByEmail).trim().toLowerCase();\n\n        // Find user by email (case-insensitive match with trimmed whitespace)\n        const user = users.find(u => {\n          if (!u.email) return false;\n          const normalizedUserEmail = String(u.email).trim().toLowerCase();\n          return normalizedUserEmail === normalizedMonitoredEmail;\n        });\n        if (!user) {\n          // User not found by email - this could be a deleted user or data inconsistency\n          // Use the email as a fallback identifier\n          const fallbackEmail = normalizedMonitoredEmail.includes('@') ? normalizedMonitoredEmail : `unknown-${normalizedMonitoredEmail}@deleted.user`;\n          const fallbackDisplayName = normalizedMonitoredEmail.includes('@') ? normalizedMonitoredEmail.split('@')[0] : `Deleted User (${normalizedMonitoredEmail.substring(0, 8)})`;\n          console.warn(`âš ï¸ Coverage Matrix - User not found for email, using fallback: \"${monitoredByEmail}\"`, {\n            searchingFor: monitoredByEmail,\n            searchingForNormalized: normalizedMonitoredEmail,\n            fallbackEmail,\n            fallbackDisplayName,\n            issueDetails: {\n              issueId: issue.id,\n              portfolioId: issue.portfolio_id,\n              monitoredBy: issue.monitored_by,\n              hour: issue.issue_hour\n            }\n          });\n\n          // Use fallback values\n          const userEmail = fallbackEmail;\n          const displayName = fallbackDisplayName;\n\n          // Initialize user in map if not exists\n          if (!userMap[userEmail]) {\n            userMap[userEmail] = {\n              userName: userEmail,\n              displayName,\n              email: userEmail,\n              totalPortfolios: 0,\n              hours: {}\n            };\n          }\n\n          // Initialize hour if not exists\n          if (!userMap[userEmail].hours[hour]) {\n            userMap[userEmail].hours[hour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: []\n            };\n          }\n\n          // Add issues to track issue count (but don't count portfolios from issues)\n          userMap[userEmail].hours[hour].issues.push(issue);\n          if (issue.description && issue.description.toLowerCase() !== 'no issue') {\n            userMap[userEmail].hours[hour].activeIssues.push(issue);\n          }\n\n          // Continue processing with fallback user (don't return)\n        } else {\n          // User found - process normally\n          const userEmail = user.email;\n          const displayName = user.full_name || userEmail.split('@')[0] || 'Unknown';\n\n          // Initialize user in map if not exists\n          if (!userMap[userEmail]) {\n            userMap[userEmail] = {\n              userName: userEmail,\n              displayName,\n              email: userEmail,\n              totalPortfolios: 0,\n              hours: {}\n            };\n          }\n\n          // Initialize hour if not exists\n          if (!userMap[userEmail].hours[hour]) {\n            userMap[userEmail].hours[hour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: []\n            };\n          }\n\n          // Add issues to track issue count (includes both Yes and No issues)\n          // DO NOT count portfolios here - portfolios are only counted from \"All Sites Checked = Yes\" completions above\n          userMap[userEmail].hours[hour].issues.push(issue);\n          if (issue.description && issue.description.toLowerCase() !== 'no issue') {\n            userMap[userEmail].hours[hour].activeIssues.push(issue);\n          }\n        }\n      });\n    });\n\n    // Calculate total portfolios per user\n\n    // Calculate total portfolios per user\n    Object.values(userMap).forEach(user => {\n      const allPortfolios = new Set();\n      Object.values(user.hours).forEach(hourData => {\n        hourData.portfolios.forEach(pid => allPortfolios.add(pid));\n      });\n      user.totalPortfolios = allPortfolios.size;\n    });\n\n    // Filter by user search\n    const filteredUsers = Object.values(userMap).filter(user => user.displayName.toLowerCase().includes(userSearch.toLowerCase()) || user.userName.toLowerCase().includes(userSearch.toLowerCase()));\n\n    // Detailed breakdown of what's in the userMap for debugging\n    const userMapDetails = Object.entries(userMap).map(([email, userData]) => {\n      const hourDetails = {};\n      Object.entries(userData.hours).forEach(([hour, hourData]) => {\n        hourDetails[hour] = {\n          portfolioKeys: Array.from(hourData.portfolios),\n          portfolioCount: hourData.portfolios.size\n        };\n      });\n      return {\n        email,\n        displayName: userData.displayName,\n        totalPortfolios: userData.totalPortfolios,\n        hours: hourDetails\n      };\n    });\n\n    // Final summary log\n    console.log('ðŸ“Š Coverage Matrix - FINAL RESULTS:', {\n      totalUsers: filteredUsers.length,\n      usersWithData: filteredUsers.map(u => ({\n        name: u.displayName,\n        portfolios: u.totalPortfolios,\n        email: u.email,\n        hoursWithData: Object.keys(u.hours).map(h => ({\n          hour: parseInt(h),\n          portfolioCount: u.hours[parseInt(h)].portfolios.size\n        }))\n      })),\n      userMapDetails,\n      // Detailed breakdown of what portfolios are counted for each user\n      allUsersInMap: Object.keys(userMap).map(email => ({\n        email,\n        displayName: userMap[email].displayName,\n        totalPortfolios: userMap[email].totalPortfolios,\n        hours: Object.keys(userMap[email].hours).map(h => ({\n          hour: h,\n          portfolioCount: userMap[email].hours[parseInt(h)].portfolios.size,\n          portfolioKeys: Array.from(userMap[email].hours[parseInt(h)].portfolios)\n        }))\n      })),\n      summary: {\n        totalCompletedPortfolios: completedPortfolios.length,\n        portfoliosInDateRange: completedPortfolios.filter(p => {\n          var _p$all_sites_checked_;\n          const checkedDate = (_p$all_sites_checked_ = p.all_sites_checked_date) === null || _p$all_sites_checked_ === void 0 ? void 0 : _p$all_sites_checked_.split('T')[0];\n          if (!checkedDate) return false;\n          if (normalizedFromDate && checkedDate < normalizedFromDate) return false;\n          if (normalizedToDate && checkedDate > normalizedToDate) return false;\n          return true;\n        }).length,\n        portfoliosWithMatchingUsers: completedPortfolios.filter(p => {\n          var _p$all_sites_checked_2;\n          const checkedDate = (_p$all_sites_checked_2 = p.all_sites_checked_date) === null || _p$all_sites_checked_2 === void 0 ? void 0 : _p$all_sites_checked_2.split('T')[0];\n          if (!checkedDate) return false;\n          if (normalizedFromDate && checkedDate < normalizedFromDate) return false;\n          if (normalizedToDate && checkedDate > normalizedToDate) return false;\n          return users.some(u => u.id === p.all_sites_checked_by);\n        }).length\n      }\n    });\n    return filteredUsers.sort((a, b) => b.totalPortfolios - a.totalPortfolios);\n  }, [filteredIssues, userSearch, fromDate, toDate, hourFilter, users, portfolios, usersLoading]);\n\n  // Calculate max count for color coding\n  const maxCount = useMemo(() => {\n    let max = 0;\n    matrixData.forEach(user => {\n      Object.values(user.hours).forEach(hourData => {\n        max = Math.max(max, hourData.portfolios.size);\n      });\n    });\n    return max;\n  }, [matrixData]);\n\n  // Get cell color class\n  const getCellColorClass = count => {\n    if (count === 0) {\n      return 'bg-white border border-gray-200 text-gray-400';\n    }\n    if (count >= 3) {\n      return 'bg-green-600 text-white font-semibold';\n    }\n    if (count >= 1) {\n      return 'bg-green-300 text-green-900 font-semibold';\n    }\n    return 'bg-white border border-gray-200 text-gray-400';\n  };\n\n  // Get cell info for tooltip\n  const getCellInfo = (userId, hour) => {\n    const user = matrixData.find(u => u.userName === userId);\n    if (!user) return null;\n    const hourData = user.hours[hour];\n    if (!hourData || hourData.portfolios.size === 0) return null;\n\n    // Extract portfolio IDs from keys (format: portfolioId_date_hour)\n    const portfolioNames = Array.from(hourData.portfolios).map(portfolioKey => {\n      // Extract portfolio ID from key (format: portfolioId_date_hour)\n      const portfolioId = portfolioKey.split('_')[0];\n      const portfolio = portfolios.find(p => p.id === portfolioId);\n      return (portfolio === null || portfolio === void 0 ? void 0 : portfolio.name) || 'Unknown';\n    }).filter(name => name !== 'Unknown');\n    return {\n      userName: user.displayName,\n      hour,\n      totalCount: hourData.issues.length,\n      portfolios: portfolioNames,\n      portfolioCount: hourData.portfolios.size\n    };\n  };\n  const handleCellMouseEnter = (e, userId, hour) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    setHoveredCell({\n      userId,\n      hour,\n      position: {\n        top: rect.top + rect.height / 2,\n        left: rect.left + rect.width / 2\n      }\n    });\n  };\n  const handleCellMouseLeave = () => {\n    setHoveredCell(null);\n  };\n  const handleQuickRange = range => {\n    const today = new Date();\n    const formatDate = date => date.toISOString().split('T')[0];\n    if (range === 'today') {\n      setFromDate(formatDate(today));\n      setToDate(formatDate(today));\n    } else if (range === 'yesterday') {\n      const yesterday = new Date(today);\n      yesterday.setDate(yesterday.getDate() - 1);\n      setFromDate(formatDate(yesterday));\n      setToDate(formatDate(yesterday));\n    } else if (range === 'week') {\n      const weekAgo = new Date(today);\n      weekAgo.setDate(today.getDate() - 7);\n      setFromDate(formatDate(weekAgo));\n      setToDate(formatDate(today));\n    } else if (range === 'month') {\n      const monthAgo = new Date(today);\n      monthAgo.setMonth(today.getMonth() - 1);\n      setFromDate(formatDate(monthAgo));\n      setToDate(formatDate(today));\n    }\n  };\n  const handleResetFilters = () => {\n    setUserSearch('');\n    setHourFilter('all');\n    setIssueFilter('all');\n    const today = new Date();\n    setFromDate(today.toISOString().split('T')[0]);\n    setToDate(today.toISOString().split('T')[0]);\n  };\n  const handleExportMatrix = () => {\n    const csvRows = [['User / Hour', ...Array.from({\n      length: 24\n    }, (_, i) => `${i}:00`), 'Total'], ...matrixData.map(user => {\n      const row = [`${user.displayName} (${user.totalPortfolios} portfolios summary)`];\n      let total = 0;\n      for (let hour = 0; hour < 24; hour++) {\n        var _user$hours$hour;\n        const count = ((_user$hours$hour = user.hours[hour]) === null || _user$hours$hour === void 0 ? void 0 : _user$hours$hour.portfolios.size) || 0;\n        row.push(count.toString());\n        total += count;\n      }\n      row.push(total.toString());\n      return row;\n    }), ['Hour Totals', ...Array.from({\n      length: 24\n    }, (_, hour) => {\n      const count = matrixData.reduce((sum, user) => {\n        var _user$hours$hour2;\n        return sum + (((_user$hours$hour2 = user.hours[hour]) === null || _user$hours$hour2 === void 0 ? void 0 : _user$hours$hour2.portfolios.size) || 0);\n      }, 0);\n      return count.toString();\n    }), matrixData.reduce((sum, user) => {\n      return sum + Object.values(user.hours).reduce((s, h) => s + h.portfolios.size, 0);\n    }, 0).toString()]];\n    const csvContent = csvRows.map(row => row.map(cell => `\"${cell}\"`).join(',')).join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `coverage_matrix_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n    toast.success('Coverage matrix exported successfully');\n  };\n  const handleExportChartData = () => {\n    const csvRows = [['User', 'Total Portfolios Monitored'], ...userCoverageData.map(u => [u.userName, u.totalPortfolios.toString()])];\n    const csvContent = csvRows.map(row => row.map(cell => `\"${cell}\"`).join(',')).join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `user_coverage_performance_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n    toast.success('Chart data exported successfully');\n  };\n\n  // Calculate user coverage for chart - Show ALL users\n  const userCoverageData = useMemo(() => {\n    return matrixData.map(user => ({\n      userName: user.displayName,\n      totalPortfolios: user.totalPortfolios,\n      userData: user\n    })).sort((a, b) => b.totalPortfolios - a.totalPortfolios);\n  }, [matrixData]);\n\n  // Handle chart bar click\n  const handleChartClick = (event, elements) => {\n    // If a bar was clicked\n    if (elements && elements.length > 0) {\n      const clickedElement = elements[0];\n      const dataIndex = clickedElement.index;\n      const clickedUser = userCoverageData[dataIndex];\n      if (clickedUser && clickedUser.userData) {\n        setSelectedUser(clickedUser.userData);\n      }\n    }\n  };\n  const chartData = {\n    labels: userCoverageData.map(u => u.userName),\n    datasets: [{\n      label: 'Total Portfolios Monitored',\n      data: userCoverageData.map(u => u.totalPortfolios),\n      backgroundColor: userCoverageData.map((_, idx) => idx < 3 ? 'rgba(34, 197, 94, 0.9)' : 'rgba(34, 197, 94, 0.5)'),\n      borderColor: userCoverageData.map((_, idx) => idx < 3 ? 'rgba(34, 197, 94, 1)' : 'rgba(34, 197, 94, 0.7)'),\n      borderWidth: 1,\n      barThickness: 30,\n      maxBarThickness: 40\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    onClick: handleChartClick,\n    onHover: (event, elements) => {\n      // Change cursor to pointer when hovering over bars\n      if (elements && elements.length > 0) {\n        event.native.target.style.cursor = 'pointer';\n      } else {\n        event.native.target.style.cursor = 'default';\n      }\n    },\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: context => {\n            const user = userCoverageData[context.dataIndex];\n            return `${user.userName}: ${user.totalPortfolios} portfolios`;\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 2,\n          max: 8\n        },\n        title: {\n          display: true,\n          text: 'Total Portfolios Mon'\n        }\n      },\n      x: {\n        ticks: {\n          maxRotation: 45,\n          minRotation: 45\n        }\n      }\n    }\n  };\n  const cellInfo = hoveredCell ? getCellInfo(hoveredCell.userId, hoveredCell.hour) : null;\n\n  // Calculate totals for summary\n  const totalCoverage = useMemo(() => {\n    const allPortfolios = new Set();\n    matrixData.forEach(user => {\n      Object.values(user.hours).forEach(hourData => {\n        hourData.portfolios.forEach(pid => allPortfolios.add(pid));\n      });\n    });\n    return {\n      portfolios: allPortfolios.size,\n      users: matrixData.length,\n      hours: 24\n    };\n  }, [matrixData]);\n\n  // Get user performance details\n  const getUserPerformanceDetails = user => {\n    const allPortfolios = new Set();\n    const allIssues = new Set();\n    const activeIssues = [];\n    const missedAlerts = [];\n    const hourlyBreakdown = [];\n    Object.entries(user.hours).forEach(([hourStr, hourData]) => {\n      const hour = parseInt(hourStr);\n      hourData.portfolios.forEach(pid => allPortfolios.add(pid));\n      hourData.issues.forEach(issue => allIssues.add(issue.id));\n      activeIssues.push(...hourData.activeIssues);\n      hourData.issues.forEach(issue => {\n        if (issue.missed_by && issue.missed_by.length > 0) {\n          missedAlerts.push(issue);\n        }\n      });\n      hourlyBreakdown.push({\n        hour,\n        portfolios: hourData.portfolios.size,\n        issues: hourData.issues.length,\n        activeIssues: hourData.activeIssues.length\n      });\n    });\n    hourlyBreakdown.sort((a, b) => a.hour - b.hour);\n    const portfolioNames = Array.from(allPortfolios).map(portfolioKey => {\n      // Extract portfolio ID from key (format: portfolioId_date_hour)\n      const portfolioId = portfolioKey.split('_')[0];\n      const portfolio = portfolios.find(p => p.id === portfolioId);\n      if (!portfolio) return null;\n      // Format: \"Portfolio Name (Site Range)\" if site_range exists\n      if (portfolio.site_range) {\n        return `${portfolio.name} (${portfolio.site_range})`;\n      }\n      return portfolio.name;\n    }).filter(name => name);\n    const healthySites = allIssues.size - activeIssues.length;\n    return {\n      totalCount: allIssues.size,\n      activeIssues: activeIssues.length,\n      healthySites,\n      missedAlerts: missedAlerts.length,\n      totalPortfoliosMonitored: allPortfolios.size,\n      monitoringActiveHours: Object.keys(user.hours).length,\n      portfolios: portfolioNames,\n      hourlyBreakdown\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-5 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1076,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1070,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: userSearch,\n                onChange: e => setUserSearch(e.target.value),\n                placeholder: \"Type user name...\",\n                className: \"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1083,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1069,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: hourFilter,\n                onChange: e => setHourFilter(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"all\",\n                  children: \"All Hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1098,\n                  columnNumber: 19\n                }, this), Array.from({\n                  length: 24\n                }, (_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: i.toString(),\n                  children: [i, \":00\"]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1100,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1093,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: issueFilter,\n                onChange: e => setIssueFilter(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"all\",\n                  children: \"All Issues (Coverage)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1113,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"active\",\n                  children: \"Active Issues Only\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1114,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1108,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: fromDate,\n                onChange: e => setFromDate(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1119,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1131,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1125,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: toDate,\n                onChange: e => setToDate(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1153,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1147,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1140,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1068,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Quick Range:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('today'),\n              className: `px-3 py-1.5 text-sm rounded-md transition-all ${fromDate === toDate && fromDate === new Date().toISOString().split('T')[0] ? 'bg-green-600 text-white shadow-md' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              children: \"Today\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('yesterday'),\n              className: \"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\",\n              children: \"Yesterday\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('week'),\n              className: \"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1181,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('month'),\n              className: \"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1187,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              onClick: handleResetFilters,\n              children: \"Reset All Filters\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1193,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1067,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1066,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1064,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold mb-1\",\n          children: \"User Coverage Performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-100 text-sm\",\n          children: \"Top performers by portfolio coverage. Chart shows users who have monitored portfolios based on issues logged with \\\"Monitored By\\\" field.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"rounded-t-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex-1 max-w-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1221,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search user by name...\",\n              className: \"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            size: \"sm\",\n            onClick: handleExportChartData,\n            style: {\n              backgroundColor: '#76ab3f'\n            },\n            disabled: userCoverageData.length === 0,\n            children: \"Export Chart Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1213,\n          columnNumber: 11\n        }, this), userCoverageData.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: '400px',\n              position: 'relative',\n              cursor: 'pointer'\n            },\n            children: /*#__PURE__*/_jsxDEV(Bar, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1248,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500 text-center mt-2\",\n            children: \"Click on any bar to view detailed performance metrics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1250,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center gap-4 mt-4 text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-green-600 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1255,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"Top 3 Performers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1256,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-green-300 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"Other Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1260,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1258,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1253,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-500 mb-2 font-medium\",\n            children: \"No data available for chart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-400 mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: \"The chart requires:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1268,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside space-y-1 text-left max-w-md mx-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Issues logged within the selected date range (\", fromDate, \" to \", toDate, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1270,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Issues with \\\"Monitored By\\\" field populated\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1271,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"At least one user who has monitored portfolios\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1269,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-3 text-xs\",\n              children: \"Try adjusting your date range or check if issues have the \\\"Monitored By\\\" field filled in.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-xs text-gray-500\",\n              children: [\"Total issues: \", allIssues.length, \" | Filtered issues: \", filteredIssues.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1277,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1267,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1265,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1202,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold mb-1\",\n          children: \"Coverage Matrix\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-100 text-sm\",\n          children: \"Track how many portfolios each user covered in each hour. Hover over cells to see portfolio details and issues with 'Yes'.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"rounded-t-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mt-1\",\n              children: [totalCoverage.portfolios, \" portfolio coverage(s) across \", totalCoverage.users, \" user(s) \\u2022 \", totalCoverage.hours, \" hours\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1299,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 text-xs\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 bg-green-600 rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1306,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"High coverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1307,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 bg-green-300 rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1310,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Medium coverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1311,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1309,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 bg-white border border-gray-200 rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1314,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"No coverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1315,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1313,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1304,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase sticky left-0 bg-gray-50 z-10 border-r border-gray-200\",\n                  children: \"User / Hour\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1325,\n                  columnNumber: 19\n                }, this), Array.from({\n                  length: 24\n                }, (_, i) => /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase min-w-[60px]\",\n                  children: [i, \":00\"]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1329,\n                  columnNumber: 21\n                }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase bg-gray-100 border-l border-gray-200\",\n                  children: \"Total Portfolios\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1336,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1324,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: matrixData.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: 26,\n                  className: \"px-4 py-8 text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-gray-500 font-medium\",\n                      children: \"No data available\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1346,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-400 space-y-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"Possible reasons:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1348,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                        className: \"list-disc list-inside space-y-0.5 text-left max-w-md mx-auto\",\n                        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                          children: [\"No issues found in the selected date range (\", fromDate, \" to \", toDate, \")\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1350,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          children: \"Issues don't have \\\"Monitored By\\\" field populated\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1351,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          children: \"User emails in \\\"Monitored By\\\" don't match any users in the system\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1352,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          children: \"Try adjusting the date range or checking the browser console for details\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1353,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1349,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"mt-2 text-gray-500\",\n                        children: [\"Total issues: \", allIssues.length, \" | Filtered issues: \", filteredIssues.length]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1355,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1347,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1345,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1344,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1343,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [matrixData.map(row => {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 border-r border-gray-200 cursor-pointer hover:text-blue-600\",\n                      onClick: () => setSelectedUser(row),\n                      children: [row.displayName, \" (\", row.totalPortfolios, \" portfolios summary)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1367,\n                      columnNumber: 27\n                    }, this), Array.from({\n                      length: 24\n                    }, (_, hour) => {\n                      var _row$hours$hour;\n                      const count = ((_row$hours$hour = row.hours[hour]) === null || _row$hours$hour === void 0 ? void 0 : _row$hours$hour.portfolios.size) || 0;\n                      return /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: `px-2 py-3 text-center text-xs font-semibold cursor-pointer transition-colors ${getCellColorClass(count)}`,\n                        onMouseEnter: e => handleCellMouseEnter(e, row.userName, hour),\n                        onMouseLeave: handleCellMouseLeave,\n                        children: count > 0 ? count : ''\n                      }, hour, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1376,\n                        columnNumber: 31\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-center text-sm font-bold text-gray-900 bg-gray-100 border-l border-gray-200\",\n                      children: row.totalPortfolios\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1388,\n                      columnNumber: 27\n                    }, this)]\n                  }, row.userName, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1366,\n                    columnNumber: 25\n                  }, this);\n                }), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100 font-bold\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-gray-900 sticky left-0 bg-gray-100 z-10 border-r border-gray-200\",\n                    children: \"Hour Totals\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1396,\n                    columnNumber: 23\n                  }, this), Array.from({\n                    length: 24\n                  }, (_, hour) => {\n                    const count = matrixData.reduce((sum, user) => {\n                      var _user$hours$hour3;\n                      return sum + (((_user$hours$hour3 = user.hours[hour]) === null || _user$hours$hour3 === void 0 ? void 0 : _user$hours$hour3.portfolios.size) || 0);\n                    }, 0);\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-2 py-3 text-center text-xs text-gray-900\",\n                      children: count > 0 ? count : ''\n                    }, hour, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1405,\n                      columnNumber: 27\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-center text-sm text-gray-900 bg-gray-200 border-l border-gray-200\",\n                    children: matrixData.reduce((sum, user) => sum + user.totalPortfolios, 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1410,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1395,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1341,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1322,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1321,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1287,\n      columnNumber: 7\n    }, this), hoveredCell && cellInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed z-[9999] w-80 bg-blue-900 text-white text-xs rounded-lg shadow-xl p-4 pointer-events-none\",\n      style: {\n        top: `${hoveredCell.position.top}px`,\n        left: `${hoveredCell.position.left}px`,\n        transform: 'translate(-50%, -100%)',\n        marginTop: '-10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold text-sm mb-2 pb-2 border-b border-blue-700\",\n        children: [cellInfo.userName, \" - Hour \", cellInfo.hour, \":00\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1433,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-blue-300\",\n          children: [\"Total Count (All Issues): \", cellInfo.totalCount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1437,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1436,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-green-300 mb-1\",\n          children: [\"Total Portfolios Monitored (\", cellInfo.portfolioCount, \"):\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1442,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-1 max-h-32 overflow-y-auto\",\n          children: cellInfo.portfolios.map((portfolio, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-blue-100 pl-2\",\n            children: [\"\\u2022 \", portfolio]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1447,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1445,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1441,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-1/2 transform -translate-x-1/2 top-full border-4 border-transparent border-t-blue-900\",\n        style: {\n          marginTop: '-1px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1453,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1424,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-end gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        size: \"sm\",\n        onClick: () => setShowCharts(!showCharts),\n        children: showCharts ? 'Hide Charts' : 'Show Charts'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        size: \"sm\",\n        onClick: handleExportMatrix,\n        style: {\n          backgroundColor: '#76ab3f'\n        },\n        children: \"Export Matrix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1465,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1461,\n      columnNumber: 7\n    }, this), selectedUser && /*#__PURE__*/_jsxDEV(UserPerformanceModal, {\n      user: selectedUser,\n      onClose: () => setSelectedUser(null),\n      getUserPerformanceDetails: getUserPerformanceDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1472,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1062,\n    columnNumber: 5\n  }, this);\n};\n_s(CoverageMatrix, \"eJSlO6RTwQh5yDolVSxypnqtXCg=\", false, function () {\n  return [useAuth, useQuery, useQuery, useQuery];\n});\n_c = CoverageMatrix;\nconst UserPerformanceModal = ({\n  user,\n  onClose,\n  getUserPerformanceDetails\n}) => {\n  const details = getUserPerformanceDetails(user);\n  const hourlyChartData = {\n    labels: details.hourlyBreakdown.map(h => h.hour.toString()),\n    datasets: [{\n      label: 'Portfolios',\n      data: details.hourlyBreakdown.map(h => h.portfolios),\n      backgroundColor: 'rgba(34, 197, 94, 0.9)',\n      borderColor: 'rgba(34, 197, 94, 1)',\n      borderWidth: 1,\n      barThickness: 25,\n      maxBarThickness: 30\n    }, {\n      label: 'Issues',\n      data: details.hourlyBreakdown.map(h => h.issues),\n      backgroundColor: 'rgba(59, 130, 246, 0.9)',\n      borderColor: 'rgba(59, 130, 246, 1)',\n      borderWidth: 1,\n      barThickness: 25,\n      maxBarThickness: 30\n    }, {\n      label: 'Active Issues',\n      data: details.hourlyBreakdown.map(h => h.activeIssues),\n      backgroundColor: 'rgba(239, 68, 68, 0.9)',\n      borderColor: 'rgba(239, 68, 68, 1)',\n      borderWidth: 1,\n      barThickness: 25,\n      maxBarThickness: 30\n    }]\n  };\n  const hourlyChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    datasets: {\n      bar: {\n        categoryPercentage: 0.6,\n        // Controls the width of the category (group of bars) - smaller = more gap\n        barPercentage: 0.8 // Controls the width of individual bars within the category - smaller = more gap between bars\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'bottom',\n        labels: {\n          font: {\n            size: 12,\n            weight: 'bold'\n          },\n          padding: 15\n        }\n      },\n      tooltip: {\n        enabled: true,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        titleFont: {\n          size: 14,\n          weight: 'bold'\n        },\n        bodyFont: {\n          size: 13,\n          weight: 'normal'\n        },\n        padding: 12,\n        displayColors: true,\n        callbacks: {\n          title: () => {\n            return '';\n          },\n          label: context => {\n            const label = context.dataset.label || '';\n            const value = context.parsed.y || 0;\n            return `${label} : ${value}`;\n          },\n          beforeBody: tooltipItems => {\n            // Calculate total count (sum of all values for this hour)\n            const totalCount = tooltipItems.reduce((sum, item) => sum + (item.parsed.y || 0), 0);\n            return [totalCount.toString()];\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 0.5,\n          max: 2,\n          font: {\n            size: 11,\n            weight: 'bold'\n          }\n        },\n        title: {\n          display: true,\n          text: 'Count',\n          font: {\n            size: 12,\n            weight: 'bold'\n          }\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.05)'\n        }\n      },\n      x: {\n        ticks: {\n          font: {\n            size: 11,\n            weight: 'bold'\n          }\n        },\n        title: {\n          display: true,\n          text: 'Hour',\n          font: {\n            size: 12,\n            weight: 'bold'\n          }\n        },\n        grid: {\n          display: false\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 overflow-y-auto\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\",\n        onClick: onClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1636,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle max-w-4xl w-full\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-600 text-white px-6 py-5 rounded-t-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-2xl font-bold text-white tracking-tight\",\n                children: \"User Performance Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1646,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-white text-base mt-1.5 font-medium\",\n                children: user.displayName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1647,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1645,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onClose,\n              className: \"text-white hover:text-gray-200 transition-colors p-1\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-6 h-6\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M6 18L18 6M6 6l12 12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1654,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1653,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1649,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1644,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1643,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-8 py-7 bg-white\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-4 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-50 rounded-lg p-5 border border-blue-200 shadow-sm hover:shadow-md transition-shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold text-blue-600 mb-2 tracking-tight leading-none\",\n                  children: details.totalCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1665,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-semibold text-gray-700 tracking-wide\",\n                  children: \"Total Count\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1666,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1664,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-red-50 rounded-lg p-5 border border-red-200 shadow-sm hover:shadow-md transition-shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold text-red-600 mb-2 tracking-tight leading-none\",\n                  children: details.activeIssues\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1669,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-semibold text-gray-700 tracking-wide\",\n                  children: \"Active Issues\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1670,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1668,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-green-50 rounded-lg p-5 border border-green-200 shadow-sm hover:shadow-md transition-shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold text-green-600 mb-2 tracking-tight leading-none\",\n                  children: details.healthySites\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1673,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-semibold text-gray-700 tracking-wide\",\n                  children: \"Healthy Sites\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1674,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1672,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-orange-50 rounded-lg p-5 border border-orange-200 shadow-sm hover:shadow-md transition-shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold text-orange-600 mb-2 tracking-tight leading-none\",\n                  children: details.missedAlerts\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1677,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-semibold text-gray-700 tracking-wide\",\n                  children: \"Missed Alerts\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1678,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1676,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1663,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-purple-50 rounded-lg p-6 border border-purple-200 shadow-sm hover:shadow-md transition-shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold text-purple-600 mb-2 tracking-tight leading-none\",\n                  children: details.totalPortfoliosMonitored\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1685,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-semibold text-gray-700 tracking-wide\",\n                  children: \"Total Portfolios Monitored\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1686,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1684,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-50 rounded-lg p-6 border border-blue-200 shadow-sm hover:shadow-md transition-shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold text-blue-600 mb-2 tracking-tight leading-none\",\n                  children: details.monitoringActiveHours\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1689,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-semibold text-gray-700 tracking-wide\",\n                  children: \"Monitoring Active Hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1690,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1688,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1683,\n              columnNumber: 15\n            }, this), details.portfolios.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-xl font-bold text-gray-900 mb-4 tracking-tight\",\n                children: [\"Total Portfolios Monitored (\", details.portfolios.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1697,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap gap-3\",\n                children: details.portfolios.map((portfolio, idx) => {\n                  // Extract portfolio name and site range if available\n                  const portfolioMatch = portfolio.match(/^(.+?)\\s*\\((.+)\\)$/);\n                  const portfolioName = portfolioMatch ? portfolioMatch[1] : portfolio;\n                  const siteRange = portfolioMatch ? portfolioMatch[2] : null;\n                  return /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"px-4 py-2.5 bg-green-100 text-green-800 rounded-lg text-sm font-semibold border border-green-300 shadow-sm hover:shadow-md transition-shadow\",\n                    children: [portfolioName, siteRange && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-green-700 font-normal ml-1\",\n                      children: [\"(\", siteRange, \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1713,\n                      columnNumber: 41\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1708,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1700,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1696,\n              columnNumber: 17\n            }, this), details.hourlyBreakdown.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-xl font-bold text-gray-900 mb-4 tracking-tight\",\n                children: \"Hourly Breakdown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1724,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  height: '300px'\n                },\n                children: /*#__PURE__*/_jsxDEV(Bar, {\n                  data: hourlyChartData,\n                  options: hourlyChartOptions\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1726,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1725,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1723,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end pt-6 border-t border-gray-200\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: onClose,\n                style: {\n                  backgroundColor: '#76ab3f'\n                },\n                className: \"px-6 py-2.5 font-semibold text-white rounded-lg shadow-sm hover:shadow-md transition-shadow\",\n                children: \"Close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1732,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1731,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1661,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1660,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1638,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1635,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1634,\n    columnNumber: 5\n  }, this);\n};\n_c2 = UserPerformanceModal;\nexport default CoverageMatrix;\nvar _c, _c2;\n$RefreshReg$(_c, \"CoverageMatrix\");\n$RefreshReg$(_c2, \"UserPerformanceModal\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useQuery","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","issueService","portfolioService","adminService","useAuth","Card","Button","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","register","CoverageMatrix","_s","user","currentUser","userSearch","setUserSearch","hourFilter","setHourFilter","issueFilter","setIssueFilter","fromDate","setFromDate","today","Date","toISOString","split","toDate","setToDate","showCharts","setShowCharts","selectedUser","setSelectedUser","hoveredCell","setHoveredCell","data","portfolios","queryKey","queryFn","getAll","users","isLoading","usersLoading","getUsers","staleTime","refetchInterval","length","console","log","map","u","_u$email","id","email","full_name","emailLower","toLowerCase","warn","usersCount","userIdToUser","forEach","allIssues","filteredIssues","filtered","filter","issue","created_at","issueDateStr","description","hour","parseInt","issue_hour","matrixData","userMap","normalizedFromDate","normalizedToDate","completedPortfolios","p","all_sites_checked","all_sites_checked_date","all_sites_checked_by","totalPortfolios","dateRange","totalIssues","completedPortfolioDetails","name","checkedBy","checkedDate","checkedHour","all_sites_checked_hour","portfolio","_portfolio$all_sites_2","checkedDateStr","normalizedCheckedDate","portfolioId","portfolioName","checkedByUser","find","matches","checkedByValue","matchedUserId","matchedUserEmail","matchedUserName","checkedByType","availableUserIds","String","_portfolio$all_sites_","fallbackIdentifier","looksLikeEmail","includes","fallbackEmail","substring","fallbackDisplayName","userEmail","displayName","userName","hours","completionHour","portfolioIssues","portfolio_id","issuesByHour","_issue$issue_hour","push","Object","keys","hourStr","Set","issues","activeIssues","portfolioKey","add","issueMonitoredBy","Array","isArray","monitored_by","issuesFound","issueHours","i","allIssuesForPortfolio","monitoredBy","_issue$issue_hour2","issuesByHourKeys","wasAdded","has","wasAlreadyAdded","totalPortfoliosInThisHour","size","_issue$issue_hour3","monitoredByEmails","trim","emailValue","undefined","monitoredByEmail","normalizedMonitoredEmail","normalizedUserEmail","searchingFor","searchingForNormalized","issueDetails","issueId","values","allPortfolios","hourData","pid","filteredUsers","userMapDetails","entries","userData","hourDetails","portfolioKeys","from","portfolioCount","totalUsers","usersWithData","hoursWithData","h","allUsersInMap","summary","totalCompletedPortfolios","portfoliosInDateRange","_p$all_sites_checked_","portfoliosWithMatchingUsers","_p$all_sites_checked_2","some","sort","a","b","maxCount","max","Math","getCellColorClass","count","getCellInfo","userId","portfolioNames","totalCount","handleCellMouseEnter","e","rect","currentTarget","getBoundingClientRect","position","top","height","left","width","handleCellMouseLeave","handleQuickRange","range","formatDate","date","yesterday","setDate","getDate","weekAgo","monthAgo","setMonth","getMonth","handleResetFilters","handleExportMatrix","csvRows","_","row","total","_user$hours$hour","toString","reduce","sum","_user$hours$hour2","s","csvContent","cell","join","blob","Blob","type","url","window","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","success","handleExportChartData","userCoverageData","handleChartClick","event","elements","clickedElement","dataIndex","index","clickedUser","chartData","labels","datasets","label","backgroundColor","idx","borderColor","borderWidth","barThickness","maxBarThickness","chartOptions","responsive","maintainAspectRatio","onClick","onHover","native","target","style","cursor","plugins","legend","display","tooltip","callbacks","context","scales","y","beginAtZero","ticks","stepSize","title","text","x","maxRotation","minRotation","cellInfo","totalCoverage","getUserPerformanceDetails","missedAlerts","hourlyBreakdown","missed_by","site_range","healthySites","totalPortfoliosMonitored","monitoringActiveHours","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","placeholder","variant","disabled","options","colSpan","_row$hours$hour","onMouseEnter","onMouseLeave","_user$hours$hour3","transform","marginTop","UserPerformanceModal","onClose","_c","details","hourlyChartData","hourlyChartOptions","bar","categoryPercentage","barPercentage","font","weight","padding","enabled","titleFont","bodyFont","displayColors","dataset","parsed","beforeBody","tooltipItems","item","grid","color","stopPropagation","portfolioMatch","match","siteRange","_c2","$RefreshReg$"],"sources":["C:/Users/LibsysAdmin/OneDrive - Libsys IT Services Private Limited/Desktop/ALLLL HLSC/client/src/components/analytics/CoverageMatrix.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport { Bar } from 'react-chartjs-2'\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js'\nimport { issueService } from '../../services/issueService'\nimport { portfolioService } from '../../services/portfolioService'\nimport { adminService } from '../../services/adminService'\nimport { Issue } from '../../types/issue.types'\nimport { Portfolio } from '../../types/portfolio.types'\nimport { User } from '../../types/user.types'\nimport { useAuth } from '../../context/AuthContext'\nimport Card from '../common/Card'\nimport Button from '../common/Button'\nimport Modal from '../common/Modal'\nimport toast from 'react-hot-toast'\n\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend)\n\ninterface UserHourData {\n  portfolios: Set<string>\n  issues: Issue[]\n  activeIssues: Issue[]\n}\n\ninterface UserMatrixData {\n  userName: string\n  displayName: string\n  email: string\n  totalPortfolios: number\n  hours: { [hour: number]: UserHourData }\n}\n\nconst CoverageMatrix: React.FC = () => {\n  const { user: currentUser } = useAuth()\n  const [userSearch, setUserSearch] = useState('')\n  const [hourFilter, setHourFilter] = useState<string>('all')\n  const [issueFilter, setIssueFilter] = useState<'all' | 'active'>('all')\n  const [fromDate, setFromDate] = useState(() => {\n    // Default to today\n    const today = new Date()\n    return today.toISOString().split('T')[0]\n  })\n  const [toDate, setToDate] = useState(() => {\n    const today = new Date()\n    return today.toISOString().split('T')[0]\n  })\n  const [showCharts, setShowCharts] = useState(true)\n  const [selectedUser, setSelectedUser] = useState<UserMatrixData | null>(null)\n  const [hoveredCell, setHoveredCell] = useState<{\n    userId: string\n    hour: number\n    position: { top: number; left: number }\n  } | null>(null)\n\n  // Fetch portfolios\n  const { data: portfolios = [] } = useQuery<Portfolio[]>({\n    queryKey: ['portfolios'],\n    queryFn: portfolioService.getAll,\n  })\n\n  // Fetch users to map user IDs to emails\n  const { data: users = [], isLoading: usersLoading } = useQuery<User[]>({\n    queryKey: ['admin-users'],\n    queryFn: adminService.getUsers,\n    staleTime: 0, // Always fetch fresh data\n    refetchInterval: 1000, // Refresh every 1 second\n  })\n  \n  // Log users when they load\n  useEffect(() => {\n    if (users.length > 0) {\n      console.log('ðŸ‘¥ Coverage Matrix - Users loaded:', users.map(u => ({\n        id: u.id,\n        email: u.email,\n        full_name: u.full_name,\n        emailLower: u.email?.toLowerCase(),\n      })))\n    } else {\n      console.warn('âš ï¸ Coverage Matrix - Users array is empty!', { usersLoading, usersCount: users.length })\n    }\n  }, [users, usersLoading])\n\n  // Create mapping from user ID to user info (email, full_name)\n  const userIdToUser = useMemo(() => {\n    const map: { [key: string]: { email: string; full_name: string } } = {}\n    users.forEach((user) => {\n      map[user.id] = {\n        email: user.email,\n        full_name: user.full_name || user.email.split('@')[0]\n      }\n    })\n    return map\n  }, [users])\n\n  // Fetch issues\n  const { data: allIssues = [] } = useQuery<Issue[]>({\n    queryKey: ['issues'],\n    queryFn: () => issueService.getAll({}),\n  })\n\n  // Filter issues by date range\n  const filteredIssues = useMemo(() => {\n    let filtered = allIssues\n\n    if (fromDate && toDate) {\n      // Use date string comparison to avoid timezone issues\n      filtered = filtered.filter((issue) => {\n        if (!issue.created_at) return false\n        const issueDateStr = new Date(issue.created_at).toISOString().split('T')[0]\n        return issueDateStr >= fromDate && issueDateStr <= toDate\n      })\n    }\n\n    // Issue filter\n    if (issueFilter === 'active') {\n      filtered = filtered.filter(\n        (issue) => issue.description && issue.description.toLowerCase() !== 'no issue'\n      )\n    }\n\n    // Hour filter\n    if (hourFilter !== 'all') {\n      const hour = parseInt(hourFilter)\n      filtered = filtered.filter((issue) => issue.issue_hour === hour)\n    }\n\n    return filtered\n  }, [allIssues, fromDate, toDate, issueFilter, hourFilter])\n\n  // Build matrix data - based on \"All Sites Checked = Yes\" completions\n  // Count portfolios based on each time a portfolio is completed (not just issues entered)\n  const matrixData = useMemo(() => {\n    // Don't process if users haven't loaded yet\n    if (usersLoading || users.length === 0) {\n      console.log('â³ Coverage Matrix - Waiting for users to load...', { usersLoading, usersCount: users.length })\n      return []\n    }\n    \n    const userMap: { [key: string]: UserMatrixData } = {}\n\n    // Normalize date range for comparison\n    const normalizedFromDate = fromDate ? fromDate.split('T')[0] : null\n    const normalizedToDate = toDate ? toDate.split('T')[0] : null\n\n    // Debug: Log all completed portfolios first\n    const completedPortfolios = portfolios.filter(p => p.all_sites_checked === 'Yes' && p.all_sites_checked_date && p.all_sites_checked_by)\n    \n    // First, process portfolios with \"All Sites Checked = Yes\" to count completions\n    // Count each distinct issue entry session (by hour) as a separate completion\n    // This allows the same portfolio to be counted multiple times if completed multiple times\n    console.log('Coverage Matrix Debug - Processing portfolios:', {\n      totalPortfolios: portfolios.length,\n      completedPortfolios: completedPortfolios.length,\n      dateRange: { fromDate: normalizedFromDate, toDate: normalizedToDate },\n      totalIssues: filteredIssues.length,\n      completedPortfolioDetails: completedPortfolios.map(p => ({\n        id: p.id,\n        name: p.name,\n        checkedBy: p.all_sites_checked_by,\n        checkedDate: p.all_sites_checked_date,\n        checkedHour: p.all_sites_checked_hour,\n      })),\n    })\n    \n    console.log('ðŸ” Coverage Matrix - All completed portfolios:', completedPortfolios.map(p => ({\n      id: p.id,\n      name: p.name,\n      checkedBy: p.all_sites_checked_by,\n      checkedDate: p.all_sites_checked_date,\n      checkedHour: p.all_sites_checked_hour,\n    })))\n    console.log('ðŸ” Coverage Matrix - Available users:', users.map(u => ({ id: u.id, email: u.email, full_name: u.full_name })))\n    console.log('ðŸ” Coverage Matrix - Date range:', { fromDate, toDate, normalizedFromDate, normalizedToDate })\n\n    portfolios.forEach((portfolio) => {\n      // Only count portfolios that have been completed (all_sites_checked = 'Yes')\n      if (portfolio.all_sites_checked !== 'Yes' || !portfolio.all_sites_checked_date || !portfolio.all_sites_checked_by) {\n        return\n      }\n\n      // Check if completion date is within the selected date range\n      const checkedDateStr = portfolio.all_sites_checked_date\n      const normalizedCheckedDate = checkedDateStr.split('T')[0] // Remove time if present\n      \n      // Strict date filtering - portfolio completion must be within the selected date range\n      if (normalizedFromDate && normalizedCheckedDate < normalizedFromDate) {\n        console.log('â­ï¸ Coverage Matrix - Skipping portfolio (before date range):', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedDate: normalizedCheckedDate,\n          fromDate: normalizedFromDate,\n        })\n        return // Skip - before date range\n      }\n      if (normalizedToDate && normalizedCheckedDate > normalizedToDate) {\n        console.log('â­ï¸ Coverage Matrix - Skipping portfolio (after date range):', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedDate: normalizedCheckedDate,\n          toDate: normalizedToDate,\n        })\n        return // Skip - after date range\n      }\n      \n      // Get the user who completed it (all_sites_checked_by is a user ID/UUID from JWT token)\n      // Try ID match first - this should work if the user exists\n      let checkedByUser = users.find((u) => {\n        const matches = u.id === portfolio.all_sites_checked_by\n        if (matches) {\n          console.log('âœ… Coverage Matrix - Found user by ID match:', {\n            portfolioId: portfolio.id,\n            portfolioName: portfolio.name,\n            checkedByValue: portfolio.all_sites_checked_by,\n            matchedUserId: u.id,\n            matchedUserEmail: u.email,\n            matchedUserName: u.full_name,\n          })\n        }\n        return matches\n      })\n      \n      // If ID match fails, try email match (fallback for data inconsistencies)\n      if (!checkedByUser) {\n        console.warn('âš ï¸ Coverage Matrix - User ID not found, trying email match:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedByValue: portfolio.all_sites_checked_by,\n          checkedByType: typeof portfolio.all_sites_checked_by,\n          availableUserIds: users.map(u => ({ id: u.id, email: u.email, full_name: u.full_name })),\n        })\n        checkedByUser = users.find((u) => \n          u.email.toLowerCase() === String(portfolio.all_sites_checked_by).toLowerCase()\n        )\n        if (checkedByUser) {\n          console.log('âœ… Coverage Matrix - Found user by email match:', {\n            portfolioId: portfolio.id,\n            portfolioName: portfolio.name,\n            checkedByValue: portfolio.all_sites_checked_by,\n            matchedUserEmail: checkedByUser.email,\n            matchedUserName: checkedByUser.full_name,\n          })\n        }\n      }\n      \n      if (!checkedByUser) {\n        // User not found - this could be a deleted user or data inconsistency\n        // Use the stored value as a fallback identifier\n        const fallbackIdentifier = portfolio.all_sites_checked_by\n        \n        // Try to extract email from the identifier if it looks like an email\n        const looksLikeEmail = String(fallbackIdentifier).includes('@')\n        const fallbackEmail = looksLikeEmail ? String(fallbackIdentifier) : `unknown-${fallbackIdentifier.substring(0, 8)}@deleted.user`\n        const fallbackDisplayName = looksLikeEmail \n          ? String(fallbackIdentifier).split('@')[0] \n          : `Deleted User (${fallbackIdentifier.substring(0, 8)})`\n        \n        console.warn('âš ï¸ Coverage Matrix - User not found, using fallback identifier:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          checkedByValue: portfolio.all_sites_checked_by,\n          fallbackEmail,\n          fallbackDisplayName,\n        })\n        \n        // Use fallback values\n        const userEmail = fallbackEmail\n        const displayName = fallbackDisplayName\n        \n        // Initialize user in map if not exists (using fallback email as key)\n        if (!userMap[userEmail]) {\n          userMap[userEmail] = {\n            userName: userEmail,\n            displayName,\n            email: userEmail,\n            totalPortfolios: 0,\n            hours: {},\n          }\n        }\n        \n        // Get completion hour from portfolio record\n        const completionHour = portfolio.all_sites_checked_hour ?? 0\n        \n        // Get all issues for this portfolio (by any user, since we don't know the exact user)\n        const portfolioIssues = filteredIssues.filter(issue => {\n          if (issue.portfolio_id !== portfolio.id) return false\n          \n          // Check if issue date is within range\n          if (issue.created_at) {\n            const issueDateStr = new Date(issue.created_at).toISOString().split('T')[0]\n            if (normalizedFromDate && issueDateStr < normalizedFromDate) return false\n            if (normalizedToDate && issueDateStr > normalizedToDate) return false\n          }\n          \n          return true\n        })\n        \n        // If there are issues, group by hour and count each hour separately\n        if (portfolioIssues.length > 0) {\n          const issuesByHour: { [hour: number]: typeof portfolioIssues } = {}\n          portfolioIssues.forEach(issue => {\n            const hour = issue.issue_hour ?? 0\n            if (!issuesByHour[hour]) {\n              issuesByHour[hour] = []\n            }\n            issuesByHour[hour].push(issue)\n          })\n          \n          Object.keys(issuesByHour).forEach(hourStr => {\n            const hour = parseInt(hourStr)\n            if (hourFilter !== 'all' && hour !== parseInt(hourFilter)) {\n              return\n            }\n            \n            if (!userMap[userEmail].hours[hour]) {\n              userMap[userEmail].hours[hour] = {\n                portfolios: new Set(),\n                issues: [],\n                activeIssues: [],\n              }\n            }\n            \n            const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${hour}`\n            userMap[userEmail].hours[hour].portfolios.add(portfolioKey)\n          })\n        } else {\n          // No issues found, use completion hour\n          if (hourFilter !== 'all' && completionHour !== parseInt(hourFilter)) {\n            return\n          }\n          \n          if (!userMap[userEmail].hours[completionHour]) {\n            userMap[userEmail].hours[completionHour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: [],\n            }\n          }\n          \n          const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${completionHour}`\n          userMap[userEmail].hours[completionHour].portfolios.add(portfolioKey)\n        }\n        \n        // Continue to next portfolio (skip the rest of the processing for this portfolio)\n        return\n      }\n\n      const userEmail = checkedByUser.email\n      const displayName = checkedByUser.full_name || userEmail.split('@')[0] || 'Unknown'\n\n      console.log('Coverage Matrix Debug - Processing completed portfolio:', {\n        portfolioId: portfolio.id,\n        portfolioName: portfolio.name,\n        checkedBy: userEmail,\n        checkedDate: normalizedCheckedDate,\n        completionHour: portfolio.all_sites_checked_hour,\n      })\n\n      // Get all issues for this portfolio by this user within the date range\n      const portfolioIssues = filteredIssues.filter(issue => {\n        if (issue.portfolio_id !== portfolio.id) return false\n        \n        // Check if issue is by this user\n        const issueMonitoredBy = Array.isArray(issue.monitored_by) \n          ? issue.monitored_by[0] \n          : issue.monitored_by\n        if (!issueMonitoredBy || issueMonitoredBy.toLowerCase() !== userEmail.toLowerCase()) {\n          return false\n        }\n        \n        // Check if issue date is within range\n        if (issue.created_at) {\n          const issueDateStr = new Date(issue.created_at).toISOString().split('T')[0]\n          if (normalizedFromDate && issueDateStr < normalizedFromDate) return false\n          if (normalizedToDate && issueDateStr > normalizedToDate) return false\n        }\n        \n        return true\n      })\n\n      // Get completion hour from portfolio record\n      const completionHour = portfolio.all_sites_checked_hour ?? 0\n\n      console.log('Coverage Matrix Debug - Portfolio issues found:', {\n        portfolioId: portfolio.id,\n        portfolioName: portfolio.name,\n        userEmail,\n        issuesFound: portfolioIssues.length,\n        completionHour,\n        issueHours: portfolioIssues.map(i => i.issue_hour),\n        allIssuesForPortfolio: portfolioIssues.map(i => ({\n          id: i.id,\n          hour: i.issue_hour,\n          monitoredBy: i.monitored_by,\n          created_at: i.created_at,\n        })),\n      })\n\n      // Initialize user in map if not exists\n      if (!userMap[userEmail]) {\n        userMap[userEmail] = {\n          userName: userEmail,\n          displayName,\n          email: userEmail,\n          totalPortfolios: 0,\n          hours: {},\n        }\n      }\n\n      // If there are issues, group by hour and count each hour separately\n      // ALWAYS use issue hour when issues exist, not completion hour\n      if (portfolioIssues.length > 0) {\n        // Group issues by hour - each hour represents a distinct work session/completion\n        const issuesByHour: { [hour: number]: typeof portfolioIssues } = {}\n        portfolioIssues.forEach(issue => {\n          const hour = issue.issue_hour ?? 0\n          if (!issuesByHour[hour]) {\n            issuesByHour[hour] = []\n          }\n          issuesByHour[hour].push(issue)\n        })\n\n        console.log('âœ… Coverage Matrix - Counting portfolio by issue hours:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          userEmail,\n          displayName,\n          issuesByHourKeys: Object.keys(issuesByHour),\n          completionHour, // This might be different from issue hours\n          totalIssues: portfolioIssues.length,\n        })\n\n        // Count each hour with issues as a separate portfolio completion\n        Object.keys(issuesByHour).forEach(hourStr => {\n          const hour = parseInt(hourStr)\n          \n          // Check hour filter\n          if (hourFilter !== 'all' && hour !== parseInt(hourFilter)) {\n            console.log('â­ï¸ Coverage Matrix - Skipping hour (filtered out):', { hour, hourFilter })\n            return\n          }\n\n          // Initialize hour if not exists\n          if (!userMap[userEmail].hours[hour]) {\n            userMap[userEmail].hours[hour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: [],\n            }\n          }\n\n          // Add portfolio completion - use unique key: portfolioId_date_hour\n          // This allows the same portfolio to be counted multiple times if completed at different hours\n          // IMPORTANT: Use issue hour, not completion hour, because that's when the work was actually done\n          const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${hour}`\n          const wasAdded = userMap[userEmail].hours[hour].portfolios.has(portfolioKey)\n          userMap[userEmail].hours[hour].portfolios.add(portfolioKey)\n          \n          console.log('âœ… Coverage Matrix - Added portfolio to hour:', {\n            portfolioId: portfolio.id,\n            portfolioName: portfolio.name,\n            userEmail,\n            displayName,\n            hour,\n            portfolioKey,\n            wasAlreadyAdded: wasAdded,\n            totalPortfoliosInThisHour: userMap[userEmail].hours[hour].portfolios.size,\n          })\n        })\n      } else {\n        // No issues found, but portfolio is completed - count using completion hour\n        // This is a fallback for portfolios completed without issues logged\n        console.log('âš ï¸ Coverage Matrix - No issues found, using completion hour:', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          userEmail,\n          displayName,\n          completionHour,\n          checkedDate: normalizedCheckedDate,\n        })\n        \n        // Check hour filter\n        if (hourFilter !== 'all' && completionHour !== parseInt(hourFilter)) {\n          console.log('â­ï¸ Coverage Matrix - Skipping completion hour (filtered out):', { completionHour, hourFilter })\n          return\n        }\n\n        // Initialize hour if not exists\n        if (!userMap[userEmail].hours[completionHour]) {\n          userMap[userEmail].hours[completionHour] = {\n            portfolios: new Set(),\n            issues: [],\n            activeIssues: [],\n          }\n        }\n\n        // Add portfolio completion - use unique key: portfolioId_date_hour\n        const portfolioKey = `${portfolio.id}_${normalizedCheckedDate}_${completionHour}`\n        const wasAdded = userMap[userEmail].hours[completionHour].portfolios.has(portfolioKey)\n        userMap[userEmail].hours[completionHour].portfolios.add(portfolioKey)\n        \n        console.log('âœ… Coverage Matrix - Added portfolio (no issues, using completion hour):', {\n          portfolioId: portfolio.id,\n          portfolioName: portfolio.name,\n          userEmail,\n          displayName,\n          completionHour,\n          portfolioKey,\n          wasAlreadyAdded: wasAdded,\n          totalPortfoliosInThisHour: userMap[userEmail].hours[completionHour].portfolios.size,\n        })\n      }\n    })\n\n    // Now process issues to count issues (not portfolios) per user per hour\n    filteredIssues.forEach((issue) => {\n      // Get monitored_by field (can be string or array)\n      let monitoredByEmails: string[] = []\n      if (issue.monitored_by) {\n        if (Array.isArray(issue.monitored_by)) {\n          monitoredByEmails = issue.monitored_by\n            .filter((email): email is string => typeof email === 'string')\n            .filter((email) => email.trim() !== '')\n        } else {\n          // Handle case where monitored_by might be a single string (though type says array)\n          const emailValue = String(issue.monitored_by).trim()\n          if (emailValue !== '') {\n            monitoredByEmails = [emailValue]\n          }\n        }\n      }\n\n      // Skip if no monitored_by field\n      if (monitoredByEmails.length === 0) {\n        return\n      }\n\n      // Check hour filter\n      if (hourFilter !== 'all' && issue.issue_hour !== undefined) {\n        const hour = parseInt(hourFilter)\n        if (issue.issue_hour !== hour) {\n          return\n        }\n      }\n\n      const hour = issue.issue_hour ?? 0\n\n      // Process each user in monitored_by\n      monitoredByEmails.forEach((monitoredByEmail) => {\n        // Normalize email: trim whitespace and convert to lowercase\n        const normalizedMonitoredEmail = String(monitoredByEmail).trim().toLowerCase()\n        \n        // Find user by email (case-insensitive match with trimmed whitespace)\n        const user = users.find((u) => {\n          if (!u.email) return false\n          const normalizedUserEmail = String(u.email).trim().toLowerCase()\n          return normalizedUserEmail === normalizedMonitoredEmail\n        })\n        \n        if (!user) {\n          // User not found by email - this could be a deleted user or data inconsistency\n          // Use the email as a fallback identifier\n          const fallbackEmail = normalizedMonitoredEmail.includes('@') \n            ? normalizedMonitoredEmail \n            : `unknown-${normalizedMonitoredEmail}@deleted.user`\n          const fallbackDisplayName = normalizedMonitoredEmail.includes('@')\n            ? normalizedMonitoredEmail.split('@')[0]\n            : `Deleted User (${normalizedMonitoredEmail.substring(0, 8)})`\n          \n          console.warn(`âš ï¸ Coverage Matrix - User not found for email, using fallback: \"${monitoredByEmail}\"`, {\n            searchingFor: monitoredByEmail,\n            searchingForNormalized: normalizedMonitoredEmail,\n            fallbackEmail,\n            fallbackDisplayName,\n            issueDetails: {\n              issueId: issue.id,\n              portfolioId: issue.portfolio_id,\n              monitoredBy: issue.monitored_by,\n              hour: issue.issue_hour,\n            },\n          })\n          \n          // Use fallback values\n          const userEmail = fallbackEmail\n          const displayName = fallbackDisplayName\n          \n          // Initialize user in map if not exists\n          if (!userMap[userEmail]) {\n            userMap[userEmail] = {\n              userName: userEmail,\n              displayName,\n              email: userEmail,\n              totalPortfolios: 0,\n              hours: {},\n            }\n          }\n          \n          // Initialize hour if not exists\n          if (!userMap[userEmail].hours[hour]) {\n            userMap[userEmail].hours[hour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: [],\n            }\n          }\n          \n          // Add issues to track issue count (but don't count portfolios from issues)\n          userMap[userEmail].hours[hour].issues.push(issue)\n          if (issue.description && issue.description.toLowerCase() !== 'no issue') {\n            userMap[userEmail].hours[hour].activeIssues.push(issue)\n          }\n          \n          // Continue processing with fallback user (don't return)\n        } else {\n          // User found - process normally\n          const userEmail = user.email\n          const displayName = user.full_name || userEmail.split('@')[0] || 'Unknown'\n\n          // Initialize user in map if not exists\n          if (!userMap[userEmail]) {\n            userMap[userEmail] = {\n              userName: userEmail,\n              displayName,\n              email: userEmail,\n              totalPortfolios: 0,\n              hours: {},\n            }\n          }\n\n          // Initialize hour if not exists\n          if (!userMap[userEmail].hours[hour]) {\n            userMap[userEmail].hours[hour] = {\n              portfolios: new Set(),\n              issues: [],\n              activeIssues: [],\n            }\n          }\n\n          // Add issues to track issue count (includes both Yes and No issues)\n          // DO NOT count portfolios here - portfolios are only counted from \"All Sites Checked = Yes\" completions above\n          userMap[userEmail].hours[hour].issues.push(issue)\n          if (issue.description && issue.description.toLowerCase() !== 'no issue') {\n            userMap[userEmail].hours[hour].activeIssues.push(issue)\n          }\n        }\n      })\n    })\n\n    // Calculate total portfolios per user\n\n    // Calculate total portfolios per user\n    Object.values(userMap).forEach((user) => {\n      const allPortfolios = new Set<string>()\n      Object.values(user.hours).forEach((hourData) => {\n        hourData.portfolios.forEach((pid) => allPortfolios.add(pid))\n      })\n      user.totalPortfolios = allPortfolios.size\n    })\n\n    // Filter by user search\n    const filteredUsers = Object.values(userMap).filter((user) =>\n      user.displayName.toLowerCase().includes(userSearch.toLowerCase()) ||\n      user.userName.toLowerCase().includes(userSearch.toLowerCase())\n    )\n\n    // Detailed breakdown of what's in the userMap for debugging\n    const userMapDetails = Object.entries(userMap).map(([email, userData]) => {\n      const hourDetails: { [hour: string]: { portfolioKeys: string[], portfolioCount: number } } = {}\n      Object.entries(userData.hours).forEach(([hour, hourData]) => {\n        hourDetails[hour] = {\n          portfolioKeys: Array.from(hourData.portfolios),\n          portfolioCount: hourData.portfolios.size,\n        }\n      })\n      return {\n        email,\n        displayName: userData.displayName,\n        totalPortfolios: userData.totalPortfolios,\n        hours: hourDetails,\n      }\n    })\n\n    // Final summary log\n    console.log('ðŸ“Š Coverage Matrix - FINAL RESULTS:', {\n      totalUsers: filteredUsers.length,\n      usersWithData: filteredUsers.map(u => ({ \n        name: u.displayName, \n        portfolios: u.totalPortfolios, \n        email: u.email,\n        hoursWithData: Object.keys(u.hours).map(h => ({\n          hour: parseInt(h),\n          portfolioCount: u.hours[parseInt(h)].portfolios.size,\n        })),\n      })),\n      userMapDetails, // Detailed breakdown of what portfolios are counted for each user\n      allUsersInMap: Object.keys(userMap).map(email => ({\n        email,\n        displayName: userMap[email].displayName,\n        totalPortfolios: userMap[email].totalPortfolios,\n        hours: Object.keys(userMap[email].hours).map(h => ({\n          hour: h,\n          portfolioCount: userMap[email].hours[parseInt(h)].portfolios.size,\n          portfolioKeys: Array.from(userMap[email].hours[parseInt(h)].portfolios),\n        })),\n      })),\n      summary: {\n        totalCompletedPortfolios: completedPortfolios.length,\n        portfoliosInDateRange: completedPortfolios.filter(p => {\n          const checkedDate = p.all_sites_checked_date?.split('T')[0]\n          if (!checkedDate) return false\n          if (normalizedFromDate && checkedDate < normalizedFromDate) return false\n          if (normalizedToDate && checkedDate > normalizedToDate) return false\n          return true\n        }).length,\n        portfoliosWithMatchingUsers: completedPortfolios.filter(p => {\n          const checkedDate = p.all_sites_checked_date?.split('T')[0]\n          if (!checkedDate) return false\n          if (normalizedFromDate && checkedDate < normalizedFromDate) return false\n          if (normalizedToDate && checkedDate > normalizedToDate) return false\n          return users.some(u => u.id === p.all_sites_checked_by)\n        }).length,\n      },\n    })\n\n    return filteredUsers.sort((a, b) => b.totalPortfolios - a.totalPortfolios)\n  }, [filteredIssues, userSearch, fromDate, toDate, hourFilter, users, portfolios, usersLoading])\n\n  // Calculate max count for color coding\n  const maxCount = useMemo(() => {\n    let max = 0\n    matrixData.forEach((user) => {\n      Object.values(user.hours).forEach((hourData) => {\n        max = Math.max(max, hourData.portfolios.size)\n      })\n    })\n    return max\n  }, [matrixData])\n\n  // Get cell color class\n  const getCellColorClass = (count: number) => {\n    if (count === 0) {\n      return 'bg-white border border-gray-200 text-gray-400'\n    }\n    if (count >= 3) {\n      return 'bg-green-600 text-white font-semibold'\n    }\n    if (count >= 1) {\n      return 'bg-green-300 text-green-900 font-semibold'\n    }\n    return 'bg-white border border-gray-200 text-gray-400'\n  }\n\n  // Get cell info for tooltip\n  const getCellInfo = (userId: string, hour: number) => {\n    const user = matrixData.find((u) => u.userName === userId)\n    if (!user) return null\n\n    const hourData = user.hours[hour]\n    if (!hourData || hourData.portfolios.size === 0) return null\n\n    // Extract portfolio IDs from keys (format: portfolioId_date_hour)\n    const portfolioNames = Array.from(hourData.portfolios)\n      .map((portfolioKey) => {\n        // Extract portfolio ID from key (format: portfolioId_date_hour)\n        const portfolioId = portfolioKey.split('_')[0]\n        const portfolio = portfolios.find((p) => p.id === portfolioId)\n        return portfolio?.name || 'Unknown'\n      })\n      .filter((name) => name !== 'Unknown')\n\n    return {\n      userName: user.displayName,\n      hour,\n      totalCount: hourData.issues.length,\n      portfolios: portfolioNames,\n      portfolioCount: hourData.portfolios.size,\n    }\n  }\n\n  const handleCellMouseEnter = (\n    e: React.MouseEvent<HTMLTableCellElement>,\n    userId: string,\n    hour: number\n  ) => {\n    const rect = e.currentTarget.getBoundingClientRect()\n    setHoveredCell({\n      userId,\n      hour,\n      position: {\n        top: rect.top + rect.height / 2,\n        left: rect.left + rect.width / 2,\n      },\n    })\n  }\n\n  const handleCellMouseLeave = () => {\n    setHoveredCell(null)\n  }\n\n  const handleQuickRange = (range: 'today' | 'yesterday' | 'week' | 'month') => {\n    const today = new Date()\n    const formatDate = (date: Date) => date.toISOString().split('T')[0]\n\n    if (range === 'today') {\n      setFromDate(formatDate(today))\n      setToDate(formatDate(today))\n    } else if (range === 'yesterday') {\n      const yesterday = new Date(today)\n      yesterday.setDate(yesterday.getDate() - 1)\n      setFromDate(formatDate(yesterday))\n      setToDate(formatDate(yesterday))\n    } else if (range === 'week') {\n      const weekAgo = new Date(today)\n      weekAgo.setDate(today.getDate() - 7)\n      setFromDate(formatDate(weekAgo))\n      setToDate(formatDate(today))\n    } else if (range === 'month') {\n      const monthAgo = new Date(today)\n      monthAgo.setMonth(today.getMonth() - 1)\n      setFromDate(formatDate(monthAgo))\n      setToDate(formatDate(today))\n    }\n  }\n\n  const handleResetFilters = () => {\n    setUserSearch('')\n    setHourFilter('all')\n    setIssueFilter('all')\n    const today = new Date()\n    setFromDate(today.toISOString().split('T')[0])\n    setToDate(today.toISOString().split('T')[0])\n  }\n\n  const handleExportMatrix = () => {\n    const csvRows = [\n      ['User / Hour', ...Array.from({ length: 24 }, (_, i) => `${i}:00`), 'Total'],\n      ...matrixData.map((user) => {\n        const row = [`${user.displayName} (${user.totalPortfolios} portfolios summary)`]\n        let total = 0\n        for (let hour = 0; hour < 24; hour++) {\n          const count = user.hours[hour]?.portfolios.size || 0\n          row.push(count.toString())\n          total += count\n        }\n        row.push(total.toString())\n        return row\n      }),\n      [\n        'Hour Totals',\n        ...Array.from({ length: 24 }, (_, hour) => {\n          const count = matrixData.reduce(\n            (sum, user) => sum + (user.hours[hour]?.portfolios.size || 0),\n            0\n          )\n          return count.toString()\n        }),\n        matrixData.reduce((sum, user) => {\n          return sum + Object.values(user.hours).reduce((s, h) => s + h.portfolios.size, 0)\n        }, 0).toString(),\n      ],\n    ]\n\n    const csvContent = csvRows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n')\n    const blob = new Blob([csvContent], { type: 'text/csv' })\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `coverage_matrix_${new Date().toISOString().split('T')[0]}.csv`\n    a.click()\n    window.URL.revokeObjectURL(url)\n    toast.success('Coverage matrix exported successfully')\n  }\n\n  const handleExportChartData = () => {\n    const csvRows = [\n      ['User', 'Total Portfolios Monitored'],\n      ...userCoverageData.map((u) => [u.userName, u.totalPortfolios.toString()]),\n    ]\n\n    const csvContent = csvRows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n')\n    const blob = new Blob([csvContent], { type: 'text/csv' })\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `user_coverage_performance_${new Date().toISOString().split('T')[0]}.csv`\n    a.click()\n    window.URL.revokeObjectURL(url)\n    toast.success('Chart data exported successfully')\n  }\n\n  // Calculate user coverage for chart - Show ALL users\n  const userCoverageData = useMemo(() => {\n    return matrixData\n      .map((user) => ({\n        userName: user.displayName,\n        totalPortfolios: user.totalPortfolios,\n        userData: user,\n      }))\n      .sort((a, b) => b.totalPortfolios - a.totalPortfolios)\n  }, [matrixData])\n\n  // Handle chart bar click\n  const handleChartClick = (event: any, elements: any[]) => {\n    // If a bar was clicked\n    if (elements && elements.length > 0) {\n      const clickedElement = elements[0]\n      const dataIndex = clickedElement.index\n      const clickedUser = userCoverageData[dataIndex]\n      if (clickedUser && clickedUser.userData) {\n        setSelectedUser(clickedUser.userData)\n      }\n    }\n  }\n\n  const chartData = {\n    labels: userCoverageData.map((u) => u.userName),\n    datasets: [\n      {\n        label: 'Total Portfolios Monitored',\n        data: userCoverageData.map((u) => u.totalPortfolios),\n        backgroundColor: userCoverageData.map((_, idx) =>\n          idx < 3 ? 'rgba(34, 197, 94, 0.9)' : 'rgba(34, 197, 94, 0.5)'\n        ),\n        borderColor: userCoverageData.map((_, idx) =>\n          idx < 3 ? 'rgba(34, 197, 94, 1)' : 'rgba(34, 197, 94, 0.7)'\n        ),\n        borderWidth: 1,\n        barThickness: 30,\n        maxBarThickness: 40,\n      },\n    ],\n  }\n\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    onClick: handleChartClick,\n    onHover: (event: any, elements: any[]) => {\n      // Change cursor to pointer when hovering over bars\n      if (elements && elements.length > 0) {\n        event.native.target.style.cursor = 'pointer'\n      } else {\n        event.native.target.style.cursor = 'default'\n      }\n    },\n    plugins: {\n      legend: {\n        display: false,\n      },\n      tooltip: {\n        callbacks: {\n          label: (context: any) => {\n            const user = userCoverageData[context.dataIndex]\n            return `${user.userName}: ${user.totalPortfolios} portfolios`\n          },\n        },\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 2,\n          max: 8,\n        },\n        title: {\n          display: true,\n          text: 'Total Portfolios Mon',\n        },\n      },\n      x: {\n        ticks: {\n          maxRotation: 45,\n          minRotation: 45,\n        },\n      },\n    },\n  }\n\n  const cellInfo = hoveredCell ? getCellInfo(hoveredCell.userId, hoveredCell.hour) : null\n\n  // Calculate totals for summary\n  const totalCoverage = useMemo(() => {\n    const allPortfolios = new Set<string>()\n    matrixData.forEach((user) => {\n      Object.values(user.hours).forEach((hourData) => {\n        hourData.portfolios.forEach((pid) => allPortfolios.add(pid))\n      })\n    })\n    return {\n      portfolios: allPortfolios.size,\n      users: matrixData.length,\n      hours: 24,\n    }\n  }, [matrixData])\n\n  // Get user performance details\n  const getUserPerformanceDetails = (user: UserMatrixData) => {\n    const allPortfolios = new Set<string>()\n    const allIssues = new Set<string>()\n    const activeIssues: Issue[] = []\n    const missedAlerts: Issue[] = []\n    const hourlyBreakdown: { hour: number; portfolios: number; issues: number; activeIssues: number }[] = []\n\n    Object.entries(user.hours).forEach(([hourStr, hourData]) => {\n      const hour = parseInt(hourStr)\n      hourData.portfolios.forEach((pid) => allPortfolios.add(pid))\n      hourData.issues.forEach((issue) => allIssues.add(issue.id))\n      activeIssues.push(...hourData.activeIssues)\n      hourData.issues.forEach((issue) => {\n        if (issue.missed_by && issue.missed_by.length > 0) {\n          missedAlerts.push(issue)\n        }\n      })\n\n      hourlyBreakdown.push({\n        hour,\n        portfolios: hourData.portfolios.size,\n        issues: hourData.issues.length,\n        activeIssues: hourData.activeIssues.length,\n      })\n    })\n\n    hourlyBreakdown.sort((a, b) => a.hour - b.hour)\n\n    const portfolioNames = Array.from(allPortfolios)\n      .map((portfolioKey) => {\n        // Extract portfolio ID from key (format: portfolioId_date_hour)\n        const portfolioId = portfolioKey.split('_')[0]\n        const portfolio = portfolios.find((p) => p.id === portfolioId)\n        if (!portfolio) return null\n        // Format: \"Portfolio Name (Site Range)\" if site_range exists\n        if (portfolio.site_range) {\n          return `${portfolio.name} (${portfolio.site_range})`\n        }\n        return portfolio.name\n      })\n      .filter((name) => name) as string[]\n\n    const healthySites = allIssues.size - activeIssues.length\n\n    return {\n      totalCount: allIssues.size,\n      activeIssues: activeIssues.length,\n      healthySites,\n      missedAlerts: missedAlerts.length,\n      totalPortfoliosMonitored: allPortfolios.size,\n      monitoringActiveHours: Object.keys(user.hours).length,\n      portfolios: portfolioNames,\n      hourlyBreakdown,\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Date Filters Section - At Top (No Banner, Just Filters) */}\n      <div>\n        {/* Filter Card */}\n        <Card>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n              <div className=\"relative\">\n                <svg\n                  className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                  />\n                </svg>\n                <input\n                  type=\"text\"\n                  value={userSearch}\n                  onChange={(e) => setUserSearch(e.target.value)}\n                  placeholder=\"Type user name...\"\n                  className=\"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div>\n                <select\n                  value={hourFilter}\n                  onChange={(e) => setHourFilter(e.target.value)}\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"all\">All Hours</option>\n                  {Array.from({ length: 24 }, (_, i) => (\n                    <option key={i} value={i.toString()}>\n                      {i}:00\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <select\n                  value={issueFilter}\n                  onChange={(e) => setIssueFilter(e.target.value as 'all' | 'active')}\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"all\">All Issues (Coverage)</option>\n                  <option value=\"active\">Active Issues Only</option>\n                </select>\n              </div>\n\n              <div className=\"relative\">\n                <input\n                  type=\"date\"\n                  value={fromDate}\n                  onChange={(e) => setFromDate(e.target.value)}\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n                <svg\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                  />\n                </svg>\n              </div>\n\n              <div className=\"relative\">\n                <input\n                  type=\"date\"\n                  value={toDate}\n                  onChange={(e) => setToDate(e.target.value)}\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n                <svg\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                  />\n                </svg>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"text-sm font-medium text-gray-700\">Quick Range:</span>\n              <button\n                onClick={() => handleQuickRange('today')}\n                className={`px-3 py-1.5 text-sm rounded-md transition-all ${\n                  fromDate === toDate && fromDate === new Date().toISOString().split('T')[0]\n                    ? 'bg-green-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                Today\n              </button>\n              <button\n                onClick={() => handleQuickRange('yesterday')}\n                className=\"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              >\n                Yesterday\n              </button>\n              <button\n                onClick={() => handleQuickRange('week')}\n                className=\"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              >\n                Week\n              </button>\n              <button\n                onClick={() => handleQuickRange('month')}\n                className=\"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              >\n                Month\n              </button>\n              <Button variant=\"secondary\" size=\"sm\" onClick={handleResetFilters}>\n                Reset All Filters\n              </Button>\n            </div>\n          </div>\n        </Card>\n      </div>\n\n      {/* User Coverage Performance Section - Below Filters */}\n      <div>\n        {/* Green Banner */}\n        <div className=\"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\">\n          <h2 className=\"text-3xl font-bold mb-1\">User Coverage Performance</h2>\n          <p className=\"text-green-100 text-sm\">\n            Top performers by portfolio coverage. Chart shows users who have monitored portfolios based on issues logged with \"Monitored By\" field.\n          </p>\n        </div>\n\n        {/* Chart Card */}\n        <Card className=\"rounded-t-none\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"relative flex-1 max-w-md\">\n              <svg\n                className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                />\n              </svg>\n              <input\n                type=\"text\"\n                placeholder=\"Search user by name...\"\n                className=\"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <Button\n              variant=\"primary\"\n              size=\"sm\"\n              onClick={handleExportChartData}\n              style={{ backgroundColor: '#76ab3f' }}\n              disabled={userCoverageData.length === 0}\n            >\n              Export Chart Data\n            </Button>\n          </div>\n\n          {userCoverageData.length > 0 ? (\n            <>\n              <div style={{ height: '400px', position: 'relative', cursor: 'pointer' }}>\n                <Bar data={chartData} options={chartOptions} />\n              </div>\n              <p className=\"text-xs text-gray-500 text-center mt-2\">\n                Click on any bar to view detailed performance metrics\n              </p>\n              <div className=\"flex items-center justify-center gap-4 mt-4 text-xs\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 bg-green-600 rounded-full\"></div>\n                  <span className=\"text-gray-600\">Top 3 Performers</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 bg-green-300 rounded-full\"></div>\n                  <span className=\"text-gray-600\">Other Users</span>\n                </div>\n              </div>\n            </>\n          ) : (\n            <div className=\"text-center py-12\">\n              <div className=\"text-gray-500 mb-2 font-medium\">No data available for chart</div>\n              <div className=\"text-sm text-gray-400 mt-2\">\n                <p className=\"mb-1\">The chart requires:</p>\n                <ul className=\"list-disc list-inside space-y-1 text-left max-w-md mx-auto\">\n                  <li>Issues logged within the selected date range ({fromDate} to {toDate})</li>\n                  <li>Issues with \"Monitored By\" field populated</li>\n                  <li>At least one user who has monitored portfolios</li>\n                </ul>\n                <p className=\"mt-3 text-xs\">\n                  Try adjusting your date range or check if issues have the \"Monitored By\" field filled in.\n                </p>\n                <p className=\"mt-2 text-xs text-gray-500\">\n                  Total issues: {allIssues.length} | Filtered issues: {filteredIssues.length}\n                </p>\n              </div>\n            </div>\n          )}\n        </Card>\n      </div>\n\n      {/* Coverage Matrix Table - Below User Coverage Performance Chart */}\n      <div>\n        {/* Green Banner */}\n        <div className=\"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\">\n          <h2 className=\"text-3xl font-bold mb-1\">Coverage Matrix</h2>\n          <p className=\"text-green-100 text-sm\">\n            Track how many portfolios each user covered in each hour. Hover over cells to see portfolio details and issues with 'Yes'.\n          </p>\n        </div>\n\n        <Card className=\"rounded-t-none\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                {totalCoverage.portfolios} portfolio coverage(s) across {totalCoverage.users} user(s) â€¢ {totalCoverage.hours} hours\n              </p>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center gap-4 text-xs\">\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-green-600 rounded\"></div>\n                  <span className=\"text-gray-600\">High coverage</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-green-300 rounded\"></div>\n                  <span className=\"text-gray-600\">Medium coverage</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-3 h-3 bg-white border border-gray-200 rounded\"></div>\n                  <span className=\"text-gray-600\">No coverage</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase sticky left-0 bg-gray-50 z-10 border-r border-gray-200\">\n                    User / Hour\n                  </th>\n                  {Array.from({ length: 24 }, (_, i) => (\n                    <th\n                      key={i}\n                      className=\"px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase min-w-[60px]\"\n                    >\n                      {i}:00\n                    </th>\n                  ))}\n                  <th className=\"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase bg-gray-100 border-l border-gray-200\">\n                    Total Portfolios\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {matrixData.length === 0 ? (\n                  <tr>\n                    <td colSpan={26} className=\"px-4 py-8 text-center\">\n                      <div className=\"space-y-2\">\n                        <p className=\"text-gray-500 font-medium\">No data available</p>\n                        <div className=\"text-xs text-gray-400 space-y-1\">\n                          <p>Possible reasons:</p>\n                          <ul className=\"list-disc list-inside space-y-0.5 text-left max-w-md mx-auto\">\n                            <li>No issues found in the selected date range ({fromDate} to {toDate})</li>\n                            <li>Issues don't have \"Monitored By\" field populated</li>\n                            <li>User emails in \"Monitored By\" don't match any users in the system</li>\n                            <li>Try adjusting the date range or checking the browser console for details</li>\n                          </ul>\n                          <p className=\"mt-2 text-gray-500\">\n                            Total issues: {allIssues.length} | Filtered issues: {filteredIssues.length}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n                ) : (\n                  <>\n                    {matrixData.map((row) => {\n                      return (\n                        <tr key={row.userName} className=\"hover:bg-gray-50\">\n                          <td\n                            className=\"px-4 py-3 text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 border-r border-gray-200 cursor-pointer hover:text-blue-600\"\n                            onClick={() => setSelectedUser(row)}\n                          >\n                            {row.displayName} ({row.totalPortfolios} portfolios summary)\n                          </td>\n                          {Array.from({ length: 24 }, (_, hour) => {\n                            const count = row.hours[hour]?.portfolios.size || 0\n                            return (\n                              <td\n                                key={hour}\n                                className={`px-2 py-3 text-center text-xs font-semibold cursor-pointer transition-colors ${getCellColorClass(\n                                  count\n                                )}`}\n                                onMouseEnter={(e) => handleCellMouseEnter(e, row.userName, hour)}\n                                onMouseLeave={handleCellMouseLeave}\n                              >\n                                {count > 0 ? count : ''}\n                              </td>\n                            )\n                          })}\n                          <td className=\"px-4 py-3 text-center text-sm font-bold text-gray-900 bg-gray-100 border-l border-gray-200\">\n                            {row.totalPortfolios}\n                          </td>\n                        </tr>\n                      )\n                    })}\n                    {/* Hour Totals Row */}\n                    <tr className=\"bg-gray-100 font-bold\">\n                      <td className=\"px-4 py-3 text-sm text-gray-900 sticky left-0 bg-gray-100 z-10 border-r border-gray-200\">\n                        Hour Totals\n                      </td>\n                      {Array.from({ length: 24 }, (_, hour) => {\n                        const count = matrixData.reduce(\n                          (sum, user) => sum + (user.hours[hour]?.portfolios.size || 0),\n                          0\n                        )\n                        return (\n                          <td key={hour} className=\"px-2 py-3 text-center text-xs text-gray-900\">\n                            {count > 0 ? count : ''}\n                          </td>\n                        )\n                      })}\n                      <td className=\"px-4 py-3 text-center text-sm text-gray-900 bg-gray-200 border-l border-gray-200\">\n                        {matrixData.reduce((sum, user) => sum + user.totalPortfolios, 0)}\n                      </td>\n                    </tr>\n                  </>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </Card>\n      </div>\n\n      {/* Hover Tooltip */}\n      {hoveredCell && cellInfo && (\n        <div\n          className=\"fixed z-[9999] w-80 bg-blue-900 text-white text-xs rounded-lg shadow-xl p-4 pointer-events-none\"\n          style={{\n            top: `${hoveredCell.position.top}px`,\n            left: `${hoveredCell.position.left}px`,\n            transform: 'translate(-50%, -100%)',\n            marginTop: '-10px',\n          }}\n        >\n          <div className=\"font-bold text-sm mb-2 pb-2 border-b border-blue-700\">\n            {cellInfo.userName} - Hour {cellInfo.hour}:00\n          </div>\n          <div className=\"mb-2\">\n            <div className=\"font-semibold text-blue-300\">\n              Total Count (All Issues): {cellInfo.totalCount}\n            </div>\n          </div>\n          <div>\n            <div className=\"font-semibold text-green-300 mb-1\">\n              Total Portfolios Monitored ({cellInfo.portfolioCount}):\n            </div>\n            <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n              {cellInfo.portfolios.map((portfolio, idx) => (\n                <div key={idx} className=\"text-blue-100 pl-2\">\n                  â€¢ {portfolio}\n                </div>\n              ))}\n            </div>\n          </div>\n          <div\n            className=\"absolute left-1/2 transform -translate-x-1/2 top-full border-4 border-transparent border-t-blue-900\"\n            style={{ marginTop: '-1px' }}\n          ></div>\n        </div>\n      )}\n\n      {/* Action Buttons */}\n      <div className=\"flex items-center justify-end gap-2\">\n        <Button variant=\"secondary\" size=\"sm\" onClick={() => setShowCharts(!showCharts)}>\n          {showCharts ? 'Hide Charts' : 'Show Charts'}\n        </Button>\n        <Button variant=\"primary\" size=\"sm\" onClick={handleExportMatrix} style={{ backgroundColor: '#76ab3f' }}>\n          Export Matrix\n        </Button>\n      </div>\n\n      {/* User Performance Details Modal */}\n      {selectedUser && (\n        <UserPerformanceModal\n          user={selectedUser}\n          onClose={() => setSelectedUser(null)}\n          getUserPerformanceDetails={getUserPerformanceDetails}\n        />\n      )}\n    </div>\n  )\n}\n\ninterface UserPerformanceModalProps {\n  user: UserMatrixData\n  onClose: () => void\n  getUserPerformanceDetails: (user: UserMatrixData) => {\n    totalCount: number\n    activeIssues: number\n    healthySites: number\n    missedAlerts: number\n    totalPortfoliosMonitored: number\n    monitoringActiveHours: number\n    portfolios: string[]\n    hourlyBreakdown: { hour: number; portfolios: number; issues: number; activeIssues: number }[]\n  }\n}\n\nconst UserPerformanceModal: React.FC<UserPerformanceModalProps> = ({\n  user,\n  onClose,\n  getUserPerformanceDetails,\n}) => {\n  const details = getUserPerformanceDetails(user)\n\n  const hourlyChartData = {\n    labels: details.hourlyBreakdown.map((h) => h.hour.toString()),\n    datasets: [\n      {\n        label: 'Portfolios',\n        data: details.hourlyBreakdown.map((h) => h.portfolios),\n        backgroundColor: 'rgba(34, 197, 94, 0.9)',\n        borderColor: 'rgba(34, 197, 94, 1)',\n        borderWidth: 1,\n        barThickness: 25,\n        maxBarThickness: 30,\n      },\n      {\n        label: 'Issues',\n        data: details.hourlyBreakdown.map((h) => h.issues),\n        backgroundColor: 'rgba(59, 130, 246, 0.9)',\n        borderColor: 'rgba(59, 130, 246, 1)',\n        borderWidth: 1,\n        barThickness: 25,\n        maxBarThickness: 30,\n      },\n      {\n        label: 'Active Issues',\n        data: details.hourlyBreakdown.map((h) => h.activeIssues),\n        backgroundColor: 'rgba(239, 68, 68, 0.9)',\n        borderColor: 'rgba(239, 68, 68, 1)',\n        borderWidth: 1,\n        barThickness: 25,\n        maxBarThickness: 30,\n      },\n    ],\n  }\n\n  const hourlyChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    datasets: {\n      bar: {\n        categoryPercentage: 0.6, // Controls the width of the category (group of bars) - smaller = more gap\n        barPercentage: 0.8, // Controls the width of individual bars within the category - smaller = more gap between bars\n      },\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'bottom' as const,\n        labels: {\n          font: {\n            size: 12,\n            weight: 'bold' as const,\n          },\n          padding: 15,\n        },\n      },\n      tooltip: {\n        enabled: true,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        titleFont: {\n          size: 14,\n          weight: 'bold' as const,\n        },\n        bodyFont: {\n          size: 13,\n          weight: 'normal' as const,\n        },\n        padding: 12,\n        displayColors: true,\n        callbacks: {\n          title: () => {\n            return ''\n          },\n          label: (context: any) => {\n            const label = context.dataset.label || ''\n            const value = context.parsed.y || 0\n            return `${label} : ${value}`\n          },\n          beforeBody: (tooltipItems: any[]) => {\n            // Calculate total count (sum of all values for this hour)\n            const totalCount = tooltipItems.reduce((sum: number, item: any) => sum + (item.parsed.y || 0), 0)\n            return [totalCount.toString()]\n          },\n        },\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 0.5,\n          max: 2,\n          font: {\n            size: 11,\n            weight: 'bold' as const,\n          },\n        },\n        title: {\n          display: true,\n          text: 'Count',\n          font: {\n            size: 12,\n            weight: 'bold' as const,\n          },\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.05)',\n        },\n      },\n      x: {\n        ticks: {\n          font: {\n            size: 11,\n            weight: 'bold' as const,\n          },\n        },\n        title: {\n          display: true,\n          text: 'Hour',\n          font: {\n            size: 12,\n            weight: 'bold' as const,\n          },\n        },\n        grid: {\n          display: false,\n        },\n      },\n    },\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\" onClick={onClose}>\n      <div className=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\n        <div className=\"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\" onClick={onClose}></div>\n\n        <div\n          className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle max-w-4xl w-full\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Green Header */}\n          <div className=\"bg-green-600 text-white px-6 py-5 rounded-t-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-2xl font-bold text-white tracking-tight\">User Performance Details</h3>\n                <p className=\"text-white text-base mt-1.5 font-medium\">{user.displayName}</p>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"text-white hover:text-gray-200 transition-colors p-1\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"px-8 py-7 bg-white\">\n            <div className=\"space-y-6\">\n              {/* Top Row - 4 Metric Cards */}\n              <div className=\"grid grid-cols-4 gap-4\">\n                <div className=\"bg-blue-50 rounded-lg p-5 border border-blue-200 shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"text-3xl font-bold text-blue-600 mb-2 tracking-tight leading-none\">{details.totalCount}</div>\n                  <div className=\"text-xs font-semibold text-gray-700 tracking-wide\">Total Count</div>\n                </div>\n                <div className=\"bg-red-50 rounded-lg p-5 border border-red-200 shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"text-3xl font-bold text-red-600 mb-2 tracking-tight leading-none\">{details.activeIssues}</div>\n                  <div className=\"text-xs font-semibold text-gray-700 tracking-wide\">Active Issues</div>\n                </div>\n                <div className=\"bg-green-50 rounded-lg p-5 border border-green-200 shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"text-3xl font-bold text-green-600 mb-2 tracking-tight leading-none\">{details.healthySites}</div>\n                  <div className=\"text-xs font-semibold text-gray-700 tracking-wide\">Healthy Sites</div>\n                </div>\n                <div className=\"bg-orange-50 rounded-lg p-5 border border-orange-200 shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"text-3xl font-bold text-orange-600 mb-2 tracking-tight leading-none\">{details.missedAlerts}</div>\n                  <div className=\"text-xs font-semibold text-gray-700 tracking-wide\">Missed Alerts</div>\n                </div>\n              </div>\n\n              {/* Middle Row - 2 Larger Cards */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"bg-purple-50 rounded-lg p-6 border border-purple-200 shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"text-3xl font-bold text-purple-600 mb-2 tracking-tight leading-none\">{details.totalPortfoliosMonitored}</div>\n                  <div className=\"text-xs font-semibold text-gray-700 tracking-wide\">Total Portfolios Monitored</div>\n                </div>\n                <div className=\"bg-blue-50 rounded-lg p-6 border border-blue-200 shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"text-3xl font-bold text-blue-600 mb-2 tracking-tight leading-none\">{details.monitoringActiveHours}</div>\n                  <div className=\"text-xs font-semibold text-gray-700 tracking-wide\">Monitoring Active Hours</div>\n                </div>\n              </div>\n\n              {/* Total Portfolios Monitored */}\n              {details.portfolios.length > 0 && (\n                <div>\n                  <h4 className=\"text-xl font-bold text-gray-900 mb-4 tracking-tight\">\n                    Total Portfolios Monitored ({details.portfolios.length})\n                  </h4>\n                  <div className=\"flex flex-wrap gap-3\">\n                    {details.portfolios.map((portfolio, idx) => {\n                      // Extract portfolio name and site range if available\n                      const portfolioMatch = portfolio.match(/^(.+?)\\s*\\((.+)\\)$/)\n                      const portfolioName = portfolioMatch ? portfolioMatch[1] : portfolio\n                      const siteRange = portfolioMatch ? portfolioMatch[2] : null\n                      \n                      return (\n                        <span\n                          key={idx}\n                          className=\"px-4 py-2.5 bg-green-100 text-green-800 rounded-lg text-sm font-semibold border border-green-300 shadow-sm hover:shadow-md transition-shadow\"\n                        >\n                          {portfolioName}\n                          {siteRange && <span className=\"text-green-700 font-normal ml-1\">({siteRange})</span>}\n                        </span>\n                      )\n                    })}\n                  </div>\n                </div>\n              )}\n\n              {/* Hourly Breakdown Chart */}\n              {details.hourlyBreakdown.length > 0 && (\n                <div>\n                  <h4 className=\"text-xl font-bold text-gray-900 mb-4 tracking-tight\">Hourly Breakdown</h4>\n                  <div style={{ height: '300px' }}>\n                    <Bar data={hourlyChartData} options={hourlyChartOptions} />\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex justify-end pt-6 border-t border-gray-200\">\n                <Button \n                  variant=\"primary\" \n                  onClick={onClose} \n                  style={{ backgroundColor: '#76ab3f' }}\n                  className=\"px-6 py-2.5 font-semibold text-white rounded-lg shadow-sm hover:shadow-md transition-shadow\"\n                >\n                  Close\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CoverageMatrix\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}