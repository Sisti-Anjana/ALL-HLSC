{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LibsysAdmin\\\\OneDrive - Libsys IT Services Private Limited\\\\Desktop\\\\ALLLL HLSC\\\\client\\\\src\\\\components\\\\analytics\\\\CoverageMatrix.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { issueService } from '../../services/issueService';\nimport { portfolioService } from '../../services/portfolioService';\nimport { useAuth } from '../../context/AuthContext';\nimport Card from '../common/Card';\nimport Button from '../common/Button';\nimport Modal from '../common/Modal';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst CoverageMatrix = () => {\n  _s();\n  const {\n    user: currentUser\n  } = useAuth();\n  const [userSearch, setUserSearch] = useState('');\n  const [hourFilter, setHourFilter] = useState('all');\n  const [issueFilter, setIssueFilter] = useState('all');\n  const [fromDate, setFromDate] = useState(() => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  });\n  const [toDate, setToDate] = useState(() => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  });\n  const [showCharts, setShowCharts] = useState(true);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [hoveredCell, setHoveredCell] = useState(null);\n\n  // Fetch portfolios\n  const {\n    data: portfolios = []\n  } = useQuery({\n    queryKey: ['portfolios'],\n    queryFn: portfolioService.getAll\n  });\n\n  // Fetch issues\n  const {\n    data: allIssues = []\n  } = useQuery({\n    queryKey: ['issues'],\n    queryFn: () => issueService.getAll({})\n  });\n\n  // Filter issues by date range\n  const filteredIssues = useMemo(() => {\n    let filtered = allIssues;\n    if (fromDate && toDate) {\n      const start = new Date(fromDate);\n      start.setHours(0, 0, 0, 0);\n      const end = new Date(toDate);\n      end.setHours(23, 59, 59, 999);\n      filtered = filtered.filter(issue => {\n        const issueDate = new Date(issue.created_at);\n        return issueDate >= start && issueDate <= end;\n      });\n    }\n\n    // Issue filter\n    if (issueFilter === 'active') {\n      filtered = filtered.filter(issue => issue.description && issue.description.toLowerCase() !== 'no issue');\n    }\n\n    // Hour filter\n    if (hourFilter !== 'all') {\n      const hour = parseInt(hourFilter);\n      filtered = filtered.filter(issue => issue.issue_hour === hour);\n    }\n    return filtered;\n  }, [allIssues, fromDate, toDate, issueFilter, hourFilter]);\n\n  // Build matrix data - portfolios monitored per user per hour\n  const matrixData = useMemo(() => {\n    const userMap = {};\n    filteredIssues.forEach(issue => {\n      var _issue$monitored_by;\n      const monitoredBy = ((_issue$monitored_by = issue.monitored_by) === null || _issue$monitored_by === void 0 ? void 0 : _issue$monitored_by[0]) || 'Unknown';\n      const username = monitoredBy.split('@')[0];\n      const displayName = username || 'Unknown';\n      if (!userMap[monitoredBy]) {\n        userMap[monitoredBy] = {\n          userName: monitoredBy,\n          displayName,\n          email: monitoredBy,\n          totalPortfolios: 0,\n          hours: {}\n        };\n      }\n      const hour = issue.issue_hour;\n      if (!userMap[monitoredBy].hours[hour]) {\n        userMap[monitoredBy].hours[hour] = {\n          portfolios: new Set(),\n          issues: [],\n          activeIssues: []\n        };\n      }\n      userMap[monitoredBy].hours[hour].portfolios.add(issue.portfolio_id);\n      userMap[monitoredBy].hours[hour].issues.push(issue);\n      if (issue.description && issue.description.toLowerCase() !== 'no issue') {\n        userMap[monitoredBy].hours[hour].activeIssues.push(issue);\n      }\n    });\n\n    // Calculate total portfolios per user\n    Object.values(userMap).forEach(user => {\n      const allPortfolios = new Set();\n      Object.values(user.hours).forEach(hourData => {\n        hourData.portfolios.forEach(pid => allPortfolios.add(pid));\n      });\n      user.totalPortfolios = allPortfolios.size;\n    });\n\n    // Filter by user search\n    const filteredUsers = Object.values(userMap).filter(user => user.displayName.toLowerCase().includes(userSearch.toLowerCase()) || user.userName.toLowerCase().includes(userSearch.toLowerCase()));\n    return filteredUsers.sort((a, b) => b.totalPortfolios - a.totalPortfolios);\n  }, [filteredIssues, userSearch]);\n\n  // Calculate max count for color coding\n  const maxCount = useMemo(() => {\n    let max = 0;\n    matrixData.forEach(user => {\n      Object.values(user.hours).forEach(hourData => {\n        max = Math.max(max, hourData.portfolios.size);\n      });\n    });\n    return max;\n  }, [matrixData]);\n\n  // Get cell color class\n  const getCellColorClass = count => {\n    if (count === 0) {\n      return 'bg-white border border-gray-200 text-gray-400';\n    }\n    if (count >= 3) {\n      return 'bg-green-600 text-white font-semibold';\n    }\n    if (count >= 1) {\n      return 'bg-green-300 text-green-900 font-semibold';\n    }\n    return 'bg-white border border-gray-200 text-gray-400';\n  };\n\n  // Get cell info for tooltip\n  const getCellInfo = (userId, hour) => {\n    const user = matrixData.find(u => u.userName === userId);\n    if (!user) return null;\n    const hourData = user.hours[hour];\n    if (!hourData || hourData.portfolios.size === 0) return null;\n    const portfolioNames = Array.from(hourData.portfolios).map(pid => {\n      const portfolio = portfolios.find(p => p.id === pid);\n      return (portfolio === null || portfolio === void 0 ? void 0 : portfolio.name) || 'Unknown';\n    }).filter(name => name !== 'Unknown');\n    return {\n      userName: user.displayName,\n      hour,\n      totalCount: hourData.issues.length,\n      portfolios: portfolioNames,\n      portfolioCount: hourData.portfolios.size\n    };\n  };\n  const handleCellMouseEnter = (e, userId, hour) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    setHoveredCell({\n      userId,\n      hour,\n      position: {\n        top: rect.top + rect.height / 2,\n        left: rect.left + rect.width / 2\n      }\n    });\n  };\n  const handleCellMouseLeave = () => {\n    setHoveredCell(null);\n  };\n  const handleQuickRange = range => {\n    const today = new Date();\n    const formatDate = date => date.toISOString().split('T')[0];\n    if (range === 'today') {\n      setFromDate(formatDate(today));\n      setToDate(formatDate(today));\n    } else if (range === 'yesterday') {\n      const yesterday = new Date(today);\n      yesterday.setDate(yesterday.getDate() - 1);\n      setFromDate(formatDate(yesterday));\n      setToDate(formatDate(yesterday));\n    } else if (range === 'week') {\n      const weekAgo = new Date(today);\n      weekAgo.setDate(today.getDate() - 7);\n      setFromDate(formatDate(weekAgo));\n      setToDate(formatDate(today));\n    } else if (range === 'month') {\n      const monthAgo = new Date(today);\n      monthAgo.setMonth(today.getMonth() - 1);\n      setFromDate(formatDate(monthAgo));\n      setToDate(formatDate(today));\n    }\n  };\n  const handleResetFilters = () => {\n    setUserSearch('');\n    setHourFilter('all');\n    setIssueFilter('all');\n    const today = new Date();\n    setFromDate(today.toISOString().split('T')[0]);\n    setToDate(today.toISOString().split('T')[0]);\n  };\n  const handleExportMatrix = () => {\n    const csvRows = [['User / Hour', ...Array.from({\n      length: 24\n    }, (_, i) => `${i}:00`), 'Total'], ...matrixData.map(user => {\n      const row = [`${user.displayName} (${user.totalPortfolios} portfolios summary)`];\n      let total = 0;\n      for (let hour = 0; hour < 24; hour++) {\n        var _user$hours$hour;\n        const count = ((_user$hours$hour = user.hours[hour]) === null || _user$hours$hour === void 0 ? void 0 : _user$hours$hour.portfolios.size) || 0;\n        row.push(count.toString());\n        total += count;\n      }\n      row.push(total.toString());\n      return row;\n    }), ['Hour Totals', ...Array.from({\n      length: 24\n    }, (_, hour) => {\n      const count = matrixData.reduce((sum, user) => {\n        var _user$hours$hour2;\n        return sum + (((_user$hours$hour2 = user.hours[hour]) === null || _user$hours$hour2 === void 0 ? void 0 : _user$hours$hour2.portfolios.size) || 0);\n      }, 0);\n      return count.toString();\n    }), matrixData.reduce((sum, user) => {\n      return sum + Object.values(user.hours).reduce((s, h) => s + h.portfolios.size, 0);\n    }, 0).toString()]];\n    const csvContent = csvRows.map(row => row.map(cell => `\"${cell}\"`).join(',')).join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `coverage_matrix_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n    toast.success('Coverage matrix exported successfully');\n  };\n  const handleExportChartData = () => {\n    const csvRows = [['User', 'Total Portfolios Monitored'], ...userCoverageData.map(u => [u.userName, u.totalPortfolios.toString()])];\n    const csvContent = csvRows.map(row => row.map(cell => `\"${cell}\"`).join(',')).join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `user_coverage_performance_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n    toast.success('Chart data exported successfully');\n  };\n\n  // Calculate user coverage for chart\n  const userCoverageData = useMemo(() => {\n    return matrixData.map(user => ({\n      userName: user.displayName,\n      totalPortfolios: user.totalPortfolios,\n      userData: user\n    })).sort((a, b) => b.totalPortfolios - a.totalPortfolios).slice(0, 10);\n  }, [matrixData]);\n  const chartData = {\n    labels: userCoverageData.map(u => u.userName),\n    datasets: [{\n      label: 'Total Portfolios Monitored',\n      data: userCoverageData.map(u => u.totalPortfolios),\n      backgroundColor: userCoverageData.map((_, idx) => idx < 3 ? 'rgba(34, 197, 94, 0.9)' : 'rgba(34, 197, 94, 0.5)'),\n      borderColor: userCoverageData.map((_, idx) => idx < 3 ? 'rgba(34, 197, 94, 1)' : 'rgba(34, 197, 94, 0.7)'),\n      borderWidth: 1,\n      barThickness: 30,\n      maxBarThickness: 40\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: context => {\n            const user = userCoverageData[context.dataIndex];\n            return `${user.userName}: ${user.totalPortfolios} portfolios`;\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 2,\n          max: 8\n        },\n        title: {\n          display: true,\n          text: 'Total Portfolios Mon'\n        }\n      },\n      x: {\n        ticks: {\n          maxRotation: 45,\n          minRotation: 45\n        }\n      }\n    }\n  };\n  const cellInfo = hoveredCell ? getCellInfo(hoveredCell.userId, hoveredCell.hour) : null;\n\n  // Calculate totals for summary\n  const totalCoverage = useMemo(() => {\n    const allPortfolios = new Set();\n    matrixData.forEach(user => {\n      Object.values(user.hours).forEach(hourData => {\n        hourData.portfolios.forEach(pid => allPortfolios.add(pid));\n      });\n    });\n    return {\n      portfolios: allPortfolios.size,\n      users: matrixData.length,\n      hours: 24\n    };\n  }, [matrixData]);\n\n  // Get user performance details\n  const getUserPerformanceDetails = user => {\n    const allPortfolios = new Set();\n    const allIssues = new Set();\n    const activeIssues = [];\n    const missedAlerts = [];\n    const hourlyBreakdown = [];\n    Object.entries(user.hours).forEach(([hourStr, hourData]) => {\n      const hour = parseInt(hourStr);\n      hourData.portfolios.forEach(pid => allPortfolios.add(pid));\n      hourData.issues.forEach(issue => allIssues.add(issue.id));\n      activeIssues.push(...hourData.activeIssues);\n      hourData.issues.forEach(issue => {\n        if (issue.missed_by && issue.missed_by.length > 0) {\n          missedAlerts.push(issue);\n        }\n      });\n      hourlyBreakdown.push({\n        hour,\n        portfolios: hourData.portfolios.size,\n        issues: hourData.issues.length,\n        activeIssues: hourData.activeIssues.length\n      });\n    });\n    hourlyBreakdown.sort((a, b) => a.hour - b.hour);\n    const portfolioNames = Array.from(allPortfolios).map(pid => {\n      var _portfolios$find;\n      return (_portfolios$find = portfolios.find(p => p.id === pid)) === null || _portfolios$find === void 0 ? void 0 : _portfolios$find.name;\n    }).filter(name => name);\n    const healthySites = allIssues.size - activeIssues.length;\n    return {\n      totalCount: allIssues.size,\n      activeIssues: activeIssues.length,\n      healthySites,\n      missedAlerts: missedAlerts.length,\n      totalPortfoliosMonitored: allPortfolios.size,\n      monitoringActiveHours: Object.keys(user.hours).length,\n      portfolios: portfolioNames,\n      hourlyBreakdown\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [showCharts && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold mb-1\",\n          children: \"User Coverage Performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-100 text-sm\",\n          children: \"Top performers by portfolio coverage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"rounded-t-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex-1 max-w-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search user by name...\",\n              className: \"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            size: \"sm\",\n            onClick: handleExportChartData,\n            style: {\n              backgroundColor: '#76ab3f'\n            },\n            children: \"Export Chart Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this), userCoverageData.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: '400px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Bar, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center gap-4 mt-4 text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-green-600 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"Top 3 Performers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-3 h-3 bg-green-300 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"Other Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12 text-gray-500\",\n          children: \"No data available for chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold mb-1\",\n          children: \"Portfolio Coverage Matrix\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-100 text-sm\",\n          children: \"Track how many portfolios each user covered in each hour. Hover over cells to see portfolio details and issues with 'Yes'.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"rounded-t-none\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-5 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: userSearch,\n                onChange: e => setUserSearch(e.target.value),\n                placeholder: \"Type user name...\",\n                className: \"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: hourFilter,\n                onChange: e => setHourFilter(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"all\",\n                  children: \"All Hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 19\n                }, this), Array.from({\n                  length: 24\n                }, (_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: i.toString(),\n                  children: [i, \":00\"]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: issueFilter,\n                onChange: e => setIssueFilter(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"all\",\n                  children: \"All Issues (Coverage)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"active\",\n                  children: \"Active Issues Only\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 575,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: fromDate,\n                onChange: e => setFromDate(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 592,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: toDate,\n                onChange: e => setToDate(e.target.value),\n                className: \"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 614,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Quick Range:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('today'),\n              className: `px-3 py-1.5 text-sm rounded-md transition-all ${fromDate === toDate && fromDate === new Date().toISOString().split('T')[0] ? 'bg-green-600 text-white shadow-md' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              children: \"Today\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('yesterday'),\n              className: \"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\",\n              children: \"Yesterday\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('week'),\n              className: \"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleQuickRange('month'),\n              className: \"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              onClick: handleResetFilters,\n              children: \"Reset All Filters\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"rounded-t-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold text-gray-900\",\n              children: \"Coverage Overview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mt-1\",\n              children: [totalCoverage.portfolios, \" portfolio coverage(s) across \", totalCoverage.users, \" user(s) \\u2022 \", totalCoverage.hours, \" hours\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 text-xs\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 bg-green-600 rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 673,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"High coverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 bg-green-300 rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Medium coverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 bg-white border border-gray-200 rounded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 681,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"No coverage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 682,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase sticky left-0 bg-gray-50 z-10 border-r border-gray-200\",\n                  children: \"User / Hour\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 19\n                }, this), Array.from({\n                  length: 24\n                }, (_, i) => /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase min-w-[60px]\",\n                  children: [i, \":00\"]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 696,\n                  columnNumber: 21\n                }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase bg-gray-100 border-l border-gray-200\",\n                  children: \"Total Portfolios\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: matrixData.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: 25,\n                  className: \"px-4 py-8 text-center text-gray-500\",\n                  children: \"No data available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [matrixData.map(row => {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 border-r border-gray-200 cursor-pointer hover:text-blue-600\",\n                      onClick: () => setSelectedUser(row),\n                      children: [row.displayName, \" (\", row.totalPortfolios, \" portfolios summary)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 720,\n                      columnNumber: 27\n                    }, this), Array.from({\n                      length: 24\n                    }, (_, hour) => {\n                      var _row$hours$hour;\n                      const count = ((_row$hours$hour = row.hours[hour]) === null || _row$hours$hour === void 0 ? void 0 : _row$hours$hour.portfolios.size) || 0;\n                      return /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: `px-2 py-3 text-center text-xs font-semibold cursor-pointer transition-colors ${getCellColorClass(count)}`,\n                        onMouseEnter: e => handleCellMouseEnter(e, row.userName, hour),\n                        onMouseLeave: handleCellMouseLeave,\n                        children: count > 0 ? count : ''\n                      }, hour, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 729,\n                        columnNumber: 31\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-center text-sm font-bold text-gray-900 bg-gray-100 border-l border-gray-200\",\n                      children: row.totalPortfolios\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 741,\n                      columnNumber: 27\n                    }, this)]\n                  }, row.userName, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 719,\n                    columnNumber: 25\n                  }, this);\n                }), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100 font-bold\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-sm text-gray-900 sticky left-0 bg-gray-100 z-10 border-r border-gray-200\",\n                    children: \"Hour Totals\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 749,\n                    columnNumber: 23\n                  }, this), Array.from({\n                    length: 24\n                  }, (_, hour) => {\n                    const count = matrixData.reduce((sum, user) => {\n                      var _user$hours$hour3;\n                      return sum + (((_user$hours$hour3 = user.hours[hour]) === null || _user$hours$hour3 === void 0 ? void 0 : _user$hours$hour3.portfolios.size) || 0);\n                    }, 0);\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-2 py-3 text-center text-xs text-gray-900\",\n                      children: count > 0 ? count : ''\n                    }, hour, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 758,\n                      columnNumber: 27\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-3 text-center text-sm text-gray-900 bg-gray-200 border-l border-gray-200\",\n                    children: matrixData.reduce((sum, user) => sum + user.totalPortfolios, 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 763,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 748,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this), hoveredCell && cellInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed z-[9999] w-80 bg-blue-900 text-white text-xs rounded-lg shadow-xl p-4 pointer-events-none\",\n      style: {\n        top: `${hoveredCell.position.top}px`,\n        left: `${hoveredCell.position.left}px`,\n        transform: 'translate(-50%, -100%)',\n        marginTop: '-10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold text-sm mb-2 pb-2 border-b border-blue-700\",\n        children: [cellInfo.userName, \" - Hour \", cellInfo.hour, \":00\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-blue-300\",\n          children: [\"Total Count (All Issues): \", cellInfo.totalCount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 789,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-green-300 mb-1\",\n          children: [\"Total Portfolios Monitored (\", cellInfo.portfolioCount, \"):\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-1 max-h-32 overflow-y-auto\",\n          children: cellInfo.portfolios.map((portfolio, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-blue-100 pl-2\",\n            children: [\"\\u2022 \", portfolio]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 800,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 794,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-1/2 transform -translate-x-1/2 top-full border-4 border-transparent border-t-blue-900\",\n        style: {\n          marginTop: '-1px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 777,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-end gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        size: \"sm\",\n        onClick: () => setShowCharts(!showCharts),\n        children: showCharts ? 'Hide Charts' : 'Show Charts'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 815,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        size: \"sm\",\n        onClick: handleExportMatrix,\n        style: {\n          backgroundColor: '#76ab3f'\n        },\n        children: \"Export Matrix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 818,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 7\n    }, this), selectedUser && /*#__PURE__*/_jsxDEV(UserPerformanceModal, {\n      user: selectedUser,\n      onClose: () => setSelectedUser(null),\n      getUserPerformanceDetails: getUserPerformanceDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 825,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 450,\n    columnNumber: 5\n  }, this);\n};\n_s(CoverageMatrix, \"ohHKUHtZYo+OHy2OhKw4PGX/RIY=\", false, function () {\n  return [useAuth, useQuery, useQuery];\n});\n_c = CoverageMatrix;\nconst UserPerformanceModal = ({\n  user,\n  onClose,\n  getUserPerformanceDetails\n}) => {\n  const details = getUserPerformanceDetails(user);\n  const hourlyChartData = {\n    labels: details.hourlyBreakdown.map(h => h.hour.toString()),\n    datasets: [{\n      label: 'Portfolios',\n      data: details.hourlyBreakdown.map(h => h.portfolios),\n      backgroundColor: 'rgba(34, 197, 94, 0.8)',\n      borderColor: 'rgba(34, 197, 94, 1)',\n      borderWidth: 1\n    }, {\n      label: 'Issues',\n      data: details.hourlyBreakdown.map(h => h.issues),\n      backgroundColor: 'rgba(59, 130, 246, 0.8)',\n      borderColor: 'rgba(59, 130, 246, 1)',\n      borderWidth: 1\n    }, {\n      label: 'Active Issues',\n      data: details.hourlyBreakdown.map(h => h.activeIssues),\n      backgroundColor: 'rgba(239, 68, 68, 0.8)',\n      borderColor: 'rgba(239, 68, 68, 1)',\n      borderWidth: 1\n    }]\n  };\n  const hourlyChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: true,\n        position: 'bottom'\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 0.5,\n          max: 2\n        },\n        title: {\n          display: true,\n          text: 'Count'\n        }\n      },\n      x: {\n        title: {\n          display: true,\n          text: 'Hour'\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: true,\n    onClose: onClose,\n    title: \"User Performance Details\",\n    size: \"lg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-900\",\n          children: user.displayName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 917,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-3 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 rounded-lg p-4 border border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-blue-600\",\n            children: details.totalCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: \"Total Count\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 925,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 rounded-lg p-4 border border-red-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-red-600\",\n            children: details.activeIssues\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: \"Active Issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 929,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 927,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 rounded-lg p-4 border border-green-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-green-600\",\n            children: details.healthySites\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 932,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: \"Healthy Sites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 933,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-orange-50 rounded-lg p-4 border border-orange-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-orange-600\",\n            children: details.missedAlerts\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 936,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: \"Missed Alerts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 937,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 935,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-purple-50 rounded-lg p-4 border border-purple-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-purple-600\",\n            children: details.totalPortfoliosMonitored\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 940,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: \"Total Portfolios Monitored\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 939,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 rounded-lg p-4 border border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-blue-600\",\n            children: details.monitoringActiveHours\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 944,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: \"Monitoring Active Hours\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 945,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 922,\n        columnNumber: 9\n      }, this), details.portfolios.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold text-gray-900 mb-3\",\n          children: [\"Total Portfolios Monitored (\", details.portfolios.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-2\",\n          children: details.portfolios.map((portfolio, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\",\n            children: portfolio\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 957,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 951,\n        columnNumber: 11\n      }, this), details.hourlyBreakdown.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold text-gray-900 mb-3\",\n          children: \"Hourly Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 971,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: '300px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Bar, {\n            data: hourlyChartData,\n            options: hourlyChartOptions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 973,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 972,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 970,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end pt-4\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: onClose,\n          style: {\n            backgroundColor: '#76ab3f'\n          },\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 979,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 978,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 916,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 915,\n    columnNumber: 5\n  }, this);\n};\n_c2 = UserPerformanceModal;\nexport default CoverageMatrix;\nvar _c, _c2;\n$RefreshReg$(_c, \"CoverageMatrix\");\n$RefreshReg$(_c2, \"UserPerformanceModal\");","map":{"version":3,"names":["React","useState","useMemo","useQuery","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","issueService","portfolioService","useAuth","Card","Button","Modal","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","register","CoverageMatrix","_s","user","currentUser","userSearch","setUserSearch","hourFilter","setHourFilter","issueFilter","setIssueFilter","fromDate","setFromDate","today","Date","toISOString","split","toDate","setToDate","showCharts","setShowCharts","selectedUser","setSelectedUser","hoveredCell","setHoveredCell","data","portfolios","queryKey","queryFn","getAll","allIssues","filteredIssues","filtered","start","setHours","end","filter","issue","issueDate","created_at","description","toLowerCase","hour","parseInt","issue_hour","matrixData","userMap","forEach","_issue$monitored_by","monitoredBy","monitored_by","username","displayName","userName","email","totalPortfolios","hours","Set","issues","activeIssues","add","portfolio_id","push","Object","values","allPortfolios","hourData","pid","size","filteredUsers","includes","sort","a","b","maxCount","max","Math","getCellColorClass","count","getCellInfo","userId","find","u","portfolioNames","Array","from","map","portfolio","p","id","name","totalCount","length","portfolioCount","handleCellMouseEnter","e","rect","currentTarget","getBoundingClientRect","position","top","height","left","width","handleCellMouseLeave","handleQuickRange","range","formatDate","date","yesterday","setDate","getDate","weekAgo","monthAgo","setMonth","getMonth","handleResetFilters","handleExportMatrix","csvRows","_","i","row","total","_user$hours$hour","toString","reduce","sum","_user$hours$hour2","s","h","csvContent","cell","join","blob","Blob","type","url","window","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","success","handleExportChartData","userCoverageData","userData","slice","chartData","labels","datasets","label","backgroundColor","idx","borderColor","borderWidth","barThickness","maxBarThickness","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","tooltip","callbacks","context","dataIndex","scales","y","beginAtZero","ticks","stepSize","title","text","x","maxRotation","minRotation","cellInfo","totalCoverage","users","getUserPerformanceDetails","missedAlerts","hourlyBreakdown","entries","hourStr","missed_by","_portfolios$find","healthySites","totalPortfoliosMonitored","monitoringActiveHours","keys","className","children","fileName","_jsxFileName","lineNumber","columnNumber","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","placeholder","variant","onClick","style","options","value","onChange","target","colSpan","_row$hours$hour","onMouseEnter","onMouseLeave","_user$hours$hour3","transform","marginTop","UserPerformanceModal","onClose","_c","details","hourlyChartData","hourlyChartOptions","isOpen","_c2","$RefreshReg$"],"sources":["C:/Users/LibsysAdmin/OneDrive - Libsys IT Services Private Limited/Desktop/ALLLL HLSC/client/src/components/analytics/CoverageMatrix.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react'\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { Bar } from 'react-chartjs-2'\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js'\r\nimport { issueService } from '../../services/issueService'\r\nimport { portfolioService } from '../../services/portfolioService'\r\nimport { Issue } from '../../types/issue.types'\r\nimport { Portfolio } from '../../types/portfolio.types'\r\nimport { useAuth } from '../../context/AuthContext'\r\nimport Card from '../common/Card'\r\nimport Button from '../common/Button'\r\nimport Modal from '../common/Modal'\r\nimport toast from 'react-hot-toast'\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend)\r\n\r\ninterface UserHourData {\r\n  portfolios: Set<string>\r\n  issues: Issue[]\r\n  activeIssues: Issue[]\r\n}\r\n\r\ninterface UserMatrixData {\r\n  userName: string\r\n  displayName: string\r\n  email: string\r\n  totalPortfolios: number\r\n  hours: { [hour: number]: UserHourData }\r\n}\r\n\r\nconst CoverageMatrix: React.FC = () => {\r\n  const { user: currentUser } = useAuth()\r\n  const [userSearch, setUserSearch] = useState('')\r\n  const [hourFilter, setHourFilter] = useState<string>('all')\r\n  const [issueFilter, setIssueFilter] = useState<'all' | 'active'>('all')\r\n  const [fromDate, setFromDate] = useState(() => {\r\n    const today = new Date()\r\n    return today.toISOString().split('T')[0]\r\n  })\r\n  const [toDate, setToDate] = useState(() => {\r\n    const today = new Date()\r\n    return today.toISOString().split('T')[0]\r\n  })\r\n  const [showCharts, setShowCharts] = useState(true)\r\n  const [selectedUser, setSelectedUser] = useState<UserMatrixData | null>(null)\r\n  const [hoveredCell, setHoveredCell] = useState<{\r\n    userId: string\r\n    hour: number\r\n    position: { top: number; left: number }\r\n  } | null>(null)\r\n\r\n  // Fetch portfolios\r\n  const { data: portfolios = [] } = useQuery<Portfolio[]>({\r\n    queryKey: ['portfolios'],\r\n    queryFn: portfolioService.getAll,\r\n  })\r\n\r\n  // Fetch issues\r\n  const { data: allIssues = [] } = useQuery<Issue[]>({\r\n    queryKey: ['issues'],\r\n    queryFn: () => issueService.getAll({}),\r\n  })\r\n\r\n  // Filter issues by date range\r\n  const filteredIssues = useMemo(() => {\r\n    let filtered = allIssues\r\n\r\n    if (fromDate && toDate) {\r\n      const start = new Date(fromDate)\r\n      start.setHours(0, 0, 0, 0)\r\n      const end = new Date(toDate)\r\n      end.setHours(23, 59, 59, 999)\r\n\r\n      filtered = filtered.filter((issue) => {\r\n        const issueDate = new Date(issue.created_at)\r\n        return issueDate >= start && issueDate <= end\r\n      })\r\n    }\r\n\r\n    // Issue filter\r\n    if (issueFilter === 'active') {\r\n      filtered = filtered.filter(\r\n        (issue) => issue.description && issue.description.toLowerCase() !== 'no issue'\r\n      )\r\n    }\r\n\r\n    // Hour filter\r\n    if (hourFilter !== 'all') {\r\n      const hour = parseInt(hourFilter)\r\n      filtered = filtered.filter((issue) => issue.issue_hour === hour)\r\n    }\r\n\r\n    return filtered\r\n  }, [allIssues, fromDate, toDate, issueFilter, hourFilter])\r\n\r\n  // Build matrix data - portfolios monitored per user per hour\r\n  const matrixData = useMemo(() => {\r\n    const userMap: { [key: string]: UserMatrixData } = {}\r\n\r\n    filteredIssues.forEach((issue) => {\r\n      const monitoredBy = issue.monitored_by?.[0] || 'Unknown'\r\n      const username = monitoredBy.split('@')[0]\r\n      const displayName = username || 'Unknown'\r\n\r\n      if (!userMap[monitoredBy]) {\r\n        userMap[monitoredBy] = {\r\n          userName: monitoredBy,\r\n          displayName,\r\n          email: monitoredBy,\r\n          totalPortfolios: 0,\r\n          hours: {},\r\n        }\r\n      }\r\n\r\n      const hour = issue.issue_hour\r\n      if (!userMap[monitoredBy].hours[hour]) {\r\n        userMap[monitoredBy].hours[hour] = {\r\n          portfolios: new Set(),\r\n          issues: [],\r\n          activeIssues: [],\r\n        }\r\n      }\r\n\r\n      userMap[monitoredBy].hours[hour].portfolios.add(issue.portfolio_id)\r\n      userMap[monitoredBy].hours[hour].issues.push(issue)\r\n      if (issue.description && issue.description.toLowerCase() !== 'no issue') {\r\n        userMap[monitoredBy].hours[hour].activeIssues.push(issue)\r\n      }\r\n    })\r\n\r\n    // Calculate total portfolios per user\r\n    Object.values(userMap).forEach((user) => {\r\n      const allPortfolios = new Set<string>()\r\n      Object.values(user.hours).forEach((hourData) => {\r\n        hourData.portfolios.forEach((pid) => allPortfolios.add(pid))\r\n      })\r\n      user.totalPortfolios = allPortfolios.size\r\n    })\r\n\r\n    // Filter by user search\r\n    const filteredUsers = Object.values(userMap).filter((user) =>\r\n      user.displayName.toLowerCase().includes(userSearch.toLowerCase()) ||\r\n      user.userName.toLowerCase().includes(userSearch.toLowerCase())\r\n    )\r\n\r\n    return filteredUsers.sort((a, b) => b.totalPortfolios - a.totalPortfolios)\r\n  }, [filteredIssues, userSearch])\r\n\r\n  // Calculate max count for color coding\r\n  const maxCount = useMemo(() => {\r\n    let max = 0\r\n    matrixData.forEach((user) => {\r\n      Object.values(user.hours).forEach((hourData) => {\r\n        max = Math.max(max, hourData.portfolios.size)\r\n      })\r\n    })\r\n    return max\r\n  }, [matrixData])\r\n\r\n  // Get cell color class\r\n  const getCellColorClass = (count: number) => {\r\n    if (count === 0) {\r\n      return 'bg-white border border-gray-200 text-gray-400'\r\n    }\r\n    if (count >= 3) {\r\n      return 'bg-green-600 text-white font-semibold'\r\n    }\r\n    if (count >= 1) {\r\n      return 'bg-green-300 text-green-900 font-semibold'\r\n    }\r\n    return 'bg-white border border-gray-200 text-gray-400'\r\n  }\r\n\r\n  // Get cell info for tooltip\r\n  const getCellInfo = (userId: string, hour: number) => {\r\n    const user = matrixData.find((u) => u.userName === userId)\r\n    if (!user) return null\r\n\r\n    const hourData = user.hours[hour]\r\n    if (!hourData || hourData.portfolios.size === 0) return null\r\n\r\n    const portfolioNames = Array.from(hourData.portfolios)\r\n      .map((pid) => {\r\n        const portfolio = portfolios.find((p) => p.id === pid)\r\n        return portfolio?.name || 'Unknown'\r\n      })\r\n      .filter((name) => name !== 'Unknown')\r\n\r\n    return {\r\n      userName: user.displayName,\r\n      hour,\r\n      totalCount: hourData.issues.length,\r\n      portfolios: portfolioNames,\r\n      portfolioCount: hourData.portfolios.size,\r\n    }\r\n  }\r\n\r\n  const handleCellMouseEnter = (\r\n    e: React.MouseEvent<HTMLTableCellElement>,\r\n    userId: string,\r\n    hour: number\r\n  ) => {\r\n    const rect = e.currentTarget.getBoundingClientRect()\r\n    setHoveredCell({\r\n      userId,\r\n      hour,\r\n      position: {\r\n        top: rect.top + rect.height / 2,\r\n        left: rect.left + rect.width / 2,\r\n      },\r\n    })\r\n  }\r\n\r\n  const handleCellMouseLeave = () => {\r\n    setHoveredCell(null)\r\n  }\r\n\r\n  const handleQuickRange = (range: 'today' | 'yesterday' | 'week' | 'month') => {\r\n    const today = new Date()\r\n    const formatDate = (date: Date) => date.toISOString().split('T')[0]\r\n\r\n    if (range === 'today') {\r\n      setFromDate(formatDate(today))\r\n      setToDate(formatDate(today))\r\n    } else if (range === 'yesterday') {\r\n      const yesterday = new Date(today)\r\n      yesterday.setDate(yesterday.getDate() - 1)\r\n      setFromDate(formatDate(yesterday))\r\n      setToDate(formatDate(yesterday))\r\n    } else if (range === 'week') {\r\n      const weekAgo = new Date(today)\r\n      weekAgo.setDate(today.getDate() - 7)\r\n      setFromDate(formatDate(weekAgo))\r\n      setToDate(formatDate(today))\r\n    } else if (range === 'month') {\r\n      const monthAgo = new Date(today)\r\n      monthAgo.setMonth(today.getMonth() - 1)\r\n      setFromDate(formatDate(monthAgo))\r\n      setToDate(formatDate(today))\r\n    }\r\n  }\r\n\r\n  const handleResetFilters = () => {\r\n    setUserSearch('')\r\n    setHourFilter('all')\r\n    setIssueFilter('all')\r\n    const today = new Date()\r\n    setFromDate(today.toISOString().split('T')[0])\r\n    setToDate(today.toISOString().split('T')[0])\r\n  }\r\n\r\n  const handleExportMatrix = () => {\r\n    const csvRows = [\r\n      ['User / Hour', ...Array.from({ length: 24 }, (_, i) => `${i}:00`), 'Total'],\r\n      ...matrixData.map((user) => {\r\n        const row = [`${user.displayName} (${user.totalPortfolios} portfolios summary)`]\r\n        let total = 0\r\n        for (let hour = 0; hour < 24; hour++) {\r\n          const count = user.hours[hour]?.portfolios.size || 0\r\n          row.push(count.toString())\r\n          total += count\r\n        }\r\n        row.push(total.toString())\r\n        return row\r\n      }),\r\n      [\r\n        'Hour Totals',\r\n        ...Array.from({ length: 24 }, (_, hour) => {\r\n          const count = matrixData.reduce(\r\n            (sum, user) => sum + (user.hours[hour]?.portfolios.size || 0),\r\n            0\r\n          )\r\n          return count.toString()\r\n        }),\r\n        matrixData.reduce((sum, user) => {\r\n          return sum + Object.values(user.hours).reduce((s, h) => s + h.portfolios.size, 0)\r\n        }, 0).toString(),\r\n      ],\r\n    ]\r\n\r\n    const csvContent = csvRows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n')\r\n    const blob = new Blob([csvContent], { type: 'text/csv' })\r\n    const url = window.URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = `coverage_matrix_${new Date().toISOString().split('T')[0]}.csv`\r\n    a.click()\r\n    window.URL.revokeObjectURL(url)\r\n    toast.success('Coverage matrix exported successfully')\r\n  }\r\n\r\n  const handleExportChartData = () => {\r\n    const csvRows = [\r\n      ['User', 'Total Portfolios Monitored'],\r\n      ...userCoverageData.map((u) => [u.userName, u.totalPortfolios.toString()]),\r\n    ]\r\n\r\n    const csvContent = csvRows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n')\r\n    const blob = new Blob([csvContent], { type: 'text/csv' })\r\n    const url = window.URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = `user_coverage_performance_${new Date().toISOString().split('T')[0]}.csv`\r\n    a.click()\r\n    window.URL.revokeObjectURL(url)\r\n    toast.success('Chart data exported successfully')\r\n  }\r\n\r\n  // Calculate user coverage for chart\r\n  const userCoverageData = useMemo(() => {\r\n    return matrixData\r\n      .map((user) => ({\r\n        userName: user.displayName,\r\n        totalPortfolios: user.totalPortfolios,\r\n        userData: user,\r\n      }))\r\n      .sort((a, b) => b.totalPortfolios - a.totalPortfolios)\r\n      .slice(0, 10)\r\n  }, [matrixData])\r\n\r\n  const chartData = {\r\n    labels: userCoverageData.map((u) => u.userName),\r\n    datasets: [\r\n      {\r\n        label: 'Total Portfolios Monitored',\r\n        data: userCoverageData.map((u) => u.totalPortfolios),\r\n        backgroundColor: userCoverageData.map((_, idx) =>\r\n          idx < 3 ? 'rgba(34, 197, 94, 0.9)' : 'rgba(34, 197, 94, 0.5)'\r\n        ),\r\n        borderColor: userCoverageData.map((_, idx) =>\r\n          idx < 3 ? 'rgba(34, 197, 94, 1)' : 'rgba(34, 197, 94, 0.7)'\r\n        ),\r\n        borderWidth: 1,\r\n        barThickness: 30,\r\n        maxBarThickness: 40,\r\n      },\r\n    ],\r\n  }\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (context: any) => {\r\n            const user = userCoverageData[context.dataIndex]\r\n            return `${user.userName}: ${user.totalPortfolios} portfolios`\r\n          },\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        ticks: {\r\n          stepSize: 2,\r\n          max: 8,\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Total Portfolios Mon',\r\n        },\r\n      },\r\n      x: {\r\n        ticks: {\r\n          maxRotation: 45,\r\n          minRotation: 45,\r\n        },\r\n      },\r\n    },\r\n  }\r\n\r\n  const cellInfo = hoveredCell ? getCellInfo(hoveredCell.userId, hoveredCell.hour) : null\r\n\r\n  // Calculate totals for summary\r\n  const totalCoverage = useMemo(() => {\r\n    const allPortfolios = new Set<string>()\r\n    matrixData.forEach((user) => {\r\n      Object.values(user.hours).forEach((hourData) => {\r\n        hourData.portfolios.forEach((pid) => allPortfolios.add(pid))\r\n      })\r\n    })\r\n    return {\r\n      portfolios: allPortfolios.size,\r\n      users: matrixData.length,\r\n      hours: 24,\r\n    }\r\n  }, [matrixData])\r\n\r\n  // Get user performance details\r\n  const getUserPerformanceDetails = (user: UserMatrixData) => {\r\n    const allPortfolios = new Set<string>()\r\n    const allIssues = new Set<string>()\r\n    const activeIssues: Issue[] = []\r\n    const missedAlerts: Issue[] = []\r\n    const hourlyBreakdown: { hour: number; portfolios: number; issues: number; activeIssues: number }[] = []\r\n\r\n    Object.entries(user.hours).forEach(([hourStr, hourData]) => {\r\n      const hour = parseInt(hourStr)\r\n      hourData.portfolios.forEach((pid) => allPortfolios.add(pid))\r\n      hourData.issues.forEach((issue) => allIssues.add(issue.id))\r\n      activeIssues.push(...hourData.activeIssues)\r\n      hourData.issues.forEach((issue) => {\r\n        if (issue.missed_by && issue.missed_by.length > 0) {\r\n          missedAlerts.push(issue)\r\n        }\r\n      })\r\n\r\n      hourlyBreakdown.push({\r\n        hour,\r\n        portfolios: hourData.portfolios.size,\r\n        issues: hourData.issues.length,\r\n        activeIssues: hourData.activeIssues.length,\r\n      })\r\n    })\r\n\r\n    hourlyBreakdown.sort((a, b) => a.hour - b.hour)\r\n\r\n    const portfolioNames = Array.from(allPortfolios)\r\n      .map((pid) => portfolios.find((p) => p.id === pid)?.name)\r\n      .filter((name) => name) as string[]\r\n\r\n    const healthySites = allIssues.size - activeIssues.length\r\n\r\n    return {\r\n      totalCount: allIssues.size,\r\n      activeIssues: activeIssues.length,\r\n      healthySites,\r\n      missedAlerts: missedAlerts.length,\r\n      totalPortfoliosMonitored: allPortfolios.size,\r\n      monitoringActiveHours: Object.keys(user.hours).length,\r\n      portfolios: portfolioNames,\r\n      hourlyBreakdown,\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* User Coverage Performance Section */}\r\n      {showCharts && (\r\n        <div>\r\n          {/* Green Banner */}\r\n          <div className=\"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\">\r\n            <h2 className=\"text-3xl font-bold mb-1\">User Coverage Performance</h2>\r\n            <p className=\"text-green-100 text-sm\">Top performers by portfolio coverage</p>\r\n          </div>\r\n\r\n          {/* Chart Card */}\r\n          <Card className=\"rounded-t-none\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"relative flex-1 max-w-md\">\r\n                <svg\r\n                  className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                  />\r\n                </svg>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search user by name...\"\r\n                  className=\"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n              <Button\r\n                variant=\"primary\"\r\n                size=\"sm\"\r\n                onClick={handleExportChartData}\r\n                style={{ backgroundColor: '#76ab3f' }}\r\n              >\r\n                Export Chart Data\r\n              </Button>\r\n            </div>\r\n\r\n            {userCoverageData.length > 0 ? (\r\n              <>\r\n                <div style={{ height: '400px' }}>\r\n                  <Bar data={chartData} options={chartOptions} />\r\n                </div>\r\n                <div className=\"flex items-center justify-center gap-4 mt-4 text-xs\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-green-600 rounded-full\"></div>\r\n                    <span className=\"text-gray-600\">Top 3 Performers</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-green-300 rounded-full\"></div>\r\n                    <span className=\"text-gray-600\">Other Users</span>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"text-center py-12 text-gray-500\">No data available for chart</div>\r\n            )}\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* Portfolio Coverage Matrix Section */}\r\n      <div>\r\n        {/* Green Banner */}\r\n        <div className=\"bg-green-600 text-white py-6 px-6 rounded-t-lg shadow-md\">\r\n          <h1 className=\"text-3xl font-bold mb-1\">Portfolio Coverage Matrix</h1>\r\n          <p className=\"text-green-100 text-sm\">\r\n            Track how many portfolios each user covered in each hour. Hover over cells to see portfolio details and issues with 'Yes'.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Filter Card */}\r\n        <Card className=\"rounded-t-none\">\r\n          <div className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\r\n              <div className=\"relative\">\r\n                <svg\r\n                  className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                  />\r\n                </svg>\r\n                <input\r\n                  type=\"text\"\r\n                  value={userSearch}\r\n                  onChange={(e) => setUserSearch(e.target.value)}\r\n                  placeholder=\"Type user name...\"\r\n                  className=\"w-full pl-10 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <select\r\n                  value={hourFilter}\r\n                  onChange={(e) => setHourFilter(e.target.value)}\r\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"all\">All Hours</option>\r\n                  {Array.from({ length: 24 }, (_, i) => (\r\n                    <option key={i} value={i.toString()}>\r\n                      {i}:00\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <select\r\n                  value={issueFilter}\r\n                  onChange={(e) => setIssueFilter(e.target.value as 'all' | 'active')}\r\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"all\">All Issues (Coverage)</option>\r\n                  <option value=\"active\">Active Issues Only</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={fromDate}\r\n                  onChange={(e) => setFromDate(e.target.value)}\r\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n                <svg\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={toDate}\r\n                  onChange={(e) => setToDate(e.target.value)}\r\n                  className=\"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n                <svg\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <span className=\"text-sm font-medium text-gray-700\">Quick Range:</span>\r\n              <button\r\n                onClick={() => handleQuickRange('today')}\r\n                className={`px-3 py-1.5 text-sm rounded-md transition-all ${\r\n                  fromDate === toDate && fromDate === new Date().toISOString().split('T')[0]\r\n                    ? 'bg-green-600 text-white shadow-md'\r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n              >\r\n                Today\r\n              </button>\r\n              <button\r\n                onClick={() => handleQuickRange('yesterday')}\r\n                className=\"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              >\r\n                Yesterday\r\n              </button>\r\n              <button\r\n                onClick={() => handleQuickRange('week')}\r\n                className=\"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              >\r\n                Week\r\n              </button>\r\n              <button\r\n                onClick={() => handleQuickRange('month')}\r\n                className=\"px-3 py-1.5 text-sm rounded-md transition-all bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              >\r\n                Month\r\n              </button>\r\n              <Button variant=\"secondary\" size=\"sm\" onClick={handleResetFilters}>\r\n                Reset All Filters\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Coverage Overview Table */}\r\n        <Card className=\"rounded-t-none\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Coverage Overview</h2>\r\n              <p className=\"text-sm text-gray-600 mt-1\">\r\n                {totalCoverage.portfolios} portfolio coverage(s) across {totalCoverage.users} user(s)  {totalCoverage.hours} hours\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"flex items-center gap-4 text-xs\">\r\n                <div className=\"flex items-center gap-1\">\r\n                  <div className=\"w-3 h-3 bg-green-600 rounded\"></div>\r\n                  <span className=\"text-gray-600\">High coverage</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <div className=\"w-3 h-3 bg-green-300 rounded\"></div>\r\n                  <span className=\"text-gray-600\">Medium coverage</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <div className=\"w-3 h-3 bg-white border border-gray-200 rounded\"></div>\r\n                  <span className=\"text-gray-600\">No coverage</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase sticky left-0 bg-gray-50 z-10 border-r border-gray-200\">\r\n                    User / Hour\r\n                  </th>\r\n                  {Array.from({ length: 24 }, (_, i) => (\r\n                    <th\r\n                      key={i}\r\n                      className=\"px-2 py-3 text-center text-xs font-semibold text-gray-700 uppercase min-w-[60px]\"\r\n                    >\r\n                      {i}:00\r\n                    </th>\r\n                  ))}\r\n                  <th className=\"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase bg-gray-100 border-l border-gray-200\">\r\n                    Total Portfolios\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {matrixData.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan={25} className=\"px-4 py-8 text-center text-gray-500\">\r\n                      No data available\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  <>\r\n                    {matrixData.map((row) => {\r\n                      return (\r\n                        <tr key={row.userName} className=\"hover:bg-gray-50\">\r\n                          <td\r\n                            className=\"px-4 py-3 text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 border-r border-gray-200 cursor-pointer hover:text-blue-600\"\r\n                            onClick={() => setSelectedUser(row)}\r\n                          >\r\n                            {row.displayName} ({row.totalPortfolios} portfolios summary)\r\n                          </td>\r\n                          {Array.from({ length: 24 }, (_, hour) => {\r\n                            const count = row.hours[hour]?.portfolios.size || 0\r\n                            return (\r\n                              <td\r\n                                key={hour}\r\n                                className={`px-2 py-3 text-center text-xs font-semibold cursor-pointer transition-colors ${getCellColorClass(\r\n                                  count\r\n                                )}`}\r\n                                onMouseEnter={(e) => handleCellMouseEnter(e, row.userName, hour)}\r\n                                onMouseLeave={handleCellMouseLeave}\r\n                              >\r\n                                {count > 0 ? count : ''}\r\n                              </td>\r\n                            )\r\n                          })}\r\n                          <td className=\"px-4 py-3 text-center text-sm font-bold text-gray-900 bg-gray-100 border-l border-gray-200\">\r\n                            {row.totalPortfolios}\r\n                          </td>\r\n                        </tr>\r\n                      )\r\n                    })}\r\n                    {/* Hour Totals Row */}\r\n                    <tr className=\"bg-gray-100 font-bold\">\r\n                      <td className=\"px-4 py-3 text-sm text-gray-900 sticky left-0 bg-gray-100 z-10 border-r border-gray-200\">\r\n                        Hour Totals\r\n                      </td>\r\n                      {Array.from({ length: 24 }, (_, hour) => {\r\n                        const count = matrixData.reduce(\r\n                          (sum, user) => sum + (user.hours[hour]?.portfolios.size || 0),\r\n                          0\r\n                        )\r\n                        return (\r\n                          <td key={hour} className=\"px-2 py-3 text-center text-xs text-gray-900\">\r\n                            {count > 0 ? count : ''}\r\n                          </td>\r\n                        )\r\n                      })}\r\n                      <td className=\"px-4 py-3 text-center text-sm text-gray-900 bg-gray-200 border-l border-gray-200\">\r\n                        {matrixData.reduce((sum, user) => sum + user.totalPortfolios, 0)}\r\n                      </td>\r\n                    </tr>\r\n                  </>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Hover Tooltip */}\r\n      {hoveredCell && cellInfo && (\r\n        <div\r\n          className=\"fixed z-[9999] w-80 bg-blue-900 text-white text-xs rounded-lg shadow-xl p-4 pointer-events-none\"\r\n          style={{\r\n            top: `${hoveredCell.position.top}px`,\r\n            left: `${hoveredCell.position.left}px`,\r\n            transform: 'translate(-50%, -100%)',\r\n            marginTop: '-10px',\r\n          }}\r\n        >\r\n          <div className=\"font-bold text-sm mb-2 pb-2 border-b border-blue-700\">\r\n            {cellInfo.userName} - Hour {cellInfo.hour}:00\r\n          </div>\r\n          <div className=\"mb-2\">\r\n            <div className=\"font-semibold text-blue-300\">\r\n              Total Count (All Issues): {cellInfo.totalCount}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className=\"font-semibold text-green-300 mb-1\">\r\n              Total Portfolios Monitored ({cellInfo.portfolioCount}):\r\n            </div>\r\n            <div className=\"space-y-1 max-h-32 overflow-y-auto\">\r\n              {cellInfo.portfolios.map((portfolio, idx) => (\r\n                <div key={idx} className=\"text-blue-100 pl-2\">\r\n                   {portfolio}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"absolute left-1/2 transform -translate-x-1/2 top-full border-4 border-transparent border-t-blue-900\"\r\n            style={{ marginTop: '-1px' }}\r\n          ></div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex items-center justify-end gap-2\">\r\n        <Button variant=\"secondary\" size=\"sm\" onClick={() => setShowCharts(!showCharts)}>\r\n          {showCharts ? 'Hide Charts' : 'Show Charts'}\r\n        </Button>\r\n        <Button variant=\"primary\" size=\"sm\" onClick={handleExportMatrix} style={{ backgroundColor: '#76ab3f' }}>\r\n          Export Matrix\r\n        </Button>\r\n      </div>\r\n\r\n      {/* User Performance Details Modal */}\r\n      {selectedUser && (\r\n        <UserPerformanceModal\r\n          user={selectedUser}\r\n          onClose={() => setSelectedUser(null)}\r\n          getUserPerformanceDetails={getUserPerformanceDetails}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\ninterface UserPerformanceModalProps {\r\n  user: UserMatrixData\r\n  onClose: () => void\r\n  getUserPerformanceDetails: (user: UserMatrixData) => {\r\n    totalCount: number\r\n    activeIssues: number\r\n    healthySites: number\r\n    missedAlerts: number\r\n    totalPortfoliosMonitored: number\r\n    monitoringActiveHours: number\r\n    portfolios: string[]\r\n    hourlyBreakdown: { hour: number; portfolios: number; issues: number; activeIssues: number }[]\r\n  }\r\n}\r\n\r\nconst UserPerformanceModal: React.FC<UserPerformanceModalProps> = ({\r\n  user,\r\n  onClose,\r\n  getUserPerformanceDetails,\r\n}) => {\r\n  const details = getUserPerformanceDetails(user)\r\n\r\n  const hourlyChartData = {\r\n    labels: details.hourlyBreakdown.map((h) => h.hour.toString()),\r\n    datasets: [\r\n      {\r\n        label: 'Portfolios',\r\n        data: details.hourlyBreakdown.map((h) => h.portfolios),\r\n        backgroundColor: 'rgba(34, 197, 94, 0.8)',\r\n        borderColor: 'rgba(34, 197, 94, 1)',\r\n        borderWidth: 1,\r\n      },\r\n      {\r\n        label: 'Issues',\r\n        data: details.hourlyBreakdown.map((h) => h.issues),\r\n        backgroundColor: 'rgba(59, 130, 246, 0.8)',\r\n        borderColor: 'rgba(59, 130, 246, 1)',\r\n        borderWidth: 1,\r\n      },\r\n      {\r\n        label: 'Active Issues',\r\n        data: details.hourlyBreakdown.map((h) => h.activeIssues),\r\n        backgroundColor: 'rgba(239, 68, 68, 0.8)',\r\n        borderColor: 'rgba(239, 68, 68, 1)',\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  }\r\n\r\n  const hourlyChartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        display: true,\r\n        position: 'bottom' as const,\r\n      },\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        ticks: {\r\n          stepSize: 0.5,\r\n          max: 2,\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Count',\r\n        },\r\n      },\r\n      x: {\r\n        title: {\r\n          display: true,\r\n          text: 'Hour',\r\n        },\r\n      },\r\n    },\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title=\"User Performance Details\" size=\"lg\">\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h3 className=\"text-xl font-bold text-gray-900\">{user.displayName}</h3>\r\n        </div>\r\n\r\n        {/* Metric Cards */}\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\r\n            <div className=\"text-2xl font-bold text-blue-600\">{details.totalCount}</div>\r\n            <div className=\"text-sm text-gray-600 mt-1\">Total Count</div>\r\n          </div>\r\n          <div className=\"bg-red-50 rounded-lg p-4 border border-red-200\">\r\n            <div className=\"text-2xl font-bold text-red-600\">{details.activeIssues}</div>\r\n            <div className=\"text-sm text-gray-600 mt-1\">Active Issues</div>\r\n          </div>\r\n          <div className=\"bg-green-50 rounded-lg p-4 border border-green-200\">\r\n            <div className=\"text-2xl font-bold text-green-600\">{details.healthySites}</div>\r\n            <div className=\"text-sm text-gray-600 mt-1\">Healthy Sites</div>\r\n          </div>\r\n          <div className=\"bg-orange-50 rounded-lg p-4 border border-orange-200\">\r\n            <div className=\"text-2xl font-bold text-orange-600\">{details.missedAlerts}</div>\r\n            <div className=\"text-sm text-gray-600 mt-1\">Missed Alerts</div>\r\n          </div>\r\n          <div className=\"bg-purple-50 rounded-lg p-4 border border-purple-200\">\r\n            <div className=\"text-2xl font-bold text-purple-600\">{details.totalPortfoliosMonitored}</div>\r\n            <div className=\"text-sm text-gray-600 mt-1\">Total Portfolios Monitored</div>\r\n          </div>\r\n          <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\r\n            <div className=\"text-2xl font-bold text-blue-600\">{details.monitoringActiveHours}</div>\r\n            <div className=\"text-sm text-gray-600 mt-1\">Monitoring Active Hours</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Total Portfolios Monitored */}\r\n        {details.portfolios.length > 0 && (\r\n          <div>\r\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">\r\n              Total Portfolios Monitored ({details.portfolios.length})\r\n            </h4>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {details.portfolios.map((portfolio, idx) => (\r\n                <span\r\n                  key={idx}\r\n                  className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\"\r\n                >\r\n                  {portfolio}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Hourly Breakdown Chart */}\r\n        {details.hourlyBreakdown.length > 0 && (\r\n          <div>\r\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Hourly Breakdown</h4>\r\n            <div style={{ height: '300px' }}>\r\n              <Bar data={hourlyChartData} options={hourlyChartOptions} />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex justify-end pt-4\">\r\n          <Button variant=\"primary\" onClick={onClose} style={{ backgroundColor: '#76ab3f' }}>\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CoverageMatrix\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}