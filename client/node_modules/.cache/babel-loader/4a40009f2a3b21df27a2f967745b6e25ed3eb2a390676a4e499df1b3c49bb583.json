{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LibsysAdmin\\\\OneDrive - Libsys IT Services Private Limited\\\\Desktop\\\\ALLLL HLSC\\\\client\\\\src\\\\context\\\\AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(() => {\n    // Load user from localStorage on mount\n    const storedUser = localStorage.getItem('user');\n    return storedUser ? JSON.parse(storedUser) : null;\n  });\n  const [loading, setLoading] = useState(false);\n  const login = async credentials => {\n    setLoading(true);\n    try {\n      const {\n        authService\n      } = await import('../services/authService');\n      const response = await authService.login(credentials);\n      localStorage.setItem('auth_token', response.token);\n      localStorage.setItem('user', JSON.stringify(response.user));\n      setUser(response.user);\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response2, _error$response3;\n      console.error('Login error:', error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || 'Login failed';\n      console.error('Error details:', {\n        message: errorMessage,\n        response: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data,\n        status: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status\n      });\n      alert(`Login failed: ${errorMessage}`);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n    setUser(null);\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      loading,\n      login,\n      logout,\n      isAuthenticated: !!user\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"PKcEBFpZNF07NLY/lQ293ioBzvc=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","jsxDEV","_jsxDEV","AuthContext","undefined","useAuth","_s","context","Error","AuthProvider","children","_s2","user","setUser","storedUser","localStorage","getItem","JSON","parse","loading","setLoading","login","credentials","authService","response","setItem","token","stringify","error","_error$response","_error$response$data","_error$response2","_error$response3","console","errorMessage","data","message","status","alert","logout","removeItem","Provider","value","isAuthenticated","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LibsysAdmin/OneDrive - Libsys IT Services Private Limited/Desktop/ALLLL HLSC/client/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, ReactNode } from 'react'\n\ninterface AuthContextType {\n  user: any | null\n  loading: boolean\n  login: (credentials: any) => Promise<void>\n  logout: () => void\n  isAuthenticated: boolean\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider')\n  }\n  return context\n}\n\nexport const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<any | null>(() => {\n    // Load user from localStorage on mount\n    const storedUser = localStorage.getItem('user')\n    return storedUser ? JSON.parse(storedUser) : null\n  })\n  const [loading, setLoading] = useState(false)\n\n  const login = async (credentials: any) => {\n    setLoading(true)\n    try {\n      const { authService } = await import('../services/authService')\n      const response = await authService.login(credentials)\n      localStorage.setItem('auth_token', response.token)\n      localStorage.setItem('user', JSON.stringify(response.user))\n      setUser(response.user)\n    } catch (error: any) {\n      console.error('Login error:', error)\n      const errorMessage = error.response?.data?.error || error.message || 'Login failed'\n      console.error('Error details:', {\n        message: errorMessage,\n        response: error.response?.data,\n        status: error.response?.status,\n      })\n      alert(`Login failed: ${errorMessage}`)\n      throw error\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const logout = () => {\n    localStorage.removeItem('auth_token')\n    localStorage.removeItem('user')\n    setUser(null)\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        loading,\n        login,\n        logout,\n        isAuthenticated: !!user,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}